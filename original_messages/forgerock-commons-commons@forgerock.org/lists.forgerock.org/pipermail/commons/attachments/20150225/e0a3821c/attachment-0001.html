<tt>
&lt;!DOCTYPE&nbsp;html&nbsp;PUBLIC&nbsp;&quot;-//W3C//DTD&nbsp;XHTML&nbsp;1.1//EN&quot;<br>
&quot;http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd&quot;&gt;<br>
&lt;html&nbsp;xmlns=&quot;http://www.w3.org/1999/xhtml&quot;&gt;<br>
&lt;head&gt;&lt;meta&nbsp;http-equiv=&quot;content-type&quot;&nbsp;content=&quot;text/html;&nbsp;charset=utf-8&quot;&nbsp;/&gt;<br>
&lt;title&gt;[2965]&nbsp;forgerock-bloomfilter:&nbsp;Initial&nbsp;check-in&nbsp;of&nbsp;commons&nbsp;Bloom&nbsp;Filter&nbsp;project&nbsp;structure.&lt;/title&gt;<br>
&lt;/head&gt;<br>
&lt;body&gt;<br>
<br>
&lt;style&nbsp;type=&quot;text/css&quot;&gt;&lt;!--<br>
#msg&nbsp;dl.meta&nbsp;{&nbsp;border:&nbsp;1px&nbsp;#006&nbsp;solid;&nbsp;background:&nbsp;#369;&nbsp;padding:&nbsp;6px;&nbsp;color:&nbsp;#fff;&nbsp;}<br>
#msg&nbsp;dl.meta&nbsp;dt&nbsp;{&nbsp;float:&nbsp;left;&nbsp;width:&nbsp;6em;&nbsp;font-weight:&nbsp;bold;&nbsp;}<br>
#msg&nbsp;dt:after&nbsp;{&nbsp;content:':';}<br>
#msg&nbsp;dl,&nbsp;#msg&nbsp;dt,&nbsp;#msg&nbsp;ul,&nbsp;#msg&nbsp;li,&nbsp;#header,&nbsp;#footer,&nbsp;#logmsg&nbsp;{&nbsp;font-family:&nbsp;verdana,arial,helvetica,sans-serif;&nbsp;font-size:&nbsp;10pt;&nbsp;&nbsp;}<br>
#msg&nbsp;dl&nbsp;a&nbsp;{&nbsp;font-weight:&nbsp;bold}<br>
#msg&nbsp;dl&nbsp;a:link&nbsp;&nbsp;&nbsp;&nbsp;{&nbsp;color:#fc3;&nbsp;}<br>
#msg&nbsp;dl&nbsp;a:active&nbsp;&nbsp;{&nbsp;color:#ff0;&nbsp;}<br>
#msg&nbsp;dl&nbsp;a:visited&nbsp;{&nbsp;color:#cc6;&nbsp;}<br>
h3&nbsp;{&nbsp;font-family:&nbsp;verdana,arial,helvetica,sans-serif;&nbsp;font-size:&nbsp;10pt;&nbsp;font-weight:&nbsp;bold;&nbsp;}<br>
#msg&nbsp;pre&nbsp;{&nbsp;overflow:&nbsp;auto;&nbsp;background:&nbsp;#ffc;&nbsp;border:&nbsp;1px&nbsp;#fa0&nbsp;solid;&nbsp;padding:&nbsp;6px;&nbsp;}<br>
#logmsg&nbsp;{&nbsp;background:&nbsp;#ffc;&nbsp;border:&nbsp;1px&nbsp;#fa0&nbsp;solid;&nbsp;padding:&nbsp;1em&nbsp;1em&nbsp;0&nbsp;1em;&nbsp;}<br>
#logmsg&nbsp;p,&nbsp;#logmsg&nbsp;pre,&nbsp;#logmsg&nbsp;blockquote&nbsp;{&nbsp;margin:&nbsp;0&nbsp;0&nbsp;1em&nbsp;0;&nbsp;}<br>
#logmsg&nbsp;p,&nbsp;#logmsg&nbsp;li,&nbsp;#logmsg&nbsp;dt,&nbsp;#logmsg&nbsp;dd&nbsp;{&nbsp;line-height:&nbsp;14pt;&nbsp;}<br>
#logmsg&nbsp;h1,&nbsp;#logmsg&nbsp;h2,&nbsp;#logmsg&nbsp;h3,&nbsp;#logmsg&nbsp;h4,&nbsp;#logmsg&nbsp;h5,&nbsp;#logmsg&nbsp;h6&nbsp;{&nbsp;margin:&nbsp;.5em&nbsp;0;&nbsp;}<br>
#logmsg&nbsp;h1:first-child,&nbsp;#logmsg&nbsp;h2:first-child,&nbsp;#logmsg&nbsp;h3:first-child,&nbsp;#logmsg&nbsp;h4:first-child,&nbsp;#logmsg&nbsp;h5:first-child,&nbsp;#logmsg&nbsp;h6:first-child&nbsp;{&nbsp;margin-top:&nbsp;0;&nbsp;}<br>
#logmsg&nbsp;ul,&nbsp;#logmsg&nbsp;ol&nbsp;{&nbsp;padding:&nbsp;0;&nbsp;list-style-position:&nbsp;inside;&nbsp;margin:&nbsp;0&nbsp;0&nbsp;0&nbsp;1em;&nbsp;}<br>
#logmsg&nbsp;ul&nbsp;{&nbsp;text-indent:&nbsp;-1em;&nbsp;padding-left:&nbsp;1em;&nbsp;}#logmsg&nbsp;ol&nbsp;{&nbsp;text-indent:&nbsp;-1.5em;&nbsp;padding-left:&nbsp;1.5em;&nbsp;}<br>
#logmsg&nbsp;&gt;&nbsp;ul,&nbsp;#logmsg&nbsp;&gt;&nbsp;ol&nbsp;{&nbsp;margin:&nbsp;0&nbsp;0&nbsp;1em&nbsp;0;&nbsp;}<br>
#logmsg&nbsp;pre&nbsp;{&nbsp;background:&nbsp;#eee;&nbsp;padding:&nbsp;1em;&nbsp;}<br>
#logmsg&nbsp;blockquote&nbsp;{&nbsp;border:&nbsp;1px&nbsp;solid&nbsp;#fa0;&nbsp;border-left-width:&nbsp;10px;&nbsp;padding:&nbsp;1em&nbsp;1em&nbsp;0&nbsp;1em;&nbsp;background:&nbsp;white;}<br>
#logmsg&nbsp;dl&nbsp;{&nbsp;margin:&nbsp;0;&nbsp;}<br>
#logmsg&nbsp;dt&nbsp;{&nbsp;font-weight:&nbsp;bold;&nbsp;}<br>
#logmsg&nbsp;dd&nbsp;{&nbsp;margin:&nbsp;0;&nbsp;padding:&nbsp;0&nbsp;0&nbsp;0.5em&nbsp;0;&nbsp;}<br>
#logmsg&nbsp;dd:before&nbsp;{&nbsp;content:'\00bb';}<br>
#logmsg&nbsp;table&nbsp;{&nbsp;border-spacing:&nbsp;0px;&nbsp;border-collapse:&nbsp;collapse;&nbsp;border-top:&nbsp;4px&nbsp;solid&nbsp;#fa0;&nbsp;border-bottom:&nbsp;1px&nbsp;solid&nbsp;#fa0;&nbsp;background:&nbsp;#fff;&nbsp;}<br>
#logmsg&nbsp;table&nbsp;th&nbsp;{&nbsp;text-align:&nbsp;left;&nbsp;font-weight:&nbsp;normal;&nbsp;padding:&nbsp;0.2em&nbsp;0.5em;&nbsp;border-top:&nbsp;1px&nbsp;dotted&nbsp;#fa0;&nbsp;}<br>
#logmsg&nbsp;table&nbsp;td&nbsp;{&nbsp;text-align:&nbsp;right;&nbsp;border-top:&nbsp;1px&nbsp;dotted&nbsp;#fa0;&nbsp;padding:&nbsp;0.2em&nbsp;0.5em;&nbsp;}<br>
#logmsg&nbsp;table&nbsp;thead&nbsp;th&nbsp;{&nbsp;text-align:&nbsp;center;&nbsp;border-bottom:&nbsp;1px&nbsp;solid&nbsp;#fa0;&nbsp;}<br>
#logmsg&nbsp;table&nbsp;th.Corner&nbsp;{&nbsp;text-align:&nbsp;left;&nbsp;}<br>
#logmsg&nbsp;hr&nbsp;{&nbsp;border:&nbsp;none&nbsp;0;&nbsp;border-top:&nbsp;2px&nbsp;dashed&nbsp;#fa0;&nbsp;height:&nbsp;1px;&nbsp;}<br>
#header,&nbsp;#footer&nbsp;{&nbsp;color:&nbsp;#fff;&nbsp;background:&nbsp;#636;&nbsp;border:&nbsp;1px&nbsp;#300&nbsp;solid;&nbsp;padding:&nbsp;6px;&nbsp;}<br>
#patch&nbsp;{&nbsp;width:&nbsp;100%;&nbsp;}<br>
#patch&nbsp;h4&nbsp;{font-family:&nbsp;verdana,arial,helvetica,sans-serif;font-size:10pt;padding:8px;background:#369;color:#fff;margin:0;}<br>
#patch&nbsp;.propset&nbsp;h4,&nbsp;#patch&nbsp;.binary&nbsp;h4&nbsp;{margin:0;}<br>
#patch&nbsp;pre&nbsp;{padding:0;line-height:1.2em;margin:0;}<br>
#patch&nbsp;.diff&nbsp;{width:100%;background:#eee;padding:&nbsp;0&nbsp;0&nbsp;10px&nbsp;0;overflow:auto;}<br>
#patch&nbsp;.propset&nbsp;.diff,&nbsp;#patch&nbsp;.binary&nbsp;.diff&nbsp;&nbsp;{padding:10px&nbsp;0;}<br>
#patch&nbsp;span&nbsp;{display:block;padding:0&nbsp;10px;}<br>
#patch&nbsp;.modfile,&nbsp;#patch&nbsp;.addfile,&nbsp;#patch&nbsp;.delfile,&nbsp;#patch&nbsp;.propset,&nbsp;#patch&nbsp;.binary,&nbsp;#patch&nbsp;.copfile&nbsp;{border:1px&nbsp;solid&nbsp;#ccc;margin:10px&nbsp;0;}<br>
#patch&nbsp;ins&nbsp;{background:#dfd;text-decoration:none;display:block;padding:0&nbsp;10px;}<br>
#patch&nbsp;del&nbsp;{background:#fdd;text-decoration:none;display:block;padding:0&nbsp;10px;}<br>
#patch&nbsp;.lines,&nbsp;.info&nbsp;{color:#888;background:#fff;}<br>
--&gt;&lt;/style&gt;<br>
&lt;div&nbsp;id=&quot;msg&quot;&gt;<br>
&lt;dl&nbsp;class=&quot;meta&quot;&gt;<br>
&lt;dt&gt;Revision&lt;/dt&gt;&nbsp;&lt;dd&gt;&lt;a&nbsp;href=&quot;http://sources.forgerock.org/changelog/commons/?cs=2965&quot;&gt;2965&lt;/a&gt;&lt;/dd&gt;<br>
&lt;dt&gt;Author&lt;/dt&gt;&nbsp;&lt;dd&gt;neil.madden&lt;/dd&gt;<br>
&lt;dt&gt;Date&lt;/dt&gt;&nbsp;&lt;dd&gt;2015-02-25&nbsp;13:51:47&nbsp;+0000&nbsp;(Wed,&nbsp;25&nbsp;Feb&nbsp;2015)&lt;/dd&gt;<br>
&lt;/dl&gt;<br>
<br>
&lt;h3&gt;Log&nbsp;Message&lt;/h3&gt;<br>
&lt;pre&gt;Initial&nbsp;check-in&nbsp;of&nbsp;commons&nbsp;Bloom&nbsp;Filter&nbsp;project&nbsp;structure.&lt;/pre&gt;<br>
<br>
&lt;h3&gt;Added&nbsp;Paths&lt;/h3&gt;<br>
&lt;ul&gt;<br>
&lt;li&gt;forgerock-bloomfilter/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-core/&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunkbloomfiltercorepomxml&quot;&gt;forgerock-bloomfilter/trunk/bloomfilter-core/pom.xml&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterBatchingBloomFilterjava&quot;&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BatchingBloomFilter.java&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterBloomFilterjava&quot;&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BloomFilter.java&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterBloomFilterChainjava&quot;&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BloomFilterChain.java&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterBloomFilterFactoryjava&quot;&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BloomFilterFactory.java&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterBloomFilterPooljava&quot;&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BloomFilterPool.java&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterBloomFilterStatisticsjava&quot;&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BloomFilterStatistics.java&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterBloomFiltersjava&quot;&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BloomFilters.java&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterConcurrencyStrategyjava&quot;&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/ConcurrencyStrategy.java&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterConcurrentRollingBloomFilterjava&quot;&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/ConcurrentRollingBloomFilter.java&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterCopyOnWriteBloomFilterjava&quot;&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/CopyOnWriteBloomFilter.java&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterExpiringBloomFilterjava&quot;&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/ExpiringBloomFilter.java&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterExpiryStrategyjava&quot;&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/ExpiryStrategy.java&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterSynchronizedBloomFilterjava&quot;&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/SynchronizedBloomFilter.java&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterpackageinfojava&quot;&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/package-info.java&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/resources/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/test/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/test/java/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/test/java/org/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/test/java/org/forgerock/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/test/java/org/forgerock/bloomfilter/&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunkbloomfiltercoresrctestjavaorgforgerockbloomfilterBatchingBloomFilterTestjava&quot;&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/test/java/org/forgerock/bloomfilter/BatchingBloomFilterTest.java&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunkbloomfiltercoresrctestjavaorgforgerockbloomfilterBloomFilterChainTestjava&quot;&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/test/java/org/forgerock/bloomfilter/BloomFilterChainTest.java&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunkbloomfiltercoresrctestjavaorgforgerockbloomfilterConcurrentRollingBloomFilterTestjava&quot;&gt;forgerock-bloomfilter/trunk/bloomfilter-core/src/test/java/org/forgerock/bloomfilter/ConcurrentRollingBloomFilterTest.java&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-monitoring/&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunkbloomfiltermonitoringpomxml&quot;&gt;forgerock-bloomfilter/trunk/bloomfilter-monitoring/pom.xml&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/main/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/main/java/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/main/java/org/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/main/java/org/forgerock/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/main/java/org/forgerock/bloomfilter/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/main/java/org/forgerock/bloomfilter/monitoring/&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunkbloomfiltermonitoringsrcmainjavaorgforgerockbloomfiltermonitoringBloomFilterMXBeanjava&quot;&gt;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/main/java/org/forgerock/bloomfilter/monitoring/BloomFilterMXBean.java&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunkbloomfiltermonitoringsrcmainjavaorgforgerockbloomfiltermonitoringBloomFilterMonitorjava&quot;&gt;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/main/java/org/forgerock/bloomfilter/monitoring/BloomFilterMonitor.java&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunkbloomfiltermonitoringsrcmainjavaorgforgerockbloomfiltermonitoringMethodCallStatisticsjava&quot;&gt;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/main/java/org/forgerock/bloomfilter/monitoring/MethodCallStatistics.java&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/main/resources/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/test/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/test/java/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/test/java/org/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/test/java/org/forgerock/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/test/java/org/forgerock/bloomfilter/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/test/java/org/forgerock/bloomfilter/monitoring/&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunkbloomfiltermonitoringsrctestjavaorgforgerockbloomfiltermonitoringBloomFilterMonitorTestjava&quot;&gt;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/test/java/org/forgerock/bloomfilter/monitoring/BloomFilterMonitorTest.java&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/legal/&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunklegalBSD3clausetxt&quot;&gt;forgerock-bloomfilter/trunk/legal/BSD-3-clause.txt&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunklegalCCPublicDomaintxt&quot;&gt;forgerock-bloomfilter/trunk/legal/CC-Public-Domain.txt&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunklegalCDDLv10txt&quot;&gt;forgerock-bloomfilter/trunk/legal/CDDLv1.0.txt&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunklegalapachev20txt&quot;&gt;forgerock-bloomfilter/trunk/legal/apache-v2.0.txt&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunklegalmittxt&quot;&gt;forgerock-bloomfilter/trunk/legal/mit.txt&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#forgerockbloomfiltertrunkpomxml&quot;&gt;forgerock-bloomfilter/trunk/pom.xml&lt;/a&gt;&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/src/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/src/main/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/src/main/java/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/src/main/resources/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/src/test/&lt;/li&gt;<br>
&lt;li&gt;forgerock-bloomfilter/trunk/src/test/java/&lt;/li&gt;<br>
&lt;/ul&gt;<br>
<br>
&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;patch&quot;&gt;<br>
&lt;h3&gt;Diff&lt;/h3&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunkbloomfiltercorepomxml&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/pom.xml&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/pom.xml&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/pom.xml&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,52&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+&amp;lt;?xml&nbsp;version=&amp;quot;1.0&amp;quot;&nbsp;encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;<br>
+&amp;lt;!--<br>
+&nbsp;&nbsp;~&nbsp;The&nbsp;contents&nbsp;of&nbsp;this&nbsp;file&nbsp;are&nbsp;subject&nbsp;to&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;Common&nbsp;Development&nbsp;and<br>
+&nbsp;&nbsp;~&nbsp;Distribution&nbsp;License&nbsp;(the&nbsp;License).&nbsp;You&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the<br>
+&nbsp;&nbsp;~&nbsp;License.<br>
+&nbsp;&nbsp;~<br>
+&nbsp;&nbsp;~&nbsp;You&nbsp;can&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the<br>
+&nbsp;&nbsp;~&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permission&nbsp;and&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.<br>
+&nbsp;&nbsp;~<br>
+&nbsp;&nbsp;~&nbsp;When&nbsp;distributing&nbsp;Covered&nbsp;Software,&nbsp;include&nbsp;this&nbsp;CDDL&nbsp;Header&nbsp;Notice&nbsp;in&nbsp;each&nbsp;file&nbsp;and&nbsp;include<br>
+&nbsp;&nbsp;~&nbsp;the&nbsp;License&nbsp;file&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;If&nbsp;applicable,&nbsp;add&nbsp;the&nbsp;following&nbsp;below&nbsp;the&nbsp;CDDL<br>
+&nbsp;&nbsp;~&nbsp;Header,&nbsp;with&nbsp;the&nbsp;fields&nbsp;enclosed&nbsp;by&nbsp;brackets&nbsp;[]&nbsp;replaced&nbsp;by&nbsp;your&nbsp;own&nbsp;identifying<br>
+&nbsp;&nbsp;~&nbsp;information:&nbsp;&amp;quot;Portions&nbsp;copyright&nbsp;[year]&nbsp;[name&nbsp;of&nbsp;copyright&nbsp;owner]&amp;quot;.<br>
+&nbsp;&nbsp;~<br>
+&nbsp;&nbsp;~&nbsp;Copyright&nbsp;2015&nbsp;ForgeRock&nbsp;AS.<br>
+&nbsp;&nbsp;--&amp;gt;<br>
+<br>
+&amp;lt;project&nbsp;xmlns=&amp;quot;http://maven.apache.org/POM/4.0.0&amp;quot;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xsi:schemaLocation=&amp;quot;http://maven.apache.org/POM/4.0.0&nbsp;http://maven.apache.org/xsd/maven-4.0.0.xsd&amp;quot;&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;parent&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;artifactId&amp;gt;forgerock-bloomfilter&amp;lt;/artifactId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;groupId&amp;gt;org.forgerock.commons&amp;lt;/groupId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;version&amp;gt;1.0-SNAPSHOT&amp;lt;/version&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/parent&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;artifactId&amp;gt;forgerock-bloomfilter-core&amp;lt;/artifactId&amp;gt;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;dependencies&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;groupId&amp;gt;org.forgerock.commons&amp;lt;/groupId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;artifactId&amp;gt;forgerock-util&amp;lt;/artifactId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/dependency&amp;gt;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;groupId&amp;gt;org.forgerock.commons.guava&amp;lt;/groupId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;artifactId&amp;gt;forgerock-guava-hash&amp;lt;/artifactId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;groupId&amp;gt;com.google.code.findbugs&amp;lt;/groupId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;artifactId&amp;gt;jsr305&amp;lt;/artifactId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;optional&amp;gt;true&amp;lt;/optional&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;groupId&amp;gt;org.slf4j&amp;lt;/groupId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;artifactId&amp;gt;slf4j-api&amp;lt;/artifactId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/dependencies&amp;gt;<br>
+<br>
+<br>
+&amp;lt;/project&amp;gt;<br>
&lt;/ins&gt;&lt;span&nbsp;class=&quot;cx&quot;&gt;\&nbsp;No&nbsp;newline&nbsp;at&nbsp;end&nbsp;of&nbsp;file<br>
&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterBatchingBloomFilterjava&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BatchingBloomFilter.java&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BatchingBloomFilter.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BatchingBloomFilter.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,112&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+/*<br>
+&nbsp;*&nbsp;The&nbsp;contents&nbsp;of&nbsp;this&nbsp;file&nbsp;are&nbsp;subject&nbsp;to&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;Common&nbsp;Development&nbsp;and<br>
+&nbsp;*&nbsp;Distribution&nbsp;License&nbsp;(the&nbsp;License).&nbsp;You&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the<br>
+&nbsp;*&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;You&nbsp;can&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the<br>
+&nbsp;*&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permission&nbsp;and&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;When&nbsp;distributing&nbsp;Covered&nbsp;Software,&nbsp;include&nbsp;this&nbsp;CDDL&nbsp;Header&nbsp;Notice&nbsp;in&nbsp;each&nbsp;file&nbsp;and&nbsp;include<br>
+&nbsp;*&nbsp;the&nbsp;License&nbsp;file&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;If&nbsp;applicable,&nbsp;add&nbsp;the&nbsp;following&nbsp;below&nbsp;the&nbsp;CDDL<br>
+&nbsp;*&nbsp;Header,&nbsp;with&nbsp;the&nbsp;fields&nbsp;enclosed&nbsp;by&nbsp;brackets&nbsp;[]&nbsp;replaced&nbsp;by&nbsp;your&nbsp;own&nbsp;identifying<br>
+&nbsp;*&nbsp;information:&nbsp;&amp;quot;Portions&nbsp;copyright&nbsp;[year]&nbsp;[name&nbsp;of&nbsp;copyright&nbsp;owner]&amp;quot;.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;Copyright&nbsp;2015&nbsp;ForgeRock&nbsp;AS.<br>
+&nbsp;*/<br>
+<br>
+package&nbsp;org.forgerock.bloomfilter;<br>
+<br>
+import&nbsp;java.util.ArrayList;<br>
+import&nbsp;java.util.Collection;<br>
+import&nbsp;java.util.Collections;<br>
+import&nbsp;java.util.List;<br>
+import&nbsp;java.util.Set;<br>
+import&nbsp;java.util.concurrent.ConcurrentHashMap;<br>
+<br>
+/**<br>
+&nbsp;*&nbsp;A&nbsp;bloom&nbsp;filter&nbsp;decorator&nbsp;that&nbsp;batches&nbsp;up&nbsp;writes&nbsp;in&nbsp;an&nbsp;internal&nbsp;buffer&nbsp;and&nbsp;applies&nbsp;them&nbsp;once&nbsp;the&nbsp;buffer&nbsp;is&nbsp;full&nbsp;via<br>
+&nbsp;*&nbsp;the&nbsp;{@link&nbsp;BloomFilter#addAll(Collection)}&nbsp;method.&nbsp;This&nbsp;can&nbsp;be&nbsp;useful&nbsp;to&nbsp;mitigate&nbsp;the&nbsp;slow&nbsp;write&nbsp;performance&nbsp;(and<br>
+&nbsp;*&nbsp;memory&nbsp;usage)&nbsp;of&nbsp;the&nbsp;{@link&nbsp;CopyOnWriteBloomFilter}&nbsp;by&nbsp;amortizing&nbsp;the&nbsp;cost&nbsp;of&nbsp;the&nbsp;array&nbsp;copy&nbsp;over&nbsp;a&nbsp;large&nbsp;number<br>
+&nbsp;*&nbsp;of&nbsp;modifications.&nbsp;The&nbsp;implementation&nbsp;ensures&nbsp;that&nbsp;the&nbsp;buffer&nbsp;is&nbsp;also&nbsp;considered&nbsp;during&nbsp;any&nbsp;read&nbsp;requests,<br>
+&nbsp;*&nbsp;eliminating&nbsp;the&nbsp;possibility&nbsp;of&nbsp;false&nbsp;negatives.&nbsp;The&nbsp;downside&nbsp;of&nbsp;this&nbsp;implementation,&nbsp;other&nbsp;than&nbsp;increased&nbsp;memory<br>
+&nbsp;*&nbsp;usage&nbsp;and&nbsp;a&nbsp;small&nbsp;additional&nbsp;overhead&nbsp;for&nbsp;reads,&nbsp;is&nbsp;that&nbsp;the&nbsp;result&nbsp;of&nbsp;the&nbsp;{@link&nbsp;#add(Object)}&nbsp;method&nbsp;is&nbsp;no<br>
+&nbsp;*&nbsp;longer&nbsp;accurate&nbsp;for&nbsp;any&nbsp;write&nbsp;that&nbsp;does&nbsp;not&nbsp;trigger&nbsp;a&nbsp;buffer&nbsp;flush,&nbsp;and&nbsp;only&nbsp;returns&nbsp;an&nbsp;aggregate&nbsp;result&nbsp;for&nbsp;those<br>
+&nbsp;*&nbsp;that&nbsp;do.<br>
+&nbsp;*/<br>
+final&nbsp;class&nbsp;BatchingBloomFilter&amp;lt;T&amp;gt;&nbsp;implements&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;delegate;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;int&nbsp;batchSize;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;Set&amp;lt;T&amp;gt;&nbsp;buffer;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Constructs&nbsp;the&nbsp;batching&nbsp;decorator&nbsp;with&nbsp;the&nbsp;given&nbsp;delegate&nbsp;and&nbsp;batch&nbsp;size.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;delegate&nbsp;the&nbsp;real&nbsp;bloom&nbsp;filter&nbsp;to&nbsp;delegate&nbsp;calls&nbsp;to.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;batchSize&nbsp;the&nbsp;number&nbsp;of&nbsp;writes&nbsp;to&nbsp;batch&nbsp;before&nbsp;sending&nbsp;to&nbsp;the&nbsp;delegate.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;BatchingBloomFilter(final&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;delegate,&nbsp;final&nbsp;int&nbsp;batchSize)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.delegate&nbsp;=&nbsp;delegate;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.batchSize&nbsp;=&nbsp;batchSize;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.buffer&nbsp;=&nbsp;newBuffer(batchSize);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Adds&nbsp;the&nbsp;given&nbsp;element&nbsp;to&nbsp;the&nbsp;internal&nbsp;buffer.&nbsp;If&nbsp;the&nbsp;buffer&nbsp;has&nbsp;exceeded&nbsp;the&nbsp;batch&nbsp;size&nbsp;then&nbsp;the&nbsp;contents&nbsp;of<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;the&nbsp;buffer&nbsp;is&nbsp;flushed&nbsp;to&nbsp;the&nbsp;underlying&nbsp;bloom&nbsp;filter.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;element&nbsp;the&nbsp;element&nbsp;to&nbsp;add&nbsp;to&nbsp;this&nbsp;set.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;{@code&nbsp;false}&nbsp;if&nbsp;the&nbsp;addition&nbsp;causes&nbsp;the&nbsp;buffer&nbsp;to&nbsp;be&nbsp;flushed&nbsp;to&nbsp;the&nbsp;underlying&nbsp;bloom&nbsp;filter,&nbsp;but&nbsp;no<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;changes&nbsp;were&nbsp;made&nbsp;as&nbsp;a&nbsp;result,&nbsp;otherwise&nbsp;{@code&nbsp;true}.&nbsp;As&nbsp;with&nbsp;all&nbsp;BloomFilters,&nbsp;a&nbsp;{@code&nbsp;true}&nbsp;result&nbsp;should<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;be&nbsp;treated&nbsp;as&nbsp;&amp;quot;maybe&amp;quot;.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;boolean&nbsp;add(final&nbsp;T&nbsp;element)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boolean&nbsp;changed&nbsp;=&nbsp;buffer.add(element);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(buffer.size()&nbsp;&amp;gt;=&nbsp;batchSize)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;List&amp;lt;T&amp;gt;&nbsp;batch&nbsp;=&nbsp;new&nbsp;ArrayList&amp;lt;T&amp;gt;(buffer);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!batch.isEmpty())&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;changed&nbsp;|=&nbsp;delegate.addAll(batch);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Only&nbsp;remove&nbsp;elements&nbsp;that&nbsp;we&nbsp;have&nbsp;actually&nbsp;processed,&nbsp;to&nbsp;avoid&nbsp;lost&nbsp;updates<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;buffer.removeAll(batch);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;changed;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Adds&nbsp;the&nbsp;entire&nbsp;collection&nbsp;of&nbsp;elements&nbsp;directly&nbsp;to&nbsp;the&nbsp;underlying&nbsp;Bloom&nbsp;Filter.&nbsp;No&nbsp;buffering&nbsp;is&nbsp;done&nbsp;in&nbsp;this<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;case.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;elements&nbsp;the&nbsp;elements&nbsp;to&nbsp;add&nbsp;to&nbsp;the&nbsp;set.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;{@code&nbsp;true}&nbsp;if&nbsp;changes&nbsp;were&nbsp;made&nbsp;to&nbsp;the&nbsp;underlying&nbsp;Bloom&nbsp;Filter&nbsp;as&nbsp;a&nbsp;result&nbsp;of&nbsp;adding&nbsp;any&nbsp;of&nbsp;the<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;elements<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;boolean&nbsp;addAll(final&nbsp;Collection&amp;lt;?&nbsp;extends&nbsp;T&amp;gt;&nbsp;elements)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Pass&nbsp;through&nbsp;directly<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;delegate.addAll(elements);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;boolean&nbsp;mightContain(final&nbsp;T&nbsp;element)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;buffer.contains(element)&nbsp;||&nbsp;delegate.mightContain(element);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;BloomFilterStatistics&nbsp;statistics()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Adjust&nbsp;estimated&nbsp;remaining&nbsp;capacity&nbsp;to&nbsp;take&nbsp;into&nbsp;account&nbsp;current&nbsp;buffer&nbsp;size<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;BloomFilterStatistics&nbsp;stats&nbsp;=&nbsp;delegate.statistics();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;BloomFilterStatistics(stats.getConfiguredFalsePositiveProbability(),<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stats.getExpectedFalsePositiveProbability(),&nbsp;stats.getCapacity(),&nbsp;stats.getBitSize(),<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stats.getExpiryTime(),&nbsp;stats.getEstimatedRemainingCapacity()&nbsp;-&nbsp;buffer.size());<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;toString()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&amp;quot;BatchingBloomFilter{delegate=&amp;quot;&nbsp;+&nbsp;delegate&nbsp;+&nbsp;&amp;quot;,&nbsp;batchSize=&amp;quot;&nbsp;+&nbsp;batchSize&nbsp;+&nbsp;'}';<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;Set&amp;lt;T&amp;gt;&nbsp;newBuffer(int&nbsp;batchSize)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Collections.newSetFromMap(new&nbsp;ConcurrentHashMap&amp;lt;T,&nbsp;Boolean&amp;gt;(batchSize));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+}<br>
&lt;/ins&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterBloomFilterjava&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BloomFilter.java&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BloomFilter.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BloomFilter.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,67&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+/*<br>
+&nbsp;*&nbsp;The&nbsp;contents&nbsp;of&nbsp;this&nbsp;file&nbsp;are&nbsp;subject&nbsp;to&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;Common&nbsp;Development&nbsp;and<br>
+&nbsp;*&nbsp;Distribution&nbsp;License&nbsp;(the&nbsp;License).&nbsp;You&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the<br>
+&nbsp;*&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;You&nbsp;can&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the<br>
+&nbsp;*&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permission&nbsp;and&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;When&nbsp;distributing&nbsp;Covered&nbsp;Software,&nbsp;include&nbsp;this&nbsp;CDDL&nbsp;Header&nbsp;Notice&nbsp;in&nbsp;each&nbsp;file&nbsp;and&nbsp;include<br>
+&nbsp;*&nbsp;the&nbsp;License&nbsp;file&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;If&nbsp;applicable,&nbsp;add&nbsp;the&nbsp;following&nbsp;below&nbsp;the&nbsp;CDDL<br>
+&nbsp;*&nbsp;Header,&nbsp;with&nbsp;the&nbsp;fields&nbsp;enclosed&nbsp;by&nbsp;brackets&nbsp;[]&nbsp;replaced&nbsp;by&nbsp;your&nbsp;own&nbsp;identifying<br>
+&nbsp;*&nbsp;information:&nbsp;&amp;quot;Portions&nbsp;copyright&nbsp;[year]&nbsp;[name&nbsp;of&nbsp;copyright&nbsp;owner]&amp;quot;.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;Copyright&nbsp;2015&nbsp;ForgeRock&nbsp;AS.<br>
+&nbsp;*/<br>
+<br>
+package&nbsp;org.forgerock.bloomfilter;<br>
+<br>
+import&nbsp;javax.annotation.concurrent.ThreadSafe;<br>
+import&nbsp;java.util.Collection;<br>
+<br>
+/**<br>
+&nbsp;*&nbsp;A&nbsp;type&nbsp;of&nbsp;set&nbsp;data&nbsp;structure&nbsp;for&nbsp;which&nbsp;the&nbsp;contains&nbsp;method&nbsp;may&nbsp;return&nbsp;false&nbsp;positives.&nbsp;Implementations&nbsp;typically<br>
+&nbsp;*&nbsp;can&nbsp;store&nbsp;very&nbsp;large&nbsp;numbers&nbsp;of&nbsp;elements&nbsp;in&nbsp;memory&nbsp;at&nbsp;the&nbsp;cost&nbsp;of&nbsp;some&nbsp;loss&nbsp;of&nbsp;accuracy&nbsp;in&nbsp;determining&nbsp;set<br>
+&nbsp;*&nbsp;membership.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;@param&nbsp;&amp;lt;E&amp;gt;&nbsp;the&nbsp;type&nbsp;of&nbsp;elements&nbsp;contained&nbsp;in&nbsp;the&nbsp;set.<br>
+&nbsp;*/<br>
+@ThreadSafe<br>
+public&nbsp;interface&nbsp;BloomFilter&amp;lt;E&amp;gt;&nbsp;{<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Adds&nbsp;the&nbsp;specified&nbsp;element&nbsp;to&nbsp;this&nbsp;set&nbsp;if&nbsp;it&nbsp;is&nbsp;not&nbsp;already&nbsp;possibly&nbsp;present.&nbsp;After&nbsp;a&nbsp;call&nbsp;to&nbsp;this&nbsp;method,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;subsequent&nbsp;calls&nbsp;to&nbsp;{@link&nbsp;#mightContain(Object)}&nbsp;will&nbsp;return&nbsp;{@code&nbsp;true}&nbsp;for&nbsp;the&nbsp;same&nbsp;object.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;element&nbsp;the&nbsp;element&nbsp;to&nbsp;add&nbsp;to&nbsp;this&nbsp;set.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;{@code&nbsp;true}&nbsp;if&nbsp;the&nbsp;set&nbsp;changed&nbsp;as&nbsp;a&nbsp;result&nbsp;of&nbsp;adding&nbsp;this&nbsp;element.&nbsp;A&nbsp;positive&nbsp;result&nbsp;indicates&nbsp;that<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;the&nbsp;element&nbsp;was&nbsp;not&nbsp;previously&nbsp;in&nbsp;the&nbsp;set,&nbsp;while&nbsp;a&nbsp;negative&nbsp;result&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;indicate&nbsp;that&nbsp;it&nbsp;was&nbsp;already<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;in&nbsp;the&nbsp;set.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;boolean&nbsp;add(E&nbsp;element);<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Adds&nbsp;all&nbsp;of&nbsp;the&nbsp;specified&nbsp;elements&nbsp;to&nbsp;this&nbsp;set&nbsp;if&nbsp;they&nbsp;are&nbsp;not&nbsp;possibly&nbsp;already&nbsp;present.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;elements&nbsp;the&nbsp;elements&nbsp;to&nbsp;add&nbsp;to&nbsp;the&nbsp;set.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;{@code&nbsp;true}&nbsp;if&nbsp;the&nbsp;set&nbsp;changed&nbsp;as&nbsp;a&nbsp;result&nbsp;of&nbsp;adding&nbsp;these&nbsp;elements.&nbsp;A&nbsp;positive&nbsp;result&nbsp;indicates&nbsp;that<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;at&nbsp;least&nbsp;one&nbsp;element&nbsp;of&nbsp;the&nbsp;collection&nbsp;was&nbsp;not&nbsp;present&nbsp;in&nbsp;the&nbsp;set.&nbsp;A&nbsp;negative&nbsp;result&nbsp;may&nbsp;or&nbsp;may&nbsp;not&nbsp;indicate<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;that&nbsp;one&nbsp;of&nbsp;the&nbsp;elements&nbsp;was&nbsp;not&nbsp;present&nbsp;in&nbsp;the&nbsp;set&nbsp;previously.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;boolean&nbsp;addAll(Collection&amp;lt;?&nbsp;extends&nbsp;E&amp;gt;&nbsp;elements);<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Checks&nbsp;if&nbsp;the&nbsp;given&nbsp;element&nbsp;&amp;lt;em&amp;gt;might&amp;lt;/em&amp;gt;&nbsp;be&nbsp;a&nbsp;member&nbsp;of&nbsp;this&nbsp;set.&nbsp;If&nbsp;this&nbsp;method&nbsp;returns&nbsp;{@code&nbsp;false},&nbsp;then<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;the&nbsp;given&nbsp;object&nbsp;is&nbsp;definitely&nbsp;not&nbsp;a&nbsp;member&nbsp;of&nbsp;the&nbsp;set.&nbsp;If&nbsp;the&nbsp;result&nbsp;is&nbsp;{@code&nbsp;true}&nbsp;then&nbsp;the&nbsp;object&nbsp;may&nbsp;or<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;may&nbsp;not&nbsp;be&nbsp;a&nbsp;member&nbsp;of&nbsp;this&nbsp;set,&nbsp;with&nbsp;a&nbsp;certain&nbsp;probability&nbsp;of&nbsp;false&nbsp;positives.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;element&nbsp;the&nbsp;element&nbsp;to&nbsp;check&nbsp;for&nbsp;membership&nbsp;in&nbsp;this&nbsp;set.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;{@code&nbsp;false}&nbsp;if&nbsp;the&nbsp;element&nbsp;is&nbsp;definitely&nbsp;not&nbsp;in&nbsp;the&nbsp;set,&nbsp;or&nbsp;{@code&nbsp;true}&nbsp;if&nbsp;it&nbsp;might&nbsp;be.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;boolean&nbsp;mightContain(E&nbsp;element);<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Gets&nbsp;a&nbsp;snapshot&nbsp;of&nbsp;the&nbsp;current&nbsp;statistics&nbsp;of&nbsp;the&nbsp;set.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;BloomFilterStatistics&nbsp;statistics();<br>
+}<br>
&lt;/ins&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterBloomFilterChainjava&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BloomFilterChain.java&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BloomFilterChain.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BloomFilterChain.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,169&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+/*<br>
+&nbsp;*&nbsp;The&nbsp;contents&nbsp;of&nbsp;this&nbsp;file&nbsp;are&nbsp;subject&nbsp;to&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;Common&nbsp;Development&nbsp;and<br>
+&nbsp;*&nbsp;Distribution&nbsp;License&nbsp;(the&nbsp;License).&nbsp;You&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the<br>
+&nbsp;*&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;You&nbsp;can&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the<br>
+&nbsp;*&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permission&nbsp;and&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;When&nbsp;distributing&nbsp;Covered&nbsp;Software,&nbsp;include&nbsp;this&nbsp;CDDL&nbsp;Header&nbsp;Notice&nbsp;in&nbsp;each&nbsp;file&nbsp;and&nbsp;include<br>
+&nbsp;*&nbsp;the&nbsp;License&nbsp;file&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;If&nbsp;applicable,&nbsp;add&nbsp;the&nbsp;following&nbsp;below&nbsp;the&nbsp;CDDL<br>
+&nbsp;*&nbsp;Header,&nbsp;with&nbsp;the&nbsp;fields&nbsp;enclosed&nbsp;by&nbsp;brackets&nbsp;[]&nbsp;replaced&nbsp;by&nbsp;your&nbsp;own&nbsp;identifying<br>
+&nbsp;*&nbsp;information:&nbsp;&amp;quot;Portions&nbsp;copyright&nbsp;[year]&nbsp;[name&nbsp;of&nbsp;copyright&nbsp;owner]&amp;quot;.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;Copyright&nbsp;2015&nbsp;ForgeRock&nbsp;AS.<br>
+&nbsp;*/<br>
+<br>
+package&nbsp;org.forgerock.bloomfilter;<br>
+<br>
+import&nbsp;static&nbsp;java.lang.Math.min;<br>
+<br>
+import&nbsp;org.forgerock.util.Reject;<br>
+import&nbsp;org.forgerock.util.time.TimeService;<br>
+<br>
+import&nbsp;javax.annotation.concurrent.ThreadSafe;<br>
+import&nbsp;java.util.ArrayDeque;<br>
+import&nbsp;java.util.ArrayList;<br>
+import&nbsp;java.util.Collection;<br>
+import&nbsp;java.util.List;<br>
+import&nbsp;java.util.ListIterator;<br>
+import&nbsp;java.util.Queue;<br>
+import&nbsp;java.util.concurrent.CopyOnWriteArrayList;<br>
+<br>
+/**<br>
+&nbsp;*&nbsp;A&nbsp;chain&nbsp;of&nbsp;bloom&nbsp;filters&nbsp;that&nbsp;together&nbsp;acts&nbsp;as&nbsp;a&nbsp;bloom&nbsp;filter.&nbsp;The&nbsp;overall&nbsp;false&nbsp;positive&nbsp;probability&nbsp;of&nbsp;the&nbsp;chain<br>
+&nbsp;*&nbsp;is&nbsp;the&nbsp;sum&nbsp;of&nbsp;the&nbsp;false&nbsp;positive&nbsp;probabilities&nbsp;of&nbsp;the&nbsp;elements&nbsp;in&nbsp;the&nbsp;chain.&nbsp;Subsequent&nbsp;filters&nbsp;(&amp;quot;buckets&amp;quot;)&nbsp;in&nbsp;the<br>
+&nbsp;*&nbsp;chain&nbsp;are&nbsp;acquired&nbsp;from&nbsp;a&nbsp;{@link&nbsp;BloomFilterPool}&nbsp;according&nbsp;to&nbsp;a&nbsp;geometric&nbsp;series,&nbsp;ensuring&nbsp;that&nbsp;the&nbsp;overall&nbsp;false<br>
+&nbsp;*&nbsp;positive&nbsp;probability&nbsp;is&nbsp;maintained,&nbsp;while&nbsp;also&nbsp;accommodating&nbsp;massive&nbsp;underestimation&nbsp;of&nbsp;required&nbsp;capacity.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;@see&nbsp;BloomFilterPool<br>
+&nbsp;*/<br>
+@ThreadSafe<br>
+final&nbsp;class&nbsp;BloomFilterChain&amp;lt;T&amp;gt;&nbsp;implements&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;final&nbsp;double&nbsp;FILL_FACTOR&nbsp;=&nbsp;0.9d;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;final&nbsp;int&nbsp;MAX_ADD_SIZE&nbsp;=&nbsp;1000;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;List&amp;lt;BloomFilter&amp;lt;T&amp;gt;&amp;gt;&nbsp;chain&nbsp;=&nbsp;new&nbsp;CopyOnWriteArrayList&amp;lt;BloomFilter&amp;lt;T&amp;gt;&amp;gt;();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;BloomFilterPool&amp;lt;T&amp;gt;&nbsp;pool;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;TimeService&nbsp;clock;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Creates&nbsp;an&nbsp;initially&nbsp;empty&nbsp;filter&nbsp;chain.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;pool&nbsp;the&nbsp;pool&nbsp;from&nbsp;which&nbsp;to&nbsp;get&nbsp;new&nbsp;Bloom&nbsp;Filters&nbsp;for&nbsp;subsequent&nbsp;elements&nbsp;in&nbsp;the&nbsp;chain.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;clock&nbsp;the&nbsp;clock&nbsp;to&nbsp;use&nbsp;for&nbsp;determining&nbsp;if&nbsp;a&nbsp;bloom&nbsp;filter&nbsp;has&nbsp;expired.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;BloomFilterChain(final&nbsp;BloomFilterPool&amp;lt;T&amp;gt;&nbsp;pool,&nbsp;final&nbsp;TimeService&nbsp;clock)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reject.ifNull(pool,&nbsp;clock);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.pool&nbsp;=&nbsp;pool;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.clock&nbsp;=&nbsp;clock;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Adds&nbsp;the&nbsp;given&nbsp;element&nbsp;to&nbsp;the&nbsp;last&nbsp;bucket&nbsp;in&nbsp;the&nbsp;filter&nbsp;chain,&nbsp;acquiring&nbsp;a&nbsp;new&nbsp;bucket&nbsp;from&nbsp;the&nbsp;pool&nbsp;if&nbsp;all<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;existing&nbsp;buckets&nbsp;are&nbsp;saturated.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;element&nbsp;the&nbsp;element&nbsp;to&nbsp;add&nbsp;to&nbsp;this&nbsp;set.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;{@code&nbsp;true}&nbsp;if&nbsp;any&nbsp;filter&nbsp;in&nbsp;the&nbsp;chain&nbsp;changed&nbsp;as&nbsp;a&nbsp;result&nbsp;of&nbsp;adding&nbsp;this&nbsp;element.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;boolean&nbsp;add(final&nbsp;T&nbsp;element)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;lastBucket().add(element);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Adds&nbsp;all&nbsp;of&nbsp;the&nbsp;given&nbsp;elements&nbsp;to&nbsp;the&nbsp;last&nbsp;bucket&nbsp;in&nbsp;the&nbsp;chain,&nbsp;spilling&nbsp;over&nbsp;to&nbsp;new&nbsp;buckets&nbsp;as&nbsp;required&nbsp;to<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;maintain&nbsp;the&nbsp;correct&nbsp;false&nbsp;positive&nbsp;probability.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;elements&nbsp;the&nbsp;elements&nbsp;to&nbsp;add&nbsp;to&nbsp;the&nbsp;set.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;{@code&nbsp;true}&nbsp;if&nbsp;any&nbsp;element&nbsp;in&nbsp;the&nbsp;collection&nbsp;caused&nbsp;the&nbsp;filter&nbsp;chain&nbsp;to&nbsp;change.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;boolean&nbsp;addAll(final&nbsp;Collection&amp;lt;?&nbsp;extends&nbsp;T&amp;gt;&nbsp;elements)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boolean&nbsp;changed&nbsp;=&nbsp;false;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;List&amp;lt;T&amp;gt;&nbsp;queue&nbsp;=&nbsp;new&nbsp;ArrayList&amp;lt;T&amp;gt;(elements);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;i&nbsp;=&nbsp;0,&nbsp;size&nbsp;=&nbsp;queue.size();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(i&nbsp;&amp;lt;&nbsp;size)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;bucket&nbsp;=&nbsp;lastBucket();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;long&nbsp;remainingCapacity&nbsp;=<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;min((long)&nbsp;(bucket.statistics().getEstimatedRemainingCapacity()&nbsp;*&nbsp;FILL_FACTOR),&nbsp;MAX_ADD_SIZE);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;int&nbsp;batchSize&nbsp;=&nbsp;min(size&nbsp;-&nbsp;i,&nbsp;(int)&nbsp;remainingCapacity);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;List&amp;lt;T&amp;gt;&nbsp;batch&nbsp;=&nbsp;(i&nbsp;==&nbsp;0&nbsp;&amp;amp;&amp;amp;&nbsp;batchSize&nbsp;==&nbsp;size)&nbsp;?&nbsp;queue&nbsp;:&nbsp;queue.subList(i,&nbsp;i&nbsp;+&nbsp;batchSize);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;changed&nbsp;|=&nbsp;bucket.addAll(batch);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;i&nbsp;+=&nbsp;batchSize;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;changed;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;boolean&nbsp;mightContain(final&nbsp;T&nbsp;element)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(BloomFilter&amp;lt;T&amp;gt;&nbsp;bucket&nbsp;:&nbsp;chain)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(bucket.mightContain(element))&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;BloomFilterStatistics&nbsp;statistics()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double&nbsp;configuredFpp&nbsp;=&nbsp;0.0d;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double&nbsp;expectedFpp&nbsp;=&nbsp;0.0d;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;capacity&nbsp;=&nbsp;0L;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;bitSize&nbsp;=&nbsp;0L;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;lastExpiryTime&nbsp;=&nbsp;Long.MIN_VALUE;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;remainingCapacity&nbsp;=&nbsp;0L;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(BloomFilter&amp;lt;T&amp;gt;&nbsp;bucket&nbsp;:&nbsp;chain)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;BloomFilterStatistics&nbsp;bucketStats&nbsp;=&nbsp;bucket.statistics();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;configuredFpp&nbsp;+=&nbsp;bucketStats.getConfiguredFalsePositiveProbability();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expectedFpp&nbsp;+=&nbsp;bucketStats.getExpectedFalsePositiveProbability();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;capacity&nbsp;+=&nbsp;bucketStats.getCapacity();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bitSize&nbsp;+=&nbsp;bucketStats.getBitSize();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastExpiryTime&nbsp;=&nbsp;Math.max(lastExpiryTime,&nbsp;bucketStats.getExpiryTime());<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Only&nbsp;the&nbsp;last&nbsp;bucket&nbsp;is&nbsp;relevant&nbsp;to&nbsp;remaining&nbsp;capacity&nbsp;as&nbsp;we&nbsp;never&nbsp;insert&nbsp;into&nbsp;previous&nbsp;ones<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;remainingCapacity&nbsp;=&nbsp;bucketStats.getEstimatedRemainingCapacity();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;BloomFilterStatistics(configuredFpp,&nbsp;expectedFpp,&nbsp;capacity,&nbsp;bitSize,&nbsp;lastExpiryTime,&nbsp;remainingCapacity);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;lastBucket()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;lastBucket&nbsp;=&nbsp;null;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ListIterator&amp;lt;BloomFilter&amp;lt;T&amp;gt;&amp;gt;&nbsp;it&nbsp;=&nbsp;chain.listIterator(chain.size());<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(it.hasPrevious())&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastBucket&nbsp;=&nbsp;it.previous();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(lastBucket&nbsp;==&nbsp;null&nbsp;||&nbsp;lastBucket.statistics().isSaturated())&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Synchronize&nbsp;to&nbsp;ensure&nbsp;atomicity&nbsp;(double-checked&nbsp;locking).&nbsp;Chain.listIterator().previous()&nbsp;is&nbsp;volatile<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;read.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;synchronized&nbsp;(chain)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastBucket&nbsp;=&nbsp;null;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;it&nbsp;=&nbsp;chain.listIterator(chain.size());<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;while&nbsp;(it.hasPrevious())&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastBucket&nbsp;=&nbsp;it.previous();<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;BloomFilterStatistics&nbsp;statistics&nbsp;=&nbsp;lastBucket.statistics();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(statistics.isSaturated()&nbsp;&amp;amp;&amp;amp;&nbsp;statistics.getExpiryTime()&nbsp;&amp;lt;&nbsp;clock.now())&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;it.remove()&nbsp;is&nbsp;unsupported&nbsp;operation&nbsp;for&nbsp;CoWAL:<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(chain.remove(lastBucket))&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pool.release(lastBucket);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastBucket&nbsp;=&nbsp;null;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;else&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;break;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(lastBucket&nbsp;==&nbsp;null&nbsp;||&nbsp;lastBucket.statistics().isSaturated())&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;lastBucket&nbsp;=&nbsp;pool.nextAvailable();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;chain.add(lastBucket);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;lastBucket;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;toString()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&amp;quot;BloomFilterChain{size=&amp;quot;&nbsp;+&nbsp;chain.size()&nbsp;+&nbsp;'}';<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+}<br>
&lt;/ins&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterBloomFilterFactoryjava&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BloomFilterFactory.java&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BloomFilterFactory.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BloomFilterFactory.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,24&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+/*<br>
+&nbsp;*&nbsp;The&nbsp;contents&nbsp;of&nbsp;this&nbsp;file&nbsp;are&nbsp;subject&nbsp;to&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;Common&nbsp;Development&nbsp;and<br>
+&nbsp;*&nbsp;Distribution&nbsp;License&nbsp;(the&nbsp;License).&nbsp;You&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the<br>
+&nbsp;*&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;You&nbsp;can&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the<br>
+&nbsp;*&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permission&nbsp;and&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;When&nbsp;distributing&nbsp;Covered&nbsp;Software,&nbsp;include&nbsp;this&nbsp;CDDL&nbsp;Header&nbsp;Notice&nbsp;in&nbsp;each&nbsp;file&nbsp;and&nbsp;include<br>
+&nbsp;*&nbsp;the&nbsp;License&nbsp;file&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;If&nbsp;applicable,&nbsp;add&nbsp;the&nbsp;following&nbsp;below&nbsp;the&nbsp;CDDL<br>
+&nbsp;*&nbsp;Header,&nbsp;with&nbsp;the&nbsp;fields&nbsp;enclosed&nbsp;by&nbsp;brackets&nbsp;[]&nbsp;replaced&nbsp;by&nbsp;your&nbsp;own&nbsp;identifying<br>
+&nbsp;*&nbsp;information:&nbsp;&amp;quot;Portions&nbsp;copyright&nbsp;[year]&nbsp;[name&nbsp;of&nbsp;copyright&nbsp;owner]&amp;quot;.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;Copyright&nbsp;2015&nbsp;ForgeRock&nbsp;AS.<br>
+&nbsp;*/<br>
+<br>
+package&nbsp;org.forgerock.bloomfilter;<br>
+<br>
+/**<br>
+&nbsp;*&nbsp;Created&nbsp;by&nbsp;neilmadden&nbsp;on&nbsp;22/02/15.<br>
+&nbsp;*/<br>
+public&nbsp;interface&nbsp;BloomFilterFactory&amp;lt;T&amp;gt;&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;create(long&nbsp;expectedInsertions,&nbsp;double&nbsp;falsePositiveProbability);<br>
+}<br>
&lt;/ins&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterBloomFilterPooljava&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BloomFilterPool.java&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BloomFilterPool.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BloomFilterPool.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,158&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+/*<br>
+&nbsp;*&nbsp;The&nbsp;contents&nbsp;of&nbsp;this&nbsp;file&nbsp;are&nbsp;subject&nbsp;to&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;Common&nbsp;Development&nbsp;and<br>
+&nbsp;*&nbsp;Distribution&nbsp;License&nbsp;(the&nbsp;License).&nbsp;You&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the<br>
+&nbsp;*&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;You&nbsp;can&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the<br>
+&nbsp;*&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permission&nbsp;and&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;When&nbsp;distributing&nbsp;Covered&nbsp;Software,&nbsp;include&nbsp;this&nbsp;CDDL&nbsp;Header&nbsp;Notice&nbsp;in&nbsp;each&nbsp;file&nbsp;and&nbsp;include<br>
+&nbsp;*&nbsp;the&nbsp;License&nbsp;file&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;If&nbsp;applicable,&nbsp;add&nbsp;the&nbsp;following&nbsp;below&nbsp;the&nbsp;CDDL<br>
+&nbsp;*&nbsp;Header,&nbsp;with&nbsp;the&nbsp;fields&nbsp;enclosed&nbsp;by&nbsp;brackets&nbsp;[]&nbsp;replaced&nbsp;by&nbsp;your&nbsp;own&nbsp;identifying<br>
+&nbsp;*&nbsp;information:&nbsp;&amp;quot;Portions&nbsp;copyright&nbsp;[year]&nbsp;[name&nbsp;of&nbsp;copyright&nbsp;owner]&amp;quot;.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;Copyright&nbsp;2015&nbsp;ForgeRock&nbsp;AS.<br>
+&nbsp;*/<br>
+<br>
+package&nbsp;org.forgerock.bloomfilter;<br>
+<br>
+import&nbsp;static&nbsp;java.lang.Math.pow;<br>
+import&nbsp;static&nbsp;java.util.Collections.synchronizedMap;<br>
+<br>
+import&nbsp;org.forgerock.util.Reject;<br>
+<br>
+import&nbsp;javax.annotation.concurrent.ThreadSafe;<br>
+import&nbsp;java.util.BitSet;<br>
+import&nbsp;java.util.IdentityHashMap;<br>
+import&nbsp;java.util.Map;<br>
+import&nbsp;java.util.TreeSet;<br>
+<br>
+/**<br>
+&nbsp;*&nbsp;Maintains&nbsp;a&nbsp;pool&nbsp;of&nbsp;available&nbsp;bloom&nbsp;filters&nbsp;whose&nbsp;capacities&nbsp;and&nbsp;false&nbsp;positive&nbsp;probabilities&nbsp;are&nbsp;adjusted<br>
+&nbsp;*&nbsp;according&nbsp;to&nbsp;some&nbsp;geometric&nbsp;series.&nbsp;This&nbsp;ensures&nbsp;that&nbsp;a&nbsp;{@link&nbsp;BloomFilterChain}&nbsp;built&nbsp;from&nbsp;elements&nbsp;from&nbsp;this<br>
+&nbsp;*&nbsp;pool&nbsp;will&nbsp;never&nbsp;exceed&nbsp;the&nbsp;desired&nbsp;overall&nbsp;false&nbsp;positive&nbsp;probability,&nbsp;while&nbsp;also&nbsp;ensuring&nbsp;that&nbsp;the&nbsp;capacity&nbsp;of<br>
+&nbsp;*&nbsp;each&nbsp;subsequent&nbsp;bloom&nbsp;filter&nbsp;is&nbsp;increased&nbsp;to&nbsp;avoid&nbsp;creating&nbsp;long&nbsp;chains&nbsp;in&nbsp;cases&nbsp;where&nbsp;the&nbsp;required&nbsp;capacity&nbsp;has<br>
+&nbsp;*&nbsp;been&nbsp;underestimated&nbsp;by&nbsp;orders&nbsp;of&nbsp;magnitude.<br>
+&nbsp;*&nbsp;&amp;lt;p/&amp;gt;<br>
+&nbsp;*&nbsp;A&nbsp;pool&nbsp;of&nbsp;entries&nbsp;is&nbsp;maintained&nbsp;rather&nbsp;than&nbsp;a&nbsp;simple&nbsp;counter&nbsp;to&nbsp;allow&nbsp;for&nbsp;rolling&nbsp;bloom&nbsp;filter&nbsp;chains,&nbsp;in&nbsp;which<br>
+&nbsp;*&nbsp;older&nbsp;filters&nbsp;in&nbsp;the&nbsp;chain&nbsp;may&nbsp;expire.&nbsp;By&nbsp;re-using&nbsp;the&nbsp;element&nbsp;in&nbsp;the&nbsp;series&nbsp;at&nbsp;that&nbsp;point,&nbsp;we&nbsp;avoid&nbsp;creating<br>
+&nbsp;*&nbsp;excessively&nbsp;large&nbsp;filters&nbsp;unnecessarily.<br>
+&nbsp;*&nbsp;&amp;lt;p/&amp;gt;<br>
+&nbsp;*&nbsp;As&nbsp;an&nbsp;implementation&nbsp;detail,&nbsp;the&nbsp;current&nbsp;implementation&nbsp;only&nbsp;pools&nbsp;the&nbsp;natural&nbsp;numbers&nbsp;representing&nbsp;elements&nbsp;in<br>
+&nbsp;*&nbsp;the&nbsp;geometric&nbsp;series.&nbsp;The&nbsp;Bloom&nbsp;Filters&nbsp;themselves&nbsp;are&nbsp;created&nbsp;on-demand,&nbsp;with&nbsp;parameters&nbsp;according&nbsp;to&nbsp;the&nbsp;following<br>
+&nbsp;*&nbsp;formulae.&nbsp;To&nbsp;create&nbsp;the&nbsp;&amp;lt;em&amp;gt;i&amp;lt;/em&amp;gt;th&nbsp;element&nbsp;in&nbsp;the&nbsp;series&nbsp;we&nbsp;use:<br>
+&nbsp;*&nbsp;&amp;lt;pre&amp;gt;<br>
+&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;capacity(i)&nbsp;=&nbsp;initialCapacity&nbsp;*&nbsp;capacityGrowthFactor^i<br>
+&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;fpp(i)&nbsp;=&nbsp;initialFalsePositiveProbability&nbsp;*&nbsp;fppScaleFactor^i<br>
+&nbsp;*&nbsp;&amp;lt;/pre&amp;gt;<br>
+&nbsp;*&nbsp;Where&nbsp;the&nbsp;initialFalsePositiveProbability&nbsp;is&nbsp;given&nbsp;by&nbsp;&amp;lt;code&amp;gt;overallFalsePositiveProbability&nbsp;*<br>
+&nbsp;*&nbsp;(1-fppScaleFactor)&amp;lt;/code&amp;gt;<br>
+&nbsp;*&nbsp;&amp;lt;p/&amp;gt;<br>
+&nbsp;*&nbsp;The&nbsp;strategy&nbsp;used&nbsp;here&nbsp;is&nbsp;described&nbsp;in&nbsp;detail&nbsp;in&nbsp;the&nbsp;paper&nbsp;&amp;lt;a<br>
+&nbsp;*&nbsp;href=&amp;quot;http://www.sciencedirect.com/science/article/pii/S0020019006003127&amp;quot;&amp;gt;Scalable&nbsp;Bloom&nbsp;Filters&amp;lt;/a&amp;gt;&nbsp;by&nbsp;Almeida&nbsp;et<br>
+&nbsp;*&nbsp;al.,&nbsp;&amp;lt;em&amp;gt;Information&nbsp;Processing&nbsp;Letters&amp;lt;/em&amp;gt;,&nbsp;101(6),&nbsp;p.255&amp;amp;ndash;261,&nbsp;2007.&nbsp;We&nbsp;add&nbsp;the&nbsp;ability&nbsp;to&nbsp;remove&nbsp;buckets<br>
+&nbsp;*&nbsp;from&nbsp;the&nbsp;chain&nbsp;and&nbsp;later&nbsp;reuse&nbsp;them,&nbsp;resulting&nbsp;in&nbsp;what&nbsp;we&nbsp;call&nbsp;&amp;lt;em&amp;gt;Rolling&nbsp;Bloom&nbsp;Filters&amp;lt;/em&amp;gt;.<br>
+&nbsp;*/<br>
+@ThreadSafe<br>
+final&nbsp;class&nbsp;BloomFilterPool&amp;lt;T&amp;gt;&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;BloomFilterFactory&amp;lt;T&amp;gt;&nbsp;factory;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;BitSet&nbsp;bucketNumbers;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;int&nbsp;maxBuckets;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;long&nbsp;initialCapacity;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;double&nbsp;capacityGrowthFactor;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;double&nbsp;initialFalsePositiveProbability;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;double&nbsp;falsePositiveProbabilityScaleFactor;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;Map&amp;lt;BloomFilter&amp;lt;T&amp;gt;,&nbsp;Integer&amp;gt;&nbsp;takenBucketNumbers;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Constructs&nbsp;the&nbsp;pool&nbsp;with&nbsp;the&nbsp;given&nbsp;parameters.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;factory&nbsp;the&nbsp;factory&nbsp;to&nbsp;use&nbsp;to&nbsp;create&nbsp;new&nbsp;buckets.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;maxBuckets&nbsp;the&nbsp;maximum&nbsp;number&nbsp;of&nbsp;buckets&nbsp;in&nbsp;the&nbsp;chain.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;initialCapacity&nbsp;the&nbsp;initial&nbsp;capacity&nbsp;of&nbsp;the&nbsp;first&nbsp;bucket&nbsp;in&nbsp;the&nbsp;chain.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;capacityGrowthFactor&nbsp;the&nbsp;factor&nbsp;by&nbsp;which&nbsp;to&nbsp;increase&nbsp;the&nbsp;capacity&nbsp;of&nbsp;subsequent&nbsp;buckets&nbsp;in&nbsp;the&nbsp;chain.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;overallFalsePositiveProbability&nbsp;the&nbsp;overall&nbsp;false&nbsp;positive&nbsp;probability&nbsp;to&nbsp;maintain&nbsp;for&nbsp;the&nbsp;entire&nbsp;chain.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;falsePositiveProbabilityScaleFactor&nbsp;the&nbsp;factor&nbsp;by&nbsp;which&nbsp;to&nbsp;scale&nbsp;false&nbsp;positive&nbsp;probability&nbsp;on&nbsp;each<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subsequent&nbsp;bucket&nbsp;in&nbsp;the&nbsp;chain&nbsp;(must&nbsp;be&nbsp;&amp;amp;gt;0&nbsp;and&nbsp;&amp;amp;lt;1).<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;BloomFilterPool(final&nbsp;BloomFilterFactory&amp;lt;T&amp;gt;&nbsp;factory,&nbsp;final&nbsp;int&nbsp;maxBuckets,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;long&nbsp;initialCapacity,&nbsp;final&nbsp;double&nbsp;capacityGrowthFactor,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;double&nbsp;overallFalsePositiveProbability,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;double&nbsp;falsePositiveProbabilityScaleFactor)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reject.ifFalse(maxBuckets&nbsp;&amp;gt;&nbsp;0,&nbsp;&amp;quot;Max&nbsp;#&nbsp;buckets&nbsp;must&nbsp;be&nbsp;&amp;gt;&nbsp;0&amp;quot;);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reject.ifNull(factory);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reject.ifFalse(initialCapacity&nbsp;&amp;gt;&nbsp;0L,&nbsp;&amp;quot;Capacity&nbsp;must&nbsp;be&nbsp;&amp;gt;&nbsp;0&amp;quot;);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reject.ifFalse(capacityGrowthFactor&nbsp;&amp;gt;&nbsp;0.0d,&nbsp;&amp;quot;Capacity&nbsp;growth&nbsp;factor&nbsp;must&nbsp;be&nbsp;&amp;gt;&nbsp;0&amp;quot;);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reject.ifFalse(overallFalsePositiveProbability&nbsp;&amp;gt;&nbsp;0.0d&nbsp;&amp;amp;&amp;amp;&nbsp;overallFalsePositiveProbability&nbsp;&amp;lt;&nbsp;1.0d,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;Overall&nbsp;false&nbsp;positive&nbsp;probability&nbsp;must&nbsp;be&nbsp;&amp;gt;&nbsp;0&nbsp;and&nbsp;&amp;lt;&nbsp;1&amp;quot;);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reject.ifFalse(falsePositiveProbabilityScaleFactor&nbsp;&amp;gt;&nbsp;0.0d&nbsp;&amp;amp;&amp;amp;&nbsp;falsePositiveProbabilityScaleFactor&nbsp;&amp;lt;&nbsp;1.0d,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;False&nbsp;positive&nbsp;probability&nbsp;scale&nbsp;factor&nbsp;must&nbsp;be&nbsp;&amp;gt;&nbsp;0&nbsp;and&nbsp;&amp;lt;&nbsp;1&amp;quot;);<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.factory&nbsp;=&nbsp;factory;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.maxBuckets&nbsp;=&nbsp;maxBuckets;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.bucketNumbers&nbsp;=&nbsp;new&nbsp;BitSet(maxBuckets);<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.initialCapacity&nbsp;=&nbsp;initialCapacity;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.capacityGrowthFactor&nbsp;=&nbsp;capacityGrowthFactor;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.initialFalsePositiveProbability&nbsp;=<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;overallFalsePositiveProbability&nbsp;*&nbsp;(1.0d&nbsp;-&nbsp;falsePositiveProbabilityScaleFactor);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.falsePositiveProbabilityScaleFactor&nbsp;=&nbsp;falsePositiveProbabilityScaleFactor;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.takenBucketNumbers&nbsp;=&nbsp;synchronizedMap(new&nbsp;IdentityHashMap&amp;lt;BloomFilter&amp;lt;T&amp;gt;,&nbsp;Integer&amp;gt;(maxBuckets));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Returns&nbsp;the&nbsp;next&nbsp;available&nbsp;BloomFilter&nbsp;from&nbsp;the&nbsp;pool.&nbsp;Subsequent&nbsp;calls&nbsp;will&nbsp;yield&nbsp;progressively&nbsp;larger&nbsp;and<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;more&nbsp;accurate&nbsp;bloom&nbsp;filters&nbsp;according&nbsp;to&nbsp;the&nbsp;geometric&nbsp;series&nbsp;defined&nbsp;by&nbsp;the&nbsp;pool&nbsp;parameters,&nbsp;until&nbsp;bloom<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;filters&nbsp;are&nbsp;released.&nbsp;Once&nbsp;filters&nbsp;have&nbsp;been&nbsp;released&nbsp;back&nbsp;to&nbsp;the&nbsp;pool,&nbsp;then&nbsp;the&nbsp;pool&nbsp;will&nbsp;reuse&nbsp;the&nbsp;capacity<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;and&nbsp;false&nbsp;positive&nbsp;probability&nbsp;of&nbsp;the&nbsp;released&nbsp;pool&nbsp;in&nbsp;preference&nbsp;to&nbsp;any&nbsp;higher&nbsp;values.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;the&nbsp;next&nbsp;available&nbsp;bloom&nbsp;filter&nbsp;according&nbsp;to&nbsp;the&nbsp;geometric&nbsp;series.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@throws&nbsp;IllegalStateException&nbsp;if&nbsp;the&nbsp;maximum&nbsp;number&nbsp;of&nbsp;buckets&nbsp;has&nbsp;been&nbsp;exceeded.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;nextAvailable()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;int&nbsp;bucketNumber;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;synchronized&nbsp;(bucketNumbers)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bucketNumber&nbsp;=&nbsp;bucketNumbers.nextClearBit(0);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(bucketNumber&nbsp;&amp;gt;=&nbsp;maxBuckets)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;IllegalStateException(&amp;quot;Maximum&nbsp;number&nbsp;of&nbsp;buckets&nbsp;exceeded:&nbsp;&amp;quot;&nbsp;+&nbsp;maxBuckets);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bucketNumbers.set(bucketNumber);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;long&nbsp;capacity&nbsp;=&nbsp;(long)&nbsp;(initialCapacity&nbsp;*&nbsp;pow(capacityGrowthFactor,&nbsp;bucketNumber));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;double&nbsp;fpp&nbsp;=<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;initialFalsePositiveProbability&nbsp;*&nbsp;pow(falsePositiveProbabilityScaleFactor,&nbsp;bucketNumber);<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;bucket&nbsp;=&nbsp;factory.create(capacity,&nbsp;fpp);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;takenBucketNumbers.put(bucket,&nbsp;bucketNumber);<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;bucket;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Releases&nbsp;a&nbsp;Bloom&nbsp;Filter&nbsp;back&nbsp;into&nbsp;the&nbsp;pool.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;released&nbsp;the&nbsp;bloom&nbsp;filter&nbsp;to&nbsp;release&nbsp;back&nbsp;to&nbsp;the&nbsp;pool.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;release(BloomFilter&amp;lt;T&amp;gt;&nbsp;released)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;int&nbsp;bucketNumber&nbsp;=&nbsp;takenBucketNumbers.get(released);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;synchronized&nbsp;(bucketNumbers)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bucketNumbers.clear(bucketNumber);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;toString()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&amp;quot;BloomFilterPool{&amp;quot;&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;maxBuckets=&amp;quot;&nbsp;+&nbsp;maxBuckets&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;,&nbsp;initialCapacity=&amp;quot;&nbsp;+&nbsp;initialCapacity&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;,&nbsp;capacityGrowthFactor=&amp;quot;&nbsp;+&nbsp;capacityGrowthFactor&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;,&nbsp;initialFalsePositiveProbability=&amp;quot;&nbsp;+&nbsp;initialFalsePositiveProbability&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;,&nbsp;falsePositiveProbabilityScaleFactor=&amp;quot;&nbsp;+&nbsp;falsePositiveProbabilityScaleFactor&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;,&nbsp;takenBucketNumbers=&amp;quot;&nbsp;+&nbsp;new&nbsp;TreeSet&amp;lt;Integer&amp;gt;(takenBucketNumbers.values())&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'}';<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+}<br>
&lt;/ins&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterBloomFilterStatisticsjava&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BloomFilterStatistics.java&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BloomFilterStatistics.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BloomFilterStatistics.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,201&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+/*<br>
+&nbsp;*&nbsp;The&nbsp;contents&nbsp;of&nbsp;this&nbsp;file&nbsp;are&nbsp;subject&nbsp;to&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;Common&nbsp;Development&nbsp;and<br>
+&nbsp;*&nbsp;Distribution&nbsp;License&nbsp;(the&nbsp;License).&nbsp;You&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the<br>
+&nbsp;*&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;You&nbsp;can&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the<br>
+&nbsp;*&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permission&nbsp;and&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;When&nbsp;distributing&nbsp;Covered&nbsp;Software,&nbsp;include&nbsp;this&nbsp;CDDL&nbsp;Header&nbsp;Notice&nbsp;in&nbsp;each&nbsp;file&nbsp;and&nbsp;include<br>
+&nbsp;*&nbsp;the&nbsp;License&nbsp;file&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;If&nbsp;applicable,&nbsp;add&nbsp;the&nbsp;following&nbsp;below&nbsp;the&nbsp;CDDL<br>
+&nbsp;*&nbsp;Header,&nbsp;with&nbsp;the&nbsp;fields&nbsp;enclosed&nbsp;by&nbsp;brackets&nbsp;[]&nbsp;replaced&nbsp;by&nbsp;your&nbsp;own&nbsp;identifying<br>
+&nbsp;*&nbsp;information:&nbsp;&amp;quot;Portions&nbsp;copyright&nbsp;[year]&nbsp;[name&nbsp;of&nbsp;copyright&nbsp;owner]&amp;quot;.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;Copyright&nbsp;2015&nbsp;ForgeRock&nbsp;AS.<br>
+&nbsp;*/<br>
+<br>
+package&nbsp;org.forgerock.bloomfilter;<br>
+<br>
+import&nbsp;javax.annotation.concurrent.Immutable;<br>
+import&nbsp;java.beans.ConstructorProperties;<br>
+import&nbsp;java.util.Date;<br>
+<br>
+/**<br>
+&nbsp;*&nbsp;Provides&nbsp;a&nbsp;snapshot&nbsp;of&nbsp;the&nbsp;current&nbsp;statistics&nbsp;and&nbsp;configuration&nbsp;of&nbsp;a&nbsp;Bloom&nbsp;Filter&nbsp;implementation.<br>
+&nbsp;*/<br>
+@Immutable<br>
+public&nbsp;final&nbsp;class&nbsp;BloomFilterStatistics&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;double&nbsp;configuredFalsePositiveProbability;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;double&nbsp;expectedFalsePositiveProbability;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;long&nbsp;capacity;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;long&nbsp;bitSize;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;long&nbsp;expiryTime;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;long&nbsp;estimatedRemainingCapacity;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Constructs&nbsp;a&nbsp;statistics&nbsp;object&nbsp;with&nbsp;the&nbsp;given&nbsp;parameters.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;configuredFalsePositiveProbability&nbsp;the&nbsp;false&nbsp;positive&nbsp;probability&nbsp;that&nbsp;was&nbsp;configured&nbsp;for&nbsp;this&nbsp;set.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;expectedFalsePositiveProbability&nbsp;the&nbsp;expected&nbsp;false&nbsp;positive&nbsp;probability&nbsp;given&nbsp;the&nbsp;current&nbsp;state&nbsp;of&nbsp;the<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;set.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;capacity&nbsp;the&nbsp;expected&nbsp;total&nbsp;number&nbsp;of&nbsp;insertions&nbsp;into&nbsp;the&nbsp;set&nbsp;before&nbsp;it&nbsp;becomes&nbsp;saturated<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(exceeds&nbsp;the&nbsp;configured&nbsp;false&nbsp;positive&nbsp;probability).<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;bitSize&nbsp;the&nbsp;total&nbsp;memory&nbsp;size&nbsp;of&nbsp;the&nbsp;set&nbsp;in&nbsp;bits.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@ConstructorProperties({&amp;quot;configuredFalsePositiveProbability&amp;quot;,&nbsp;&amp;quot;expectedFalsePositiveProbability&amp;quot;,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;capacity&amp;quot;,&nbsp;&amp;quot;bitSize&amp;quot;,&nbsp;&amp;quot;expiryTime&amp;quot;,&nbsp;&amp;quot;estimatedRemainingCapacity&amp;quot;})<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;BloomFilterStatistics(final&nbsp;double&nbsp;configuredFalsePositiveProbability,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;double&nbsp;expectedFalsePositiveProbability,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;long&nbsp;capacity,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;long&nbsp;bitSize,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;long&nbsp;expiryTime,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;long&nbsp;estimatedRemainingCapacity)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.configuredFalsePositiveProbability&nbsp;=&nbsp;configuredFalsePositiveProbability;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expectedFalsePositiveProbability&nbsp;=&nbsp;expectedFalsePositiveProbability;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.capacity&nbsp;=&nbsp;capacity;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.bitSize&nbsp;=&nbsp;bitSize;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expiryTime&nbsp;=&nbsp;expiryTime;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.estimatedRemainingCapacity&nbsp;=&nbsp;estimatedRemainingCapacity;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;configured&nbsp;probability&nbsp;of&nbsp;false&nbsp;positives.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;the&nbsp;false&nbsp;positive&nbsp;probability&nbsp;(FPP)&nbsp;between&nbsp;0&nbsp;and&nbsp;1.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;double&nbsp;getConfiguredFalsePositiveProbability()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;configuredFalsePositiveProbability;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;expected&nbsp;probability&nbsp;of&nbsp;false&nbsp;positives&nbsp;given&nbsp;the&nbsp;current&nbsp;state&nbsp;of&nbsp;the&nbsp;set.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;the&nbsp;expected&nbsp;false&nbsp;positive&nbsp;probability&nbsp;(FPP)&nbsp;between&nbsp;0&nbsp;and&nbsp;1.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;double&nbsp;getExpectedFalsePositiveProbability()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;expectedFalsePositiveProbability;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;capacity&nbsp;of&nbsp;the&nbsp;set.&nbsp;This&nbsp;is&nbsp;the&nbsp;expected&nbsp;total&nbsp;number&nbsp;of&nbsp;elements&nbsp;that&nbsp;can&nbsp;be&nbsp;inserted&nbsp;into&nbsp;the<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;set&nbsp;before&nbsp;it&nbsp;exceeds&nbsp;the&nbsp;configured&nbsp;false&nbsp;positive&nbsp;probability.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;the&nbsp;expected&nbsp;capacity&nbsp;of&nbsp;the&nbsp;set.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;long&nbsp;getCapacity()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;capacity;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;total&nbsp;memory&nbsp;size&nbsp;of&nbsp;the&nbsp;set,&nbsp;in&nbsp;bits.&nbsp;This&nbsp;size&nbsp;is&nbsp;a&nbsp;guide&nbsp;to&nbsp;the&nbsp;memory&nbsp;used&nbsp;for&nbsp;storing&nbsp;the&nbsp;actual<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;elements&nbsp;of&nbsp;the&nbsp;set,&nbsp;and&nbsp;may&nbsp;not&nbsp;reflect&nbsp;fixed-cost&nbsp;overheads&nbsp;such&nbsp;as&nbsp;the&nbsp;size&nbsp;of&nbsp;object&nbsp;headers,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;configuration&nbsp;options,&nbsp;etc.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;the&nbsp;total&nbsp;memory&nbsp;size&nbsp;of&nbsp;the&nbsp;set&nbsp;in&nbsp;bits.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;long&nbsp;getBitSize()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;bitSize;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Calculates&nbsp;the&nbsp;optimum&nbsp;size&nbsp;of&nbsp;a&nbsp;bloom&nbsp;filter&nbsp;(in&nbsp;bits)&nbsp;to&nbsp;achieve&nbsp;the&nbsp;given&nbsp;false&nbsp;positive&nbsp;probability&nbsp;and<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;expected&nbsp;number&nbsp;of&nbsp;insertions&nbsp;(capacity).<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;capacity&nbsp;the&nbsp;expected&nbsp;number&nbsp;of&nbsp;insertions&nbsp;into&nbsp;the&nbsp;bloom&nbsp;filter.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;falsePositiveProbability&nbsp;the&nbsp;desired&nbsp;probability&nbsp;of&nbsp;false&nbsp;positives.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;the&nbsp;optimum&nbsp;number&nbsp;of&nbsp;bits&nbsp;to&nbsp;use&nbsp;for&nbsp;the&nbsp;bloom&nbsp;filter.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;long&nbsp;optimumBitSize(final&nbsp;long&nbsp;capacity,&nbsp;final&nbsp;double&nbsp;falsePositiveProbability)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(long)((double)(-capacity)&nbsp;*&nbsp;Math.log(falsePositiveProbability)&nbsp;/&nbsp;(Math.log(2.0D)&nbsp;*&nbsp;Math.log(2.0D)));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Provides&nbsp;an&nbsp;estimate&nbsp;of&nbsp;the&nbsp;remaining&nbsp;capacity&nbsp;in&nbsp;this&nbsp;bloom&nbsp;filter&nbsp;before&nbsp;it&nbsp;would&nbsp;become&nbsp;saturated.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;long&nbsp;getEstimatedRemainingCapacity()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;estimatedRemainingCapacity;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Estimates&nbsp;the&nbsp;remaining&nbsp;capacity&nbsp;in&nbsp;an&nbsp;optimum&nbsp;Bloom&nbsp;Filter.&nbsp;This&nbsp;is<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;assuming&nbsp;that&nbsp;the&nbsp;Bloom&nbsp;Filter&nbsp;is&nbsp;close&nbsp;to&nbsp;optimal&nbsp;in&nbsp;space&nbsp;efficiency&nbsp;for&nbsp;the&nbsp;configured&nbsp;false&nbsp;positive<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;probability.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;bitSize&nbsp;the&nbsp;size&nbsp;of&nbsp;the&nbsp;Bloom&nbsp;Filter&nbsp;bit-vector&nbsp;in&nbsp;bits.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;configuredFalsePositiveProbability&nbsp;the&nbsp;configured&nbsp;false&nbsp;positive&nbsp;probability&nbsp;of&nbsp;the&nbsp;bloom&nbsp;filter.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;expectedFalsePositiveProbability&nbsp;the&nbsp;expected&nbsp;current&nbsp;false&nbsp;positive&nbsp;probability&nbsp;of&nbsp;the&nbsp;bloom&nbsp;filter.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;an&nbsp;estimate&nbsp;of&nbsp;the&nbsp;number&nbsp;of&nbsp;elements&nbsp;that&nbsp;could&nbsp;be&nbsp;inserted&nbsp;before&nbsp;the&nbsp;bloom&nbsp;filter&nbsp;becomes&nbsp;saturated.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;long&nbsp;optimumRemainingCapacity(final&nbsp;long&nbsp;bitSize,&nbsp;final&nbsp;double&nbsp;configuredFalsePositiveProbability,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;double&nbsp;expectedFalsePositiveProbability)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(long)(-(bitSize&nbsp;*&nbsp;Math.log(2.0D)&nbsp;*&nbsp;Math.log(2.0D))&nbsp;/&nbsp;Math.log(configuredFalsePositiveProbability&nbsp;-<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expectedFalsePositiveProbability));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;time&nbsp;in&nbsp;milliseconds&nbsp;since&nbsp;the&nbsp;UTC&nbsp;epoch&nbsp;until&nbsp;the&nbsp;last&nbsp;element&nbsp;contained&nbsp;in&nbsp;this&nbsp;bloom&nbsp;filter&nbsp;expires.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;This&nbsp;statistic&nbsp;is&nbsp;only&nbsp;relevant&nbsp;to&nbsp;expiring&nbsp;or&nbsp;rolling&nbsp;bloom&nbsp;filter&nbsp;implementations.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;the&nbsp;latest&nbsp;expiry&nbsp;time&nbsp;in&nbsp;milliseconds&nbsp;from&nbsp;the&nbsp;UTC&nbsp;epoch.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;long&nbsp;getExpiryTime()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;expiryTime;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Determines&nbsp;whether&nbsp;the&nbsp;bloom&nbsp;filter&nbsp;expected&nbsp;false&nbsp;positive&nbsp;probability&nbsp;has&nbsp;exceeded&nbsp;the&nbsp;configured&nbsp;false<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;positive&nbsp;probability.&nbsp;This&nbsp;happens&nbsp;roughly&nbsp;when&nbsp;half&nbsp;of&nbsp;the&nbsp;bits&nbsp;in&nbsp;the&nbsp;underlying&nbsp;bit&nbsp;vector&nbsp;have&nbsp;been&nbsp;set&nbsp;to&nbsp;1.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;No&nbsp;more&nbsp;elements&nbsp;should&nbsp;be&nbsp;inserted&nbsp;into&nbsp;the&nbsp;Bloom&nbsp;Filter&nbsp;beyond&nbsp;this&nbsp;point&nbsp;to&nbsp;avoid&nbsp;exceeding&nbsp;the&nbsp;configured<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;probability&nbsp;of&nbsp;false&nbsp;positives.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;{@code&nbsp;true}&nbsp;if&nbsp;the&nbsp;expected&nbsp;false&nbsp;positive&nbsp;probability&nbsp;is&nbsp;greater&nbsp;than&nbsp;the&nbsp;configured&nbsp;probability.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;boolean&nbsp;isSaturated()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;expectedFalsePositiveProbability&nbsp;&amp;gt;&nbsp;configuredFalsePositiveProbability;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;boolean&nbsp;equals(final&nbsp;Object&nbsp;o)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(this&nbsp;==&nbsp;o)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(o&nbsp;==&nbsp;null&nbsp;||&nbsp;getClass()&nbsp;!=&nbsp;o.getClass())&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;BloomFilterStatistics&nbsp;that&nbsp;=&nbsp;(BloomFilterStatistics)&nbsp;o;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;bitSize&nbsp;==&nbsp;that.bitSize&nbsp;&amp;amp;&amp;amp;&nbsp;capacity&nbsp;==&nbsp;that.capacity<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;amp;&amp;amp;&nbsp;expiryTime&nbsp;==&nbsp;that.expiryTime&nbsp;&amp;amp;&amp;amp;&nbsp;estimatedRemainingCapacity&nbsp;==&nbsp;that.estimatedRemainingCapacity<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;amp;&amp;amp;&nbsp;Double.compare(that.configuredFalsePositiveProbability,&nbsp;configuredFalsePositiveProbability)&nbsp;==&nbsp;0<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;amp;&amp;amp;&nbsp;Double.compare(that.expectedFalsePositiveProbability,&nbsp;expectedFalsePositiveProbability)&nbsp;==&nbsp;0;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;int&nbsp;hashCode()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;result;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;temp;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;temp&nbsp;=&nbsp;Double.doubleToLongBits(configuredFalsePositiveProbability);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;(int)&nbsp;(temp&nbsp;^&nbsp;(temp&nbsp;&amp;gt;&amp;gt;&amp;gt;&nbsp;32));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;temp&nbsp;=&nbsp;Double.doubleToLongBits(expectedFalsePositiveProbability);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;31&nbsp;*&nbsp;result&nbsp;+&nbsp;(int)&nbsp;(temp&nbsp;^&nbsp;(temp&nbsp;&amp;gt;&amp;gt;&amp;gt;&nbsp;32));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;31&nbsp;*&nbsp;result&nbsp;+&nbsp;(int)&nbsp;(capacity&nbsp;^&nbsp;(capacity&nbsp;&amp;gt;&amp;gt;&amp;gt;&nbsp;32));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;31&nbsp;*&nbsp;result&nbsp;+&nbsp;(int)&nbsp;(bitSize&nbsp;^&nbsp;(bitSize&nbsp;&amp;gt;&amp;gt;&amp;gt;&nbsp;32));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;31&nbsp;*&nbsp;result&nbsp;+&nbsp;(int)&nbsp;(expiryTime&nbsp;^&nbsp;(expiryTime&nbsp;&amp;gt;&amp;gt;&amp;gt;&nbsp;32));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;31&nbsp;*&nbsp;result&nbsp;+&nbsp;(int)&nbsp;(estimatedRemainingCapacity&nbsp;^&nbsp;(estimatedRemainingCapacity&nbsp;&amp;gt;&amp;gt;&amp;gt;&nbsp;32));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;result;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;toString()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&amp;quot;BloomFilterStatistics{&amp;quot;&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;configuredFalsePositiveProbability=&amp;quot;&nbsp;+&nbsp;configuredFalsePositiveProbability&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;,&nbsp;expectedFalsePositiveProbability=&amp;quot;&nbsp;+&nbsp;expectedFalsePositiveProbability&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;,&nbsp;capacity=&amp;quot;&nbsp;+&nbsp;capacity&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;,&nbsp;estimatedRemainingCapacity=&amp;quot;&nbsp;+&nbsp;estimatedRemainingCapacity&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;,&nbsp;bitSize=&amp;quot;&nbsp;+&nbsp;bitSize&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;,&nbsp;expiryTime=&amp;quot;&nbsp;+&nbsp;new&nbsp;Date(expiryTime).toString()&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'}';<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+}<br>
&lt;/ins&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterBloomFiltersjava&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BloomFilters.java&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BloomFilters.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/BloomFilters.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,219&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+/*<br>
+&nbsp;*&nbsp;The&nbsp;contents&nbsp;of&nbsp;this&nbsp;file&nbsp;are&nbsp;subject&nbsp;to&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;Common&nbsp;Development&nbsp;and<br>
+&nbsp;*&nbsp;Distribution&nbsp;License&nbsp;(the&nbsp;License).&nbsp;You&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the<br>
+&nbsp;*&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;You&nbsp;can&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the<br>
+&nbsp;*&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permission&nbsp;and&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;When&nbsp;distributing&nbsp;Covered&nbsp;Software,&nbsp;include&nbsp;this&nbsp;CDDL&nbsp;Header&nbsp;Notice&nbsp;in&nbsp;each&nbsp;file&nbsp;and&nbsp;include<br>
+&nbsp;*&nbsp;the&nbsp;License&nbsp;file&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;If&nbsp;applicable,&nbsp;add&nbsp;the&nbsp;following&nbsp;below&nbsp;the&nbsp;CDDL<br>
+&nbsp;*&nbsp;Header,&nbsp;with&nbsp;the&nbsp;fields&nbsp;enclosed&nbsp;by&nbsp;brackets&nbsp;[]&nbsp;replaced&nbsp;by&nbsp;your&nbsp;own&nbsp;identifying<br>
+&nbsp;*&nbsp;information:&nbsp;&amp;quot;Portions&nbsp;copyright&nbsp;[year]&nbsp;[name&nbsp;of&nbsp;copyright&nbsp;owner]&amp;quot;.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;Copyright&nbsp;2015&nbsp;ForgeRock&nbsp;AS.<br>
+&nbsp;*/<br>
+<br>
+package&nbsp;org.forgerock.bloomfilter;<br>
+<br>
+import&nbsp;org.forgerock.guava.common.hash.Funnel;<br>
+import&nbsp;org.forgerock.util.Reject;<br>
+import&nbsp;org.forgerock.util.annotations.VisibleForTesting;<br>
+import&nbsp;org.forgerock.util.time.TimeService;<br>
+<br>
+/**<br>
+&nbsp;*&nbsp;Methods&nbsp;for&nbsp;creating&nbsp;bloom&nbsp;filters&nbsp;of&nbsp;various&nbsp;kinds.<br>
+&nbsp;*/<br>
+public&nbsp;final&nbsp;class&nbsp;BloomFilters&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;BloomFilters()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;UnsupportedOperationException(&amp;quot;Utility&nbsp;class&amp;quot;);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;&amp;lt;T&amp;gt;&nbsp;BloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;create(final&nbsp;Funnel&amp;lt;?&nbsp;super&nbsp;T&amp;gt;&nbsp;funnel)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;BloomFilterBuilder&amp;lt;T&amp;gt;(funnel);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Expiry&nbsp;strategy&nbsp;for&nbsp;objects&nbsp;that&nbsp;never&nbsp;expire.&nbsp;With&nbsp;this&nbsp;strategy&nbsp;a&nbsp;rolling&nbsp;Bloom&nbsp;Filter&nbsp;becomes&nbsp;a&nbsp;normal&nbsp;scalable<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Bloom&nbsp;Filter.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;static&nbsp;enum&nbsp;NeverExpires&nbsp;implements&nbsp;ExpiryStrategy&amp;lt;Object&amp;gt;&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;INSTANCE;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@SuppressWarnings(&amp;quot;unchecked&amp;quot;)<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;&amp;lt;T&amp;gt;&nbsp;ExpiryStrategy&amp;lt;T&amp;gt;&nbsp;strategy()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;(ExpiryStrategy&amp;lt;T&amp;gt;)&nbsp;INSTANCE;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;long&nbsp;expiryTime(final&nbsp;Object&nbsp;it)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;Long.MAX_VALUE;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Builder&nbsp;pattern&nbsp;for&nbsp;constructing&nbsp;and&nbsp;configuring&nbsp;Bloom&nbsp;Filter&nbsp;implementations.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;class&nbsp;BloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;initialCapacity&nbsp;=&nbsp;1000;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double&nbsp;falsePositiveProbability&nbsp;=&nbsp;0.01d;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ConcurrencyStrategy&nbsp;concurrencyStrategy&nbsp;=&nbsp;ConcurrencyStrategy.COPY_ON_WRITE;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;writeBatchSize&nbsp;=&nbsp;0;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;Funnel&amp;lt;?&nbsp;super&nbsp;T&amp;gt;&nbsp;funnel;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BloomFilterBuilder(final&nbsp;Funnel&amp;lt;?&nbsp;super&nbsp;T&amp;gt;&nbsp;funnel)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reject.ifNull(funnel);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.funnel&nbsp;=&nbsp;funnel;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BloomFilterBuilder(final&nbsp;BloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;toCopy)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this(toCopy.funnel);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.initialCapacity&nbsp;=&nbsp;toCopy.initialCapacity;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.falsePositiveProbability&nbsp;=&nbsp;toCopy.falsePositiveProbability;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.concurrencyStrategy&nbsp;=&nbsp;toCopy.concurrencyStrategy;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.writeBatchSize&nbsp;=&nbsp;toCopy.writeBatchSize;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;BloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;withInitialCapacity(final&nbsp;int&nbsp;capacity)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reject.ifFalse(capacity&nbsp;&amp;gt;&nbsp;0,&nbsp;&amp;quot;Initial&nbsp;capacity&nbsp;must&nbsp;be&nbsp;&amp;gt;&nbsp;0&amp;quot;);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.initialCapacity&nbsp;=&nbsp;capacity;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;this;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;BloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;withFalsePositiveProbability(final&nbsp;double&nbsp;fpp)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reject.ifFalse(fpp&nbsp;&amp;gt;&nbsp;0.0d,&nbsp;&amp;quot;False&nbsp;positive&nbsp;probability&nbsp;must&nbsp;be&nbsp;&amp;gt;&nbsp;0&amp;quot;);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reject.ifFalse(fpp&nbsp;&amp;lt;&nbsp;1.0d,&nbsp;&amp;quot;False&nbsp;positive&nbsp;probability&nbsp;must&nbsp;be&nbsp;&amp;lt;&nbsp;1&amp;quot;);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.falsePositiveProbability&nbsp;=&nbsp;fpp;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;this;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;ScalableBloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;withCapacityGrowthFactor(final&nbsp;double&nbsp;growthFactor)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;ScalableBloomFilterBuilder&amp;lt;T&amp;gt;(this).withCapacityGrowthFactor(growthFactor);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;ScalableBloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;withFalsePositiveProbabilityScaleFactor(final&nbsp;double&nbsp;scaleFactor)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;ScalableBloomFilterBuilder&amp;lt;T&amp;gt;(this).withFalsePositiveProbabilityScaleFactor(scaleFactor);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;ScalableBloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;withMaximumNumberOfBuckets(final&nbsp;int&nbsp;maximumNumberOfBuckets)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;ScalableBloomFilterBuilder&amp;lt;T&amp;gt;(this).withMaximumNumberOfBuckets(maximumNumberOfBuckets);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;RollingBloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;withExpiryStrategy(final&nbsp;ExpiryStrategy&amp;lt;T&amp;gt;&nbsp;expiryStrategy)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;RollingBloomFilterBuilder&amp;lt;T&amp;gt;(this).withExpiryStrategy(expiryStrategy);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@VisibleForTesting<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RollingBloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;withClock(final&nbsp;TimeService&nbsp;clock)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;RollingBloomFilterBuilder&amp;lt;T&amp;gt;(this).withClock(clock);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;BloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;withConcurrencyStrategy(<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;ConcurrencyStrategy&nbsp;strategy)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reject.ifNull(strategy);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.concurrencyStrategy&nbsp;=&nbsp;strategy;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;this;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;BloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;withWriteBatchSize(final&nbsp;int&nbsp;batchSize)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reject.ifFalse(batchSize&nbsp;&amp;gt;=&nbsp;0,&nbsp;&amp;quot;Write&nbsp;batch&nbsp;size&nbsp;must&nbsp;be&nbsp;&amp;gt;=&nbsp;0&amp;quot;);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.writeBatchSize&nbsp;=&nbsp;batchSize;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;this;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;ScalableBloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;scalable()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;ScalableBloomFilterBuilder&amp;lt;T&amp;gt;(this);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;RollingBloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;rolling()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;RollingBloomFilterBuilder&amp;lt;T&amp;gt;(this);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;build()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;bf&nbsp;=&nbsp;buildBloomFilter();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(writeBatchSize&nbsp;&amp;gt;&nbsp;0)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;bf&nbsp;=&nbsp;new&nbsp;BatchingBloomFilter&amp;lt;T&amp;gt;(bf,&nbsp;writeBatchSize);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;bf;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;buildBloomFilter()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;concurrencyStrategy.&amp;lt;T&amp;gt;getFactory(funnel).create(initialCapacity,&nbsp;falsePositiveProbability);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;class&nbsp;ScalableBloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;extends&nbsp;BloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double&nbsp;capacityGrowthFactor&nbsp;=&nbsp;2.0d;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;double&nbsp;falsePositiveProbabilityScaleFactor&nbsp;=&nbsp;0.8d;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;maxNumberOfBuckets&nbsp;=&nbsp;64;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ScalableBloomFilterBuilder(final&nbsp;BloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;toCopy)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super(toCopy);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(toCopy&nbsp;instanceof&nbsp;ScalableBloomFilterBuilder)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ScalableBloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;sbf&nbsp;=&nbsp;(ScalableBloomFilterBuilder&amp;lt;T&amp;gt;)&nbsp;toCopy;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.capacityGrowthFactor&nbsp;=&nbsp;sbf.capacityGrowthFactor;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.falsePositiveProbabilityScaleFactor&nbsp;=&nbsp;sbf.falsePositiveProbabilityScaleFactor;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.maxNumberOfBuckets&nbsp;=&nbsp;sbf.maxNumberOfBuckets;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;ScalableBloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;withCapacityGrowthFactor(final&nbsp;double&nbsp;growthFactor)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reject.ifFalse(growthFactor&nbsp;&amp;gt;=&nbsp;1.0d,&nbsp;&amp;quot;Capacity&nbsp;growth&nbsp;factor&nbsp;must&nbsp;be&nbsp;&amp;gt;=&nbsp;1&amp;quot;);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.capacityGrowthFactor&nbsp;=&nbsp;growthFactor;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;this;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;ScalableBloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;withFalsePositiveProbabilityScaleFactor(final&nbsp;double&nbsp;scaleFactor)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reject.ifFalse(scaleFactor&nbsp;&amp;gt;&nbsp;0.0d,&nbsp;&amp;quot;False&nbsp;positive&nbsp;probability&nbsp;scale&nbsp;factor&nbsp;must&nbsp;be&nbsp;&amp;gt;&nbsp;0&amp;quot;);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reject.ifFalse(scaleFactor&nbsp;&amp;lt;&nbsp;1.0d,&nbsp;&amp;quot;False&nbsp;positive&nbsp;probability&nbsp;scale&nbsp;factor&nbsp;must&nbsp;be&nbsp;&amp;lt;&nbsp;1&amp;quot;);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.falsePositiveProbabilityScaleFactor&nbsp;=&nbsp;scaleFactor;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;this;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;ScalableBloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;withMaximumNumberOfBuckets(final&nbsp;int&nbsp;maximumNumberOfBuckets)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reject.ifFalse(maximumNumberOfBuckets&nbsp;&amp;gt;&nbsp;0,&nbsp;&amp;quot;Must&nbsp;be&nbsp;at&nbsp;least&nbsp;one&nbsp;bucket&amp;quot;);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.maxNumberOfBuckets&nbsp;=&nbsp;maximumNumberOfBuckets;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;this;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;buildBloomFilter()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;RollingBloomFilterBuilder&amp;lt;T&amp;gt;(this).withExpiryStrategy(NeverExpires.&amp;lt;T&amp;gt;strategy())<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.buildBloomFilter();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;final&nbsp;class&nbsp;RollingBloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;extends&nbsp;ScalableBloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;TimeService&nbsp;clock&nbsp;=&nbsp;TimeService.SYSTEM;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ExpiryStrategy&amp;lt;T&amp;gt;&nbsp;expiryStrategy&nbsp;=&nbsp;null;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;RollingBloomFilterBuilder(final&nbsp;BloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;toCopy)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;super(toCopy);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@VisibleForTesting<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;RollingBloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;withClock(final&nbsp;TimeService&nbsp;clock)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reject.ifNull(clock);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.clock&nbsp;=&nbsp;clock;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;this;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;RollingBloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;withExpiryStrategy(final&nbsp;ExpiryStrategy&amp;lt;T&amp;gt;&nbsp;expiryStrategy)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reject.ifNull(expiryStrategy);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expiryStrategy&nbsp;=&nbsp;expiryStrategy;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;this;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;buildBloomFilter()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reject.ifNull(expiryStrategy);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;ConcurrentRollingBloomFilter&amp;lt;T&amp;gt;(this);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+}<br>
&lt;/ins&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterConcurrencyStrategyjava&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/ConcurrencyStrategy.java&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/ConcurrencyStrategy.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/ConcurrencyStrategy.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,67&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+/*<br>
+&nbsp;*&nbsp;The&nbsp;contents&nbsp;of&nbsp;this&nbsp;file&nbsp;are&nbsp;subject&nbsp;to&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;Common&nbsp;Development&nbsp;and<br>
+&nbsp;*&nbsp;Distribution&nbsp;License&nbsp;(the&nbsp;License).&nbsp;You&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the<br>
+&nbsp;*&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;You&nbsp;can&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the<br>
+&nbsp;*&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permission&nbsp;and&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;When&nbsp;distributing&nbsp;Covered&nbsp;Software,&nbsp;include&nbsp;this&nbsp;CDDL&nbsp;Header&nbsp;Notice&nbsp;in&nbsp;each&nbsp;file&nbsp;and&nbsp;include<br>
+&nbsp;*&nbsp;the&nbsp;License&nbsp;file&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;If&nbsp;applicable,&nbsp;add&nbsp;the&nbsp;following&nbsp;below&nbsp;the&nbsp;CDDL<br>
+&nbsp;*&nbsp;Header,&nbsp;with&nbsp;the&nbsp;fields&nbsp;enclosed&nbsp;by&nbsp;brackets&nbsp;[]&nbsp;replaced&nbsp;by&nbsp;your&nbsp;own&nbsp;identifying<br>
+&nbsp;*&nbsp;information:&nbsp;&amp;quot;Portions&nbsp;copyright&nbsp;[year]&nbsp;[name&nbsp;of&nbsp;copyright&nbsp;owner]&amp;quot;.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;Copyright&nbsp;2015&nbsp;ForgeRock&nbsp;AS.<br>
+&nbsp;*/<br>
+<br>
+package&nbsp;org.forgerock.bloomfilter;<br>
+<br>
+import&nbsp;org.forgerock.guava.common.hash.Funnel;<br>
+<br>
+/**<br>
+&nbsp;*<br>
+&nbsp;*/<br>
+public&nbsp;enum&nbsp;ConcurrencyStrategy&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;COPY_ON_WRITE&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;T&amp;gt;&nbsp;BloomFilterFactory&amp;lt;T&amp;gt;&nbsp;getFactory(final&nbsp;Funnel&amp;lt;?&nbsp;super&nbsp;T&amp;gt;&nbsp;funnel)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;CopyOnWriteBloomFilterFactory&amp;lt;T&amp;gt;(funnel);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;},<br>
+&nbsp;&nbsp;&nbsp;&nbsp;SYNCHRONIZED&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;T&amp;gt;&nbsp;BloomFilterFactory&amp;lt;T&amp;gt;&nbsp;getFactory(final&nbsp;Funnel&amp;lt;?&nbsp;super&nbsp;T&amp;gt;&nbsp;funnel)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;SynchronizedBloomFilterFactory&amp;lt;T&amp;gt;(funnel);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;abstract&nbsp;&amp;lt;T&amp;gt;&nbsp;BloomFilterFactory&amp;lt;T&amp;gt;&nbsp;getFactory(Funnel&amp;lt;?&nbsp;super&nbsp;T&amp;gt;&nbsp;funnel);<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;final&nbsp;class&nbsp;CopyOnWriteBloomFilterFactory&amp;lt;T&amp;gt;&nbsp;implements&nbsp;BloomFilterFactory&amp;lt;T&amp;gt;&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;Funnel&amp;lt;?&nbsp;super&nbsp;T&amp;gt;&nbsp;funnel;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;CopyOnWriteBloomFilterFactory(final&nbsp;Funnel&amp;lt;?&nbsp;super&nbsp;T&amp;gt;&nbsp;funnel)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.funnel&nbsp;=&nbsp;funnel;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;create(final&nbsp;long&nbsp;expectedInsertions,&nbsp;final&nbsp;double&nbsp;falsePositiveProbability)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;CopyOnWriteBloomFilter&amp;lt;T&amp;gt;(funnel,&nbsp;expectedInsertions,&nbsp;falsePositiveProbability);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;final&nbsp;class&nbsp;SynchronizedBloomFilterFactory&amp;lt;T&amp;gt;&nbsp;implements&nbsp;BloomFilterFactory&amp;lt;T&amp;gt;&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;Funnel&amp;lt;?&nbsp;super&nbsp;T&amp;gt;&nbsp;funnel;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SynchronizedBloomFilterFactory(final&nbsp;Funnel&amp;lt;?&nbsp;super&nbsp;T&amp;gt;&nbsp;funnel)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.funnel&nbsp;=&nbsp;funnel;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;create(final&nbsp;long&nbsp;expectedInsertions,&nbsp;final&nbsp;double&nbsp;falsePositiveProbability)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;SynchronizedBloomFilter&amp;lt;T&amp;gt;(funnel,&nbsp;expectedInsertions,&nbsp;falsePositiveProbability);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+}<br>
&lt;/ins&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterConcurrentRollingBloomFilterjava&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/ConcurrentRollingBloomFilter.java&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/ConcurrentRollingBloomFilter.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/ConcurrentRollingBloomFilter.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,106&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+/*<br>
+&nbsp;*&nbsp;The&nbsp;contents&nbsp;of&nbsp;this&nbsp;file&nbsp;are&nbsp;subject&nbsp;to&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;Common&nbsp;Development&nbsp;and<br>
+&nbsp;*&nbsp;Distribution&nbsp;License&nbsp;(the&nbsp;License).&nbsp;You&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the<br>
+&nbsp;*&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;You&nbsp;can&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the<br>
+&nbsp;*&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permission&nbsp;and&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;When&nbsp;distributing&nbsp;Covered&nbsp;Software,&nbsp;include&nbsp;this&nbsp;CDDL&nbsp;Header&nbsp;Notice&nbsp;in&nbsp;each&nbsp;file&nbsp;and&nbsp;include<br>
+&nbsp;*&nbsp;the&nbsp;License&nbsp;file&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;If&nbsp;applicable,&nbsp;add&nbsp;the&nbsp;following&nbsp;below&nbsp;the&nbsp;CDDL<br>
+&nbsp;*&nbsp;Header,&nbsp;with&nbsp;the&nbsp;fields&nbsp;enclosed&nbsp;by&nbsp;brackets&nbsp;[]&nbsp;replaced&nbsp;by&nbsp;your&nbsp;own&nbsp;identifying<br>
+&nbsp;*&nbsp;information:&nbsp;&amp;quot;Portions&nbsp;copyright&nbsp;[year]&nbsp;[name&nbsp;of&nbsp;copyright&nbsp;owner]&amp;quot;.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;Copyright&nbsp;2015&nbsp;ForgeRock&nbsp;AS.<br>
+&nbsp;*/<br>
+<br>
+package&nbsp;org.forgerock.bloomfilter;<br>
+<br>
+import&nbsp;org.forgerock.guava.common.hash.Funnel;<br>
+import&nbsp;org.forgerock.util.Reject;<br>
+import&nbsp;org.slf4j.Logger;<br>
+import&nbsp;org.slf4j.LoggerFactory;<br>
+<br>
+import&nbsp;javax.annotation.concurrent.ThreadSafe;<br>
+import&nbsp;java.util.Collection;<br>
+<br>
+/**<br>
+&nbsp;*&nbsp;A&nbsp;thread-safe&nbsp;implementation&nbsp;of&nbsp;a&nbsp;Bloom&nbsp;Filter&nbsp;that&nbsp;can&nbsp;expand&nbsp;over&nbsp;time&nbsp;to&nbsp;accommodate&nbsp;arbitrary&nbsp;numbers&nbsp;of<br>
+&nbsp;*&nbsp;elements,&nbsp;while&nbsp;also&nbsp;allowing&nbsp;old&nbsp;elements&nbsp;to&nbsp;be&nbsp;deleted&nbsp;after&nbsp;they&nbsp;have&nbsp;expired.&nbsp;Rolling&nbsp;bloom&nbsp;filters&nbsp;are&nbsp;useful<br>
+&nbsp;*&nbsp;for&nbsp;maintaining&nbsp;on-going&nbsp;blacklists&nbsp;of&nbsp;short-lived&nbsp;elements.<br>
+&nbsp;*&nbsp;&amp;lt;p/&amp;gt;<br>
+&nbsp;*&nbsp;This&nbsp;implementation&nbsp;is&nbsp;optimised&nbsp;for&nbsp;concurrent&nbsp;read&nbsp;performance.&nbsp;Concurrent&nbsp;writes&nbsp;performance&nbsp;is&nbsp;likely&nbsp;to&nbsp;be<br>
+&nbsp;*&nbsp;considerably&nbsp;slower&nbsp;than&nbsp;reads,&nbsp;so&nbsp;this&nbsp;implementation&nbsp;is&nbsp;only&nbsp;suitable&nbsp;for&nbsp;situations&nbsp;where&nbsp;read&nbsp;performance&nbsp;is<br>
+&nbsp;*&nbsp;critical&nbsp;and&nbsp;writes&nbsp;are&nbsp;relatively&nbsp;rare.&nbsp;Write&nbsp;performance&nbsp;may&nbsp;be&nbsp;improved&nbsp;by&nbsp;batching&nbsp;writes&nbsp;via&nbsp;the<br>
+&nbsp;*&nbsp;{@link&nbsp;#addAll(Collection)}&nbsp;method,&nbsp;or&nbsp;by&nbsp;using&nbsp;some&nbsp;external&nbsp;synchronisation&nbsp;mechanism&nbsp;to&nbsp;perform&nbsp;pre-emptive<br>
+&nbsp;*&nbsp;locking&nbsp;(at&nbsp;the&nbsp;cost&nbsp;of&nbsp;reducing&nbsp;read&nbsp;performance).<br>
+&nbsp;*/<br>
+@ThreadSafe<br>
+public&nbsp;final&nbsp;class&nbsp;ConcurrentRollingBloomFilter&amp;lt;T&amp;gt;&nbsp;implements&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;final&nbsp;Logger&nbsp;LOGGER&nbsp;=&nbsp;LoggerFactory.getLogger(ConcurrentRollingBloomFilter.class);<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;BloomFilterChain&amp;lt;T&amp;gt;&nbsp;bucketChain;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;BloomFilterPool&amp;lt;T&amp;gt;&nbsp;bucketPool;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;ConcurrencyStrategy&nbsp;concurrencyStrategy;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;ConcurrentRollingBloomFilter(final&nbsp;BloomFilters.RollingBloomFilterBuilder&amp;lt;T&amp;gt;&nbsp;builder)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.concurrencyStrategy&nbsp;=&nbsp;builder.concurrencyStrategy;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;BloomFilterFactory&amp;lt;T&amp;gt;&nbsp;factory&nbsp;=&nbsp;new&nbsp;ExpiringBloomFilterFactory&amp;lt;T&amp;gt;(<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;concurrencyStrategy.&amp;lt;T&amp;gt;getFactory(builder.funnel),&nbsp;builder.expiryStrategy);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.bucketPool&nbsp;=&nbsp;new&nbsp;BloomFilterPool&amp;lt;T&amp;gt;(factory,&nbsp;builder.maxNumberOfBuckets,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;builder.initialCapacity,&nbsp;builder.capacityGrowthFactor,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;builder.falsePositiveProbability,&nbsp;builder.falsePositiveProbabilityScaleFactor);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.bucketChain&nbsp;=&nbsp;new&nbsp;BloomFilterChain&amp;lt;T&amp;gt;(bucketPool,&nbsp;builder.clock);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;final&nbsp;class&nbsp;ExpiringBloomFilterFactory&amp;lt;T&amp;gt;&nbsp;implements&nbsp;BloomFilterFactory&amp;lt;T&amp;gt;&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;BloomFilterFactory&amp;lt;T&amp;gt;&nbsp;factory;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;ExpiryStrategy&amp;lt;T&amp;gt;&nbsp;expiryStrategy;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ExpiringBloomFilterFactory(final&nbsp;BloomFilterFactory&amp;lt;T&amp;gt;&nbsp;factory,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;ExpiryStrategy&amp;lt;T&amp;gt;&nbsp;strategy)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.factory&nbsp;=&nbsp;factory;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expiryStrategy&nbsp;=&nbsp;strategy;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;create(final&nbsp;long&nbsp;expectedInsertions,&nbsp;final&nbsp;double&nbsp;falsePositiveProbability)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;ExpiringBloomFilter&amp;lt;T&amp;gt;(factory.create(expectedInsertions,&nbsp;falsePositiveProbability),<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;expiryStrategy);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;boolean&nbsp;add(final&nbsp;T&nbsp;element)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;LOGGER.debug(&amp;quot;Adding&nbsp;object&nbsp;{}&amp;quot;,&nbsp;element);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reject.ifNull(element);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;bucketChain.add(element);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;boolean&nbsp;addAll(final&nbsp;Collection&amp;lt;?&nbsp;extends&nbsp;T&amp;gt;&nbsp;elements)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reject.ifNull(elements);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;bucketChain.addAll(elements);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;boolean&nbsp;mightContain(final&nbsp;T&nbsp;element)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;bucketChain.mightContain(element);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;BloomFilterStatistics&nbsp;statistics()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;bucketChain.statistics();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;toString()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&amp;quot;ConcurrentRollingBloomFilter{&amp;quot;&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;concurrencyStrategy=&amp;quot;&nbsp;+&nbsp;concurrencyStrategy&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;,&nbsp;bucketChain=&amp;quot;&nbsp;+&nbsp;bucketChain&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;,&nbsp;bucketPool=&amp;quot;&nbsp;+&nbsp;bucketPool&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'}';<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+}<br>
&lt;/ins&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterCopyOnWriteBloomFilterjava&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/CopyOnWriteBloomFilter.java&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/CopyOnWriteBloomFilter.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/CopyOnWriteBloomFilter.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,93&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+/*<br>
+&nbsp;*&nbsp;The&nbsp;contents&nbsp;of&nbsp;this&nbsp;file&nbsp;are&nbsp;subject&nbsp;to&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;Common&nbsp;Development&nbsp;and<br>
+&nbsp;*&nbsp;Distribution&nbsp;License&nbsp;(the&nbsp;License).&nbsp;You&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the<br>
+&nbsp;*&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;You&nbsp;can&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the<br>
+&nbsp;*&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permission&nbsp;and&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;When&nbsp;distributing&nbsp;Covered&nbsp;Software,&nbsp;include&nbsp;this&nbsp;CDDL&nbsp;Header&nbsp;Notice&nbsp;in&nbsp;each&nbsp;file&nbsp;and&nbsp;include<br>
+&nbsp;*&nbsp;the&nbsp;License&nbsp;file&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;If&nbsp;applicable,&nbsp;add&nbsp;the&nbsp;following&nbsp;below&nbsp;the&nbsp;CDDL<br>
+&nbsp;*&nbsp;Header,&nbsp;with&nbsp;the&nbsp;fields&nbsp;enclosed&nbsp;by&nbsp;brackets&nbsp;[]&nbsp;replaced&nbsp;by&nbsp;your&nbsp;own&nbsp;identifying<br>
+&nbsp;*&nbsp;information:&nbsp;&amp;quot;Portions&nbsp;copyright&nbsp;[year]&nbsp;[name&nbsp;of&nbsp;copyright&nbsp;owner]&amp;quot;.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;Copyright&nbsp;2015&nbsp;ForgeRock&nbsp;AS.<br>
+&nbsp;*/<br>
+<br>
+package&nbsp;org.forgerock.bloomfilter;<br>
+<br>
+import&nbsp;org.forgerock.guava.common.hash.Funnel;<br>
+<br>
+import&nbsp;javax.annotation.concurrent.ThreadSafe;<br>
+import&nbsp;java.util.Collection;<br>
+import&nbsp;java.util.Collections;<br>
+import&nbsp;java.util.concurrent.atomic.AtomicReference;<br>
+<br>
+/**<br>
+&nbsp;*&nbsp;A&nbsp;thread-safe&nbsp;implementation&nbsp;of&nbsp;a&nbsp;Bloom&nbsp;Filter&nbsp;that&nbsp;is&nbsp;optimised&nbsp;for&nbsp;read&nbsp;performance&nbsp;with&nbsp;only&nbsp;rarely&nbsp;expected<br>
+&nbsp;*&nbsp;additions&nbsp;to&nbsp;the&nbsp;set.<br>
+&nbsp;*/<br>
+@ThreadSafe<br>
+public&nbsp;final&nbsp;class&nbsp;CopyOnWriteBloomFilter&amp;lt;T&amp;gt;&nbsp;implements&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;long&nbsp;capacity;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;double&nbsp;falsePositiveProbability;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;AtomicReference&amp;lt;org.forgerock.guava.common.hash.BloomFilter&amp;lt;T&amp;gt;&amp;gt;&nbsp;bloomFilterAtomicReference;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;CopyOnWriteBloomFilter(final&nbsp;Funnel&amp;lt;?&nbsp;super&nbsp;T&amp;gt;&nbsp;funnel,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;long&nbsp;capacity,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;double&nbsp;falsePositiveProbability)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.capacity&nbsp;=&nbsp;capacity;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.falsePositiveProbability&nbsp;=&nbsp;falsePositiveProbability;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;org.forgerock.guava.common.hash.BloomFilter&amp;lt;T&amp;gt;&nbsp;bf&nbsp;=<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.forgerock.guava.common.hash.BloomFilter.create(funnel,&nbsp;(int)&nbsp;capacity,&nbsp;falsePositiveProbability);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.bloomFilterAtomicReference&nbsp;=&nbsp;new&nbsp;AtomicReference&amp;lt;org.forgerock.guava.common.hash.BloomFilter&amp;lt;T&amp;gt;&amp;gt;(bf);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;boolean&nbsp;add(final&nbsp;T&nbsp;element)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;addAll(Collections.singleton(element));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;boolean&nbsp;addAll(final&nbsp;Collection&amp;lt;?&nbsp;extends&nbsp;T&amp;gt;&nbsp;elements)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boolean&nbsp;changed;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.forgerock.guava.common.hash.BloomFilter&amp;lt;T&amp;gt;&nbsp;prev;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;org.forgerock.guava.common.hash.BloomFilter&amp;lt;T&amp;gt;&nbsp;next;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;changed&nbsp;=&nbsp;false;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;prev&nbsp;=&nbsp;bloomFilterAtomicReference.get();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;next&nbsp;=&nbsp;prev.copy();<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(T&nbsp;element&nbsp;:&nbsp;elements)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;changed&nbsp;|=&nbsp;next.put(element);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;while&nbsp;(changed&nbsp;&amp;amp;&amp;amp;&nbsp;!bloomFilterAtomicReference.compareAndSet(prev,&nbsp;next));<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;changed;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;boolean&nbsp;mightContain(final&nbsp;T&nbsp;element)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;bloomFilterAtomicReference.get().mightContain(element);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;BloomFilterStatistics&nbsp;statistics()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;double&nbsp;expectedFpp&nbsp;=&nbsp;bloomFilterAtomicReference.get().expectedFpp();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;long&nbsp;bitSize&nbsp;=&nbsp;BloomFilterStatistics.optimumBitSize(capacity,&nbsp;falsePositiveProbability);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;BloomFilterStatistics(falsePositiveProbability,&nbsp;expectedFpp,&nbsp;capacity,&nbsp;bitSize,&nbsp;Long.MAX_VALUE,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BloomFilterStatistics.optimumRemainingCapacity(bitSize,&nbsp;falsePositiveProbability,&nbsp;expectedFpp));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;toString()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&amp;quot;CopyOnWriteBloomFilter{&amp;quot;&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;capacity=&amp;quot;&nbsp;+&nbsp;capacity&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;,&nbsp;falsePositiveProbability=&amp;quot;&nbsp;+&nbsp;falsePositiveProbability&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'}';<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+}<br>
&lt;/ins&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterExpiringBloomFilterjava&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/ExpiringBloomFilter.java&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/ExpiringBloomFilter.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/ExpiringBloomFilter.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,93&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+/*<br>
+&nbsp;*&nbsp;The&nbsp;contents&nbsp;of&nbsp;this&nbsp;file&nbsp;are&nbsp;subject&nbsp;to&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;Common&nbsp;Development&nbsp;and<br>
+&nbsp;*&nbsp;Distribution&nbsp;License&nbsp;(the&nbsp;License).&nbsp;You&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the<br>
+&nbsp;*&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;You&nbsp;can&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the<br>
+&nbsp;*&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permission&nbsp;and&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;When&nbsp;distributing&nbsp;Covered&nbsp;Software,&nbsp;include&nbsp;this&nbsp;CDDL&nbsp;Header&nbsp;Notice&nbsp;in&nbsp;each&nbsp;file&nbsp;and&nbsp;include<br>
+&nbsp;*&nbsp;the&nbsp;License&nbsp;file&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;If&nbsp;applicable,&nbsp;add&nbsp;the&nbsp;following&nbsp;below&nbsp;the&nbsp;CDDL<br>
+&nbsp;*&nbsp;Header,&nbsp;with&nbsp;the&nbsp;fields&nbsp;enclosed&nbsp;by&nbsp;brackets&nbsp;[]&nbsp;replaced&nbsp;by&nbsp;your&nbsp;own&nbsp;identifying<br>
+&nbsp;*&nbsp;information:&nbsp;&amp;quot;Portions&nbsp;copyright&nbsp;[year]&nbsp;[name&nbsp;of&nbsp;copyright&nbsp;owner]&amp;quot;.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;Copyright&nbsp;2015&nbsp;ForgeRock&nbsp;AS.<br>
+&nbsp;*/<br>
+<br>
+package&nbsp;org.forgerock.bloomfilter;<br>
+<br>
+import&nbsp;org.forgerock.util.Reject;<br>
+<br>
+import&nbsp;javax.annotation.concurrent.ThreadSafe;<br>
+import&nbsp;java.util.Collection;<br>
+import&nbsp;java.util.concurrent.atomic.AtomicLong;<br>
+<br>
+/**<br>
+&nbsp;*&nbsp;A&nbsp;Bloom&nbsp;Filter&nbsp;decorator&nbsp;that&nbsp;can&nbsp;expire&nbsp;when&nbsp;the&nbsp;youngest&nbsp;element&nbsp;within&nbsp;it&nbsp;expires.<br>
+&nbsp;*/<br>
+@ThreadSafe<br>
+final&nbsp;class&nbsp;ExpiringBloomFilter&amp;lt;T&amp;gt;&nbsp;implements&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;delegate;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;ExpiryStrategy&amp;lt;T&amp;gt;&nbsp;expiryStrategy;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;AtomicLong&nbsp;latestExpiryTime&nbsp;=&nbsp;new&nbsp;AtomicLong(Long.MIN_VALUE);<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;ExpiringBloomFilter(final&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;delegate,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;ExpiryStrategy&amp;lt;T&amp;gt;&nbsp;expiryStrategy)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Reject.ifNull(delegate,&nbsp;expiryStrategy);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.delegate&nbsp;=&nbsp;delegate;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.expiryStrategy&nbsp;=&nbsp;expiryStrategy;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;boolean&nbsp;add(final&nbsp;T&nbsp;element)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;boolean&nbsp;timestampChanged&nbsp;=&nbsp;updateExpiryTime(expiryStrategy.expiryTime(element));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;delegate.add(element)&nbsp;||&nbsp;timestampChanged;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;boolean&nbsp;addAll(final&nbsp;Collection&amp;lt;?&nbsp;extends&nbsp;T&amp;gt;&nbsp;elements)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;boolean&nbsp;timestampChanged&nbsp;=&nbsp;updateExpiryTime(maxExpiryTime(elements));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;delegate.addAll(elements)&nbsp;||&nbsp;timestampChanged;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;boolean&nbsp;mightContain(final&nbsp;T&nbsp;element)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;expiryStrategy.expiryTime(element)&nbsp;&amp;lt;=&nbsp;latestExpiryTime.get()&nbsp;&amp;amp;&amp;amp;&nbsp;delegate.mightContain(element);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;BloomFilterStatistics&nbsp;statistics()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;BloomFilterStatistics&nbsp;stats&nbsp;=&nbsp;delegate.statistics();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;BloomFilterStatistics(stats.getConfiguredFalsePositiveProbability(),<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stats.getExpectedFalsePositiveProbability(),<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stats.getCapacity(),<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stats.getBitSize(),<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;latestExpiryTime.get(),<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stats.getEstimatedRemainingCapacity());<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Atomic&nbsp;update&nbsp;of&nbsp;the&nbsp;latest&nbsp;expiry&nbsp;time.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;newExpiryTime&nbsp;the&nbsp;candidate&nbsp;new&nbsp;latest&nbsp;expiry&nbsp;time.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;whether&nbsp;the&nbsp;new&nbsp;expiry&nbsp;time&nbsp;is&nbsp;now&nbsp;the&nbsp;latest.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;boolean&nbsp;updateExpiryTime(final&nbsp;long&nbsp;newExpiryTime)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boolean&nbsp;changed;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;oldExpiryTime;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;oldExpiryTime&nbsp;=&nbsp;latestExpiryTime.get();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;changed&nbsp;=&nbsp;newExpiryTime&nbsp;&amp;gt;&nbsp;oldExpiryTime;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;while&nbsp;(changed&nbsp;&amp;amp;&amp;amp;&nbsp;!latestExpiryTime.compareAndSet(oldExpiryTime,&nbsp;newExpiryTime));<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;changed;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;long&nbsp;maxExpiryTime(final&nbsp;Collection&amp;lt;?&nbsp;extends&nbsp;T&amp;gt;&nbsp;elements)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;max&nbsp;=&nbsp;Long.MIN_VALUE;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(T&nbsp;element&nbsp;:&nbsp;elements)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;max&nbsp;=&nbsp;Math.max(expiryStrategy.expiryTime(element),&nbsp;max);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;max;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+}<br>
&lt;/ins&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterExpiryStrategyjava&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/ExpiryStrategy.java&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/ExpiryStrategy.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/ExpiryStrategy.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,30&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+/*<br>
+&nbsp;*&nbsp;The&nbsp;contents&nbsp;of&nbsp;this&nbsp;file&nbsp;are&nbsp;subject&nbsp;to&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;Common&nbsp;Development&nbsp;and<br>
+&nbsp;*&nbsp;Distribution&nbsp;License&nbsp;(the&nbsp;License).&nbsp;You&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the<br>
+&nbsp;*&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;You&nbsp;can&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the<br>
+&nbsp;*&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permission&nbsp;and&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;When&nbsp;distributing&nbsp;Covered&nbsp;Software,&nbsp;include&nbsp;this&nbsp;CDDL&nbsp;Header&nbsp;Notice&nbsp;in&nbsp;each&nbsp;file&nbsp;and&nbsp;include<br>
+&nbsp;*&nbsp;the&nbsp;License&nbsp;file&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;If&nbsp;applicable,&nbsp;add&nbsp;the&nbsp;following&nbsp;below&nbsp;the&nbsp;CDDL<br>
+&nbsp;*&nbsp;Header,&nbsp;with&nbsp;the&nbsp;fields&nbsp;enclosed&nbsp;by&nbsp;brackets&nbsp;[]&nbsp;replaced&nbsp;by&nbsp;your&nbsp;own&nbsp;identifying<br>
+&nbsp;*&nbsp;information:&nbsp;&amp;quot;Portions&nbsp;copyright&nbsp;[year]&nbsp;[name&nbsp;of&nbsp;copyright&nbsp;owner]&amp;quot;.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;Copyright&nbsp;2015&nbsp;ForgeRock&nbsp;AS.<br>
+&nbsp;*/<br>
+<br>
+package&nbsp;org.forgerock.bloomfilter;<br>
+<br>
+/**<br>
+&nbsp;*&nbsp;Strategy&nbsp;pattern&nbsp;for&nbsp;determining&nbsp;when&nbsp;elements&nbsp;added&nbsp;to&nbsp;a&nbsp;{@link&nbsp;ConcurrentRollingBloomFilter}&nbsp;should&nbsp;expire.<br>
+&nbsp;*/<br>
+public&nbsp;interface&nbsp;ExpiryStrategy&amp;lt;T&amp;gt;&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Determines&nbsp;the&nbsp;expiration&nbsp;time&nbsp;for&nbsp;the&nbsp;given&nbsp;element.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@param&nbsp;it&nbsp;the&nbsp;element&nbsp;to&nbsp;determine&nbsp;the&nbsp;expiration&nbsp;time&nbsp;for.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;@return&nbsp;the&nbsp;expiration&nbsp;time,&nbsp;as&nbsp;milliseconds&nbsp;from&nbsp;the&nbsp;UTC&nbsp;epoch.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;expiryTime(T&nbsp;it);<br>
+}<br>
&lt;/ins&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterSynchronizedBloomFilterjava&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/SynchronizedBloomFilter.java&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/SynchronizedBloomFilter.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/SynchronizedBloomFilter.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,76&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+/*<br>
+&nbsp;*&nbsp;The&nbsp;contents&nbsp;of&nbsp;this&nbsp;file&nbsp;are&nbsp;subject&nbsp;to&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;Common&nbsp;Development&nbsp;and<br>
+&nbsp;*&nbsp;Distribution&nbsp;License&nbsp;(the&nbsp;License).&nbsp;You&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the<br>
+&nbsp;*&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;You&nbsp;can&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the<br>
+&nbsp;*&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permission&nbsp;and&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;When&nbsp;distributing&nbsp;Covered&nbsp;Software,&nbsp;include&nbsp;this&nbsp;CDDL&nbsp;Header&nbsp;Notice&nbsp;in&nbsp;each&nbsp;file&nbsp;and&nbsp;include<br>
+&nbsp;*&nbsp;the&nbsp;License&nbsp;file&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;If&nbsp;applicable,&nbsp;add&nbsp;the&nbsp;following&nbsp;below&nbsp;the&nbsp;CDDL<br>
+&nbsp;*&nbsp;Header,&nbsp;with&nbsp;the&nbsp;fields&nbsp;enclosed&nbsp;by&nbsp;brackets&nbsp;[]&nbsp;replaced&nbsp;by&nbsp;your&nbsp;own&nbsp;identifying<br>
+&nbsp;*&nbsp;information:&nbsp;&amp;quot;Portions&nbsp;copyright&nbsp;[year]&nbsp;[name&nbsp;of&nbsp;copyright&nbsp;owner]&amp;quot;.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;Copyright&nbsp;2015&nbsp;ForgeRock&nbsp;AS.<br>
+&nbsp;*/<br>
+<br>
+package&nbsp;org.forgerock.bloomfilter;<br>
+<br>
+import&nbsp;org.forgerock.guava.common.hash.Funnel;<br>
+<br>
+import&nbsp;javax.annotation.concurrent.ThreadSafe;<br>
+import&nbsp;java.util.Collection;<br>
+<br>
+/**<br>
+&nbsp;*&nbsp;A&nbsp;fully&nbsp;synchronized&nbsp;bloom&nbsp;filter&nbsp;implementation.<br>
+&nbsp;*/<br>
+@ThreadSafe<br>
+public&nbsp;final&nbsp;class&nbsp;SynchronizedBloomFilter&amp;lt;T&amp;gt;&nbsp;implements&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;long&nbsp;capacity;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;double&nbsp;falsePositiveProbability;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;org.forgerock.guava.common.hash.BloomFilter&amp;lt;T&amp;gt;&nbsp;bloomFilter;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;SynchronizedBloomFilter(final&nbsp;Funnel&amp;lt;?&nbsp;super&nbsp;T&amp;gt;&nbsp;funnel,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;long&nbsp;capacity,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;double&nbsp;falsePositiveProbability)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.falsePositiveProbability&nbsp;=&nbsp;falsePositiveProbability;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.capacity&nbsp;=&nbsp;capacity;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.bloomFilter&nbsp;=&nbsp;org.forgerock.guava.common.hash.BloomFilter.create(funnel,&nbsp;(int)&nbsp;capacity,&nbsp;falsePositiveProbability);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;synchronized&nbsp;boolean&nbsp;add(final&nbsp;T&nbsp;element)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;bloomFilter.put(element);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;synchronized&nbsp;boolean&nbsp;addAll(final&nbsp;Collection&amp;lt;?&nbsp;extends&nbsp;T&amp;gt;&nbsp;elements)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boolean&nbsp;changed&nbsp;=&nbsp;false;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(T&nbsp;element&nbsp;:&nbsp;elements)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;changed&nbsp;|=&nbsp;bloomFilter.put(element);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;changed;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;synchronized&nbsp;boolean&nbsp;mightContain(final&nbsp;T&nbsp;element)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;bloomFilter.mightContain(element);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;synchronized&nbsp;BloomFilterStatistics&nbsp;statistics()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;double&nbsp;expectedFpp&nbsp;=&nbsp;bloomFilter.expectedFpp();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;long&nbsp;bitSize&nbsp;=&nbsp;BloomFilterStatistics.optimumBitSize(capacity,&nbsp;falsePositiveProbability);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;BloomFilterStatistics(falsePositiveProbability,&nbsp;expectedFpp,&nbsp;capacity,&nbsp;bitSize,&nbsp;Long.MAX_VALUE,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;BloomFilterStatistics.optimumRemainingCapacity(bitSize,&nbsp;falsePositiveProbability,&nbsp;expectedFpp));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;toString()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&amp;quot;SynchronizedBloomFilter{&amp;quot;&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;capacity=&amp;quot;&nbsp;+&nbsp;capacity&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;,&nbsp;falsePositiveProbability=&amp;quot;&nbsp;+&nbsp;falsePositiveProbability&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;'}';<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+}<br>
&lt;/ins&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunkbloomfiltercoresrcmainjavaorgforgerockbloomfilterpackageinfojava&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/package-info.java&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/package-info.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/main/java/org/forgerock/bloomfilter/package-info.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,24&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+/*<br>
+&nbsp;*&nbsp;The&nbsp;contents&nbsp;of&nbsp;this&nbsp;file&nbsp;are&nbsp;subject&nbsp;to&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;Common&nbsp;Development&nbsp;and<br>
+&nbsp;*&nbsp;Distribution&nbsp;License&nbsp;(the&nbsp;License).&nbsp;You&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the<br>
+&nbsp;*&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;You&nbsp;can&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the<br>
+&nbsp;*&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permission&nbsp;and&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;When&nbsp;distributing&nbsp;Covered&nbsp;Software,&nbsp;include&nbsp;this&nbsp;CDDL&nbsp;Header&nbsp;Notice&nbsp;in&nbsp;each&nbsp;file&nbsp;and&nbsp;include<br>
+&nbsp;*&nbsp;the&nbsp;License&nbsp;file&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;If&nbsp;applicable,&nbsp;add&nbsp;the&nbsp;following&nbsp;below&nbsp;the&nbsp;CDDL<br>
+&nbsp;*&nbsp;Header,&nbsp;with&nbsp;the&nbsp;fields&nbsp;enclosed&nbsp;by&nbsp;brackets&nbsp;[]&nbsp;replaced&nbsp;by&nbsp;your&nbsp;own&nbsp;identifying<br>
+&nbsp;*&nbsp;information:&nbsp;&amp;quot;Portions&nbsp;copyright&nbsp;[year]&nbsp;[name&nbsp;of&nbsp;copyright&nbsp;owner]&amp;quot;.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;Copyright&nbsp;2015&nbsp;ForgeRock&nbsp;AS.<br>
+&nbsp;*/<br>
+<br>
+/**<br>
+&nbsp;*&nbsp;Implementations&nbsp;of&nbsp;thread-safe,&nbsp;scalable&nbsp;and&nbsp;rolling&nbsp;Bloom&nbsp;Filters.&nbsp;These&nbsp;are&nbsp;Set-like&nbsp;data&nbsp;structures&nbsp;that&nbsp;can<br>
+&nbsp;*&nbsp;scale&nbsp;to&nbsp;very&nbsp;large&nbsp;numbers&nbsp;of&nbsp;entries&nbsp;while&nbsp;only&nbsp;using&nbsp;a&nbsp;small&nbsp;amount&nbsp;of&nbsp;memory&nbsp;(a&nbsp;few&nbsp;bits)&nbsp;per&nbsp;element.&nbsp;The<br>
+&nbsp;*&nbsp;trade-off&nbsp;is&nbsp;that&nbsp;the&nbsp;set&nbsp;membership&nbsp;operation&nbsp;may&nbsp;report&nbsp;false&nbsp;positives&nbsp;(i.e.,&nbsp;it&nbsp;may&nbsp;claim&nbsp;that&nbsp;an&nbsp;item&nbsp;is&nbsp;a<br>
+&nbsp;*&nbsp;member&nbsp;of&nbsp;the&nbsp;set&nbsp;when&nbsp;it&nbsp;isn't).&nbsp;The&nbsp;probability&nbsp;of&nbsp;false&nbsp;positives&nbsp;can&nbsp;be&nbsp;tuned&nbsp;by&nbsp;increasing&nbsp;the&nbsp;amount&nbsp;of<br>
+&nbsp;*&nbsp;memory&nbsp;used.<br>
+&nbsp;*/<br>
+package&nbsp;org.forgerock.bloomfilter;<br>
&lt;/ins&gt;&lt;span&nbsp;class=&quot;cx&quot;&gt;\&nbsp;No&nbsp;newline&nbsp;at&nbsp;end&nbsp;of&nbsp;file<br>
&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunkbloomfiltercoresrctestjavaorgforgerockbloomfilterBatchingBloomFilterTestjava&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/test/java/org/forgerock/bloomfilter/BatchingBloomFilterTest.java&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/test/java/org/forgerock/bloomfilter/BatchingBloomFilterTest.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/test/java/org/forgerock/bloomfilter/BatchingBloomFilterTest.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,95&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+/*<br>
+&nbsp;*&nbsp;The&nbsp;contents&nbsp;of&nbsp;this&nbsp;file&nbsp;are&nbsp;subject&nbsp;to&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;Common&nbsp;Development&nbsp;and<br>
+&nbsp;*&nbsp;Distribution&nbsp;License&nbsp;(the&nbsp;License).&nbsp;You&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the<br>
+&nbsp;*&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;You&nbsp;can&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the<br>
+&nbsp;*&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permission&nbsp;and&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;When&nbsp;distributing&nbsp;Covered&nbsp;Software,&nbsp;include&nbsp;this&nbsp;CDDL&nbsp;Header&nbsp;Notice&nbsp;in&nbsp;each&nbsp;file&nbsp;and&nbsp;include<br>
+&nbsp;*&nbsp;the&nbsp;License&nbsp;file&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;If&nbsp;applicable,&nbsp;add&nbsp;the&nbsp;following&nbsp;below&nbsp;the&nbsp;CDDL<br>
+&nbsp;*&nbsp;Header,&nbsp;with&nbsp;the&nbsp;fields&nbsp;enclosed&nbsp;by&nbsp;brackets&nbsp;[]&nbsp;replaced&nbsp;by&nbsp;your&nbsp;own&nbsp;identifying<br>
+&nbsp;*&nbsp;information:&nbsp;&amp;quot;Portions&nbsp;copyright&nbsp;[year]&nbsp;[name&nbsp;of&nbsp;copyright&nbsp;owner]&amp;quot;.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;Copyright&nbsp;2015&nbsp;ForgeRock&nbsp;AS.<br>
+&nbsp;*/<br>
+<br>
+package&nbsp;org.forgerock.bloomfilter;<br>
+<br>
+import&nbsp;static&nbsp;org.assertj.core.api.Assertions.assertThat;<br>
+import&nbsp;static&nbsp;org.mockito.BDDMockito.given;<br>
+import&nbsp;static&nbsp;org.mockito.Mockito.verify;<br>
+import&nbsp;static&nbsp;org.mockito.Mockito.verifyNoMoreInteractions;<br>
+<br>
+import&nbsp;org.mockito.ArgumentCaptor;<br>
+import&nbsp;org.mockito.Mock;<br>
+import&nbsp;org.mockito.MockitoAnnotations;<br>
+import&nbsp;org.testng.annotations.BeforeMethod;<br>
+import&nbsp;org.testng.annotations.Test;<br>
+<br>
+import&nbsp;java.util.Arrays;<br>
+import&nbsp;java.util.Collection;<br>
+import&nbsp;java.util.List;<br>
+<br>
+@SuppressWarnings(&amp;quot;unchecked&amp;quot;)<br>
+public&nbsp;class&nbsp;BatchingBloomFilterTest&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;final&nbsp;int&nbsp;BATCH_SIZE&nbsp;=&nbsp;5;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Mock<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;BloomFilter&amp;lt;Integer&amp;gt;&nbsp;mockDelegate;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;BatchingBloomFilter&amp;lt;Integer&amp;gt;&nbsp;testFilter;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@BeforeMethod<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;setup()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;MockitoAnnotations.initMocks(this);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;testFilter&nbsp;=&nbsp;new&nbsp;BatchingBloomFilter&amp;lt;Integer&amp;gt;(mockDelegate,&nbsp;BATCH_SIZE);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Test<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;shouldBatchWrites()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Given<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&amp;lt;Integer&amp;gt;&nbsp;expected&nbsp;=&nbsp;Arrays.asList(1,&nbsp;2,&nbsp;3,&nbsp;4,&nbsp;5);<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;When<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;x&nbsp;:&nbsp;expected)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;testFilter.add(x);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Then<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ArgumentCaptor&amp;lt;Collection&amp;gt;&nbsp;batch&nbsp;=&nbsp;ArgumentCaptor.forClass(Collection.class);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;verify(mockDelegate).addAll(batch.capture());<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assertThat(batch.getValue()).containsAll(expected);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;verifyNoMoreInteractions(mockDelegate);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Test<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;shouldIncludeBufferedElementsInMightContains()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Given<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;value&nbsp;=&nbsp;3;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;testFilter.add(value);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;verifyNoMoreInteractions(mockDelegate);&nbsp;//&nbsp;Value&nbsp;should&nbsp;still&nbsp;be&nbsp;in&nbsp;buffer<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;When<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boolean&nbsp;result&nbsp;=&nbsp;testFilter.mightContain(value);<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Then<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assertThat(result).as(&amp;quot;Buffered&nbsp;value&nbsp;not&nbsp;considered&nbsp;in&nbsp;mightContain&amp;quot;).isTrue();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Test<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;shouldIncludeNonBufferedElementsInMightContains()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Given<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;List&amp;lt;Integer&amp;gt;&nbsp;expected&nbsp;=&nbsp;Arrays.asList(1,&nbsp;2,&nbsp;3,&nbsp;4,&nbsp;5);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;testFilter.addAll(expected);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;verify(mockDelegate).addAll(expected);&nbsp;//&nbsp;Ensure&nbsp;passed&nbsp;through&nbsp;to&nbsp;BF<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;given(mockDelegate.mightContain(1)).willReturn(true);<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;When<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boolean&nbsp;result&nbsp;=&nbsp;testFilter.mightContain(1);<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Then<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assertThat(result).isTrue();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;verify(mockDelegate).mightContain(1);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+}<br>
&lt;/ins&gt;&lt;span&nbsp;class=&quot;cx&quot;&gt;\&nbsp;No&nbsp;newline&nbsp;at&nbsp;end&nbsp;of&nbsp;file<br>
&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunkbloomfiltercoresrctestjavaorgforgerockbloomfilterBloomFilterChainTestjava&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/test/java/org/forgerock/bloomfilter/BloomFilterChainTest.java&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/test/java/org/forgerock/bloomfilter/BloomFilterChainTest.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/test/java/org/forgerock/bloomfilter/BloomFilterChainTest.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,23&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+/*<br>
+&nbsp;*&nbsp;The&nbsp;contents&nbsp;of&nbsp;this&nbsp;file&nbsp;are&nbsp;subject&nbsp;to&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;Common&nbsp;Development&nbsp;and<br>
+&nbsp;*&nbsp;Distribution&nbsp;License&nbsp;(the&nbsp;License).&nbsp;You&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the<br>
+&nbsp;*&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;You&nbsp;can&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the<br>
+&nbsp;*&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permission&nbsp;and&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;When&nbsp;distributing&nbsp;Covered&nbsp;Software,&nbsp;include&nbsp;this&nbsp;CDDL&nbsp;Header&nbsp;Notice&nbsp;in&nbsp;each&nbsp;file&nbsp;and&nbsp;include<br>
+&nbsp;*&nbsp;the&nbsp;License&nbsp;file&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;If&nbsp;applicable,&nbsp;add&nbsp;the&nbsp;following&nbsp;below&nbsp;the&nbsp;CDDL<br>
+&nbsp;*&nbsp;Header,&nbsp;with&nbsp;the&nbsp;fields&nbsp;enclosed&nbsp;by&nbsp;brackets&nbsp;[]&nbsp;replaced&nbsp;by&nbsp;your&nbsp;own&nbsp;identifying<br>
+&nbsp;*&nbsp;information:&nbsp;&amp;quot;Portions&nbsp;copyright&nbsp;[year]&nbsp;[name&nbsp;of&nbsp;copyright&nbsp;owner]&amp;quot;.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;Copyright&nbsp;2015&nbsp;ForgeRock&nbsp;AS.<br>
+&nbsp;*/<br>
+<br>
+package&nbsp;org.forgerock.bloomfilter;<br>
+<br>
+import&nbsp;static&nbsp;org.testng.Assert.*;<br>
+<br>
+public&nbsp;class&nbsp;BloomFilterChainTest&nbsp;{<br>
+<br>
+}<br>
&lt;/ins&gt;&lt;span&nbsp;class=&quot;cx&quot;&gt;\&nbsp;No&nbsp;newline&nbsp;at&nbsp;end&nbsp;of&nbsp;file<br>
&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunkbloomfiltercoresrctestjavaorgforgerockbloomfilterConcurrentRollingBloomFilterTestjava&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/test/java/org/forgerock/bloomfilter/ConcurrentRollingBloomFilterTest.java&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/test/java/org/forgerock/bloomfilter/ConcurrentRollingBloomFilterTest.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/bloomfilter-core/src/test/java/org/forgerock/bloomfilter/ConcurrentRollingBloomFilterTest.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,162&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+/*<br>
+&nbsp;*&nbsp;The&nbsp;contents&nbsp;of&nbsp;this&nbsp;file&nbsp;are&nbsp;subject&nbsp;to&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;Common&nbsp;Development&nbsp;and<br>
+&nbsp;*&nbsp;Distribution&nbsp;License&nbsp;(the&nbsp;License).&nbsp;You&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the<br>
+&nbsp;*&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;You&nbsp;can&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the<br>
+&nbsp;*&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permission&nbsp;and&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;When&nbsp;distributing&nbsp;Covered&nbsp;Software,&nbsp;include&nbsp;this&nbsp;CDDL&nbsp;Header&nbsp;Notice&nbsp;in&nbsp;each&nbsp;file&nbsp;and&nbsp;include<br>
+&nbsp;*&nbsp;the&nbsp;License&nbsp;file&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;If&nbsp;applicable,&nbsp;add&nbsp;the&nbsp;following&nbsp;below&nbsp;the&nbsp;CDDL<br>
+&nbsp;*&nbsp;Header,&nbsp;with&nbsp;the&nbsp;fields&nbsp;enclosed&nbsp;by&nbsp;brackets&nbsp;[]&nbsp;replaced&nbsp;by&nbsp;your&nbsp;own&nbsp;identifying<br>
+&nbsp;*&nbsp;information:&nbsp;&amp;quot;Portions&nbsp;copyright&nbsp;[year]&nbsp;[name&nbsp;of&nbsp;copyright&nbsp;owner]&amp;quot;.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;Copyright&nbsp;2015&nbsp;ForgeRock&nbsp;AS.<br>
+&nbsp;*/<br>
+<br>
+package&nbsp;org.forgerock.bloomfilter;<br>
+<br>
+import&nbsp;org.forgerock.guava.common.hash.Funnels;<br>
+import&nbsp;org.testng.annotations.AfterMethod;<br>
+import&nbsp;org.testng.annotations.BeforeMethod;<br>
+import&nbsp;org.testng.annotations.DataProvider;<br>
+import&nbsp;org.testng.annotations.Test;<br>
+<br>
+import&nbsp;java.util.Random;<br>
+import&nbsp;java.util.concurrent.CyclicBarrier;<br>
+import&nbsp;java.util.concurrent.ExecutorService;<br>
+import&nbsp;java.util.concurrent.Executors;<br>
+<br>
+public&nbsp;class&nbsp;ConcurrentRollingBloomFilterTest&nbsp;{<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;final&nbsp;int&nbsp;NUM_THREADS&nbsp;=&nbsp;16;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;volatile&nbsp;ExecutorService&nbsp;executorService;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@BeforeMethod<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;createThreadPool()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;executorService&nbsp;=&nbsp;Executors.newFixedThreadPool(NUM_THREADS);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@AfterMethod<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;destroyThreadPool()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;executorService.shutdownNow();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@DataProvider<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;static&nbsp;Object[][]&nbsp;implementations()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;Object[][]&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ConcurrencyStrategy.COPY_ON_WRITE},<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;{ConcurrencyStrategy.SYNCHRONIZED}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;};<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Test(dataProvider&nbsp;=&nbsp;&amp;quot;implementations&amp;quot;,&nbsp;invocationCount&nbsp;=&nbsp;3,&nbsp;invocationTimeOut&nbsp;=&nbsp;60000)<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;testConcurrentWritePerformance(final&nbsp;ConcurrencyStrategy&nbsp;strategy)&nbsp;throws<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Exception&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;BloomFilter&amp;lt;String&amp;gt;&nbsp;impl&nbsp;=&nbsp;BloomFilters.&amp;lt;String&amp;gt;create(Funnels<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.unencodedCharsFunnel())<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.withConcurrencyStrategy(strategy)<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.withWriteBatchSize(500)<br>
+//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.withInitialCapacity(10)<br>
+//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.withCapacityGrowthFactor(1.2d)<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.scalable()<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.build();<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;CyclicBarrier&nbsp;barrier&nbsp;=&nbsp;new&nbsp;CyclicBarrier(NUM_THREADS&nbsp;+&nbsp;1);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&amp;lt;&nbsp;NUM_THREADS;&nbsp;++i)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;executorService.execute(new&nbsp;Runnable()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;run()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Warmup<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;barrier.await();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&amp;lt;&nbsp;50000;&nbsp;++i)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;impl.add(&amp;quot;Test&amp;quot;&nbsp;+&nbsp;i);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;barrier.await();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&amp;lt;&nbsp;50000;&nbsp;++i)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;impl.add(&amp;quot;Test&amp;quot;&nbsp;+&nbsp;i);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;barrier.await();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(Exception&nbsp;e)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;barrier.reset();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Warmup<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;barrier.await();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Start&nbsp;the&nbsp;test<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;barrier.await();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;long&nbsp;start&nbsp;=&nbsp;System.currentTimeMillis();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;barrier.await();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;long&nbsp;end&nbsp;=&nbsp;System.currentTimeMillis();<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Thread.sleep(50);<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.printf(&amp;quot;Write&nbsp;Time:&nbsp;%s&nbsp;-&amp;gt;&nbsp;%dms%n&amp;quot;,&nbsp;impl,&nbsp;(end&nbsp;-<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Test(dataProvider&nbsp;=&nbsp;&amp;quot;implementations&amp;quot;,&nbsp;invocationCount&nbsp;=&nbsp;3,&nbsp;invocationTimeOut&nbsp;=&nbsp;60000)<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;testConcurrentReadPerformance(final&nbsp;ConcurrencyStrategy&nbsp;strategy)&nbsp;throws<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Exception&nbsp;{<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;BloomFilter&amp;lt;String&amp;gt;&nbsp;impl&nbsp;=&nbsp;BloomFilters.&amp;lt;String&amp;gt;create(Funnels<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.unencodedCharsFunnel())<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.withConcurrencyStrategy(strategy)<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.withWriteBatchSize(1000)<br>
+//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.withInitialCapacity(10)<br>
+//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.withCapacityGrowthFactor(1.2d)<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.scalable()<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.build();<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Given<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;Random&nbsp;random&nbsp;=&nbsp;new&nbsp;Random();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&amp;lt;&nbsp;50000;&nbsp;++i)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;impl.add(&amp;quot;Test&amp;quot;&nbsp;+&nbsp;random.nextInt(100000));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;CyclicBarrier&nbsp;barrier&nbsp;=&nbsp;new&nbsp;CyclicBarrier(NUM_THREADS&nbsp;+&nbsp;1);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&amp;lt;&nbsp;NUM_THREADS;&nbsp;++i)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;executorService.execute(new&nbsp;Runnable()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;run()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Warmup<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;barrier.await();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&amp;lt;&nbsp;50000;&nbsp;++i)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;impl.mightContain(&amp;quot;Test&amp;quot;&nbsp;+&nbsp;i);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;barrier.await();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&amp;lt;&nbsp;50000;&nbsp;++i)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;impl.mightContain(&amp;quot;Test&amp;quot;&nbsp;+&nbsp;i);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;barrier.await();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(Exception&nbsp;e)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;e.printStackTrace();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Warmup<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;barrier.await();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;Start&nbsp;the&nbsp;test<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;barrier.await();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;long&nbsp;start&nbsp;=&nbsp;System.currentTimeMillis();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;barrier.await();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;long&nbsp;end&nbsp;=&nbsp;System.currentTimeMillis();<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.printf(&amp;quot;Read&nbsp;Time:&nbsp;%s&nbsp;-&amp;gt;&nbsp;%dms%n&amp;quot;,&nbsp;impl,&nbsp;(end&nbsp;-<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;start));<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+<br>
+}<br>
&lt;/ins&gt;&lt;span&nbsp;class=&quot;cx&quot;&gt;\&nbsp;No&nbsp;newline&nbsp;at&nbsp;end&nbsp;of&nbsp;file<br>
&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunkbloomfiltermonitoringpomxml&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/bloomfilter-monitoring/pom.xml&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/bloomfilter-monitoring/pom.xml&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/bloomfilter-monitoring/pom.xml&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,42&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+&amp;lt;?xml&nbsp;version=&amp;quot;1.0&amp;quot;&nbsp;encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;<br>
+&amp;lt;!--<br>
+&nbsp;&nbsp;~&nbsp;The&nbsp;contents&nbsp;of&nbsp;this&nbsp;file&nbsp;are&nbsp;subject&nbsp;to&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;Common&nbsp;Development&nbsp;and<br>
+&nbsp;&nbsp;~&nbsp;Distribution&nbsp;License&nbsp;(the&nbsp;License).&nbsp;You&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the<br>
+&nbsp;&nbsp;~&nbsp;License.<br>
+&nbsp;&nbsp;~<br>
+&nbsp;&nbsp;~&nbsp;You&nbsp;can&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the<br>
+&nbsp;&nbsp;~&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permission&nbsp;and&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.<br>
+&nbsp;&nbsp;~<br>
+&nbsp;&nbsp;~&nbsp;When&nbsp;distributing&nbsp;Covered&nbsp;Software,&nbsp;include&nbsp;this&nbsp;CDDL&nbsp;Header&nbsp;Notice&nbsp;in&nbsp;each&nbsp;file&nbsp;and&nbsp;include<br>
+&nbsp;&nbsp;~&nbsp;the&nbsp;License&nbsp;file&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;If&nbsp;applicable,&nbsp;add&nbsp;the&nbsp;following&nbsp;below&nbsp;the&nbsp;CDDL<br>
+&nbsp;&nbsp;~&nbsp;Header,&nbsp;with&nbsp;the&nbsp;fields&nbsp;enclosed&nbsp;by&nbsp;brackets&nbsp;[]&nbsp;replaced&nbsp;by&nbsp;your&nbsp;own&nbsp;identifying<br>
+&nbsp;&nbsp;~&nbsp;information:&nbsp;&amp;quot;Portions&nbsp;copyright&nbsp;[year]&nbsp;[name&nbsp;of&nbsp;copyright&nbsp;owner]&amp;quot;.<br>
+&nbsp;&nbsp;~<br>
+&nbsp;&nbsp;~&nbsp;Copyright&nbsp;2015&nbsp;ForgeRock&nbsp;AS.<br>
+&nbsp;&nbsp;--&amp;gt;<br>
+<br>
+&amp;lt;project&nbsp;xmlns=&amp;quot;http://maven.apache.org/POM/4.0.0&amp;quot;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xsi:schemaLocation=&amp;quot;http://maven.apache.org/POM/4.0.0&nbsp;http://maven.apache.org/xsd/maven-4.0.0.xsd&amp;quot;&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;parent&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;artifactId&amp;gt;forgerock-bloomfilter&amp;lt;/artifactId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;groupId&amp;gt;org.forgerock.commons&amp;lt;/groupId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;version&amp;gt;1.0-SNAPSHOT&amp;lt;/version&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/parent&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;artifactId&amp;gt;forgerock-bloomfilter-monitoring&amp;lt;/artifactId&amp;gt;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;dependencies&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;groupId&amp;gt;org.forgerock.commons&amp;lt;/groupId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;artifactId&amp;gt;forgerock-bloomfilter-core&amp;lt;/artifactId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;version&amp;gt;${project.version}&amp;lt;/version&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;groupId&amp;gt;org.hdrhistogram&amp;lt;/groupId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;artifactId&amp;gt;HdrHistogram&amp;lt;/artifactId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/dependencies&amp;gt;<br>
+<br>
+&amp;lt;/project&amp;gt;<br>
&lt;/ins&gt;&lt;span&nbsp;class=&quot;cx&quot;&gt;\&nbsp;No&nbsp;newline&nbsp;at&nbsp;end&nbsp;of&nbsp;file<br>
&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunkbloomfiltermonitoringsrcmainjavaorgforgerockbloomfiltermonitoringBloomFilterMXBeanjava&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/main/java/org/forgerock/bloomfilter/monitoring/BloomFilterMXBean.java&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/main/java/org/forgerock/bloomfilter/monitoring/BloomFilterMXBean.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/main/java/org/forgerock/bloomfilter/monitoring/BloomFilterMXBean.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,36&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+/*<br>
+&nbsp;*&nbsp;The&nbsp;contents&nbsp;of&nbsp;this&nbsp;file&nbsp;are&nbsp;subject&nbsp;to&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;Common&nbsp;Development&nbsp;and<br>
+&nbsp;*&nbsp;Distribution&nbsp;License&nbsp;(the&nbsp;License).&nbsp;You&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the<br>
+&nbsp;*&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;You&nbsp;can&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the<br>
+&nbsp;*&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permission&nbsp;and&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;When&nbsp;distributing&nbsp;Covered&nbsp;Software,&nbsp;include&nbsp;this&nbsp;CDDL&nbsp;Header&nbsp;Notice&nbsp;in&nbsp;each&nbsp;file&nbsp;and&nbsp;include<br>
+&nbsp;*&nbsp;the&nbsp;License&nbsp;file&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;If&nbsp;applicable,&nbsp;add&nbsp;the&nbsp;following&nbsp;below&nbsp;the&nbsp;CDDL<br>
+&nbsp;*&nbsp;Header,&nbsp;with&nbsp;the&nbsp;fields&nbsp;enclosed&nbsp;by&nbsp;brackets&nbsp;[]&nbsp;replaced&nbsp;by&nbsp;your&nbsp;own&nbsp;identifying<br>
+&nbsp;*&nbsp;information:&nbsp;&amp;quot;Portions&nbsp;copyright&nbsp;[year]&nbsp;[name&nbsp;of&nbsp;copyright&nbsp;owner]&amp;quot;.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;Copyright&nbsp;2015&nbsp;ForgeRock&nbsp;AS.<br>
+&nbsp;*/<br>
+<br>
+package&nbsp;org.forgerock.bloomfilter.monitoring;<br>
+<br>
+import&nbsp;org.forgerock.bloomfilter.BloomFilterStatistics;<br>
+<br>
+import&nbsp;javax.management.MXBean;<br>
+<br>
+/**<br>
+&nbsp;*&nbsp;Operations&nbsp;for&nbsp;monitoring&nbsp;and&nbsp;management&nbsp;of&nbsp;Bloom&nbsp;Filter&nbsp;implementations.<br>
+&nbsp;*/<br>
+@MXBean<br>
+public&nbsp;interface&nbsp;BloomFilterMXBean&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Basic&nbsp;statistics&nbsp;of&nbsp;the&nbsp;current&nbsp;state&nbsp;of&nbsp;the&nbsp;bloom&nbsp;filter.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;BloomFilterStatistics&nbsp;getBloomFilterStatistics();<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;MethodCallStatistics&nbsp;getAddStatistics();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;MethodCallStatistics&nbsp;getAllAllStatistics();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;MethodCallStatistics&nbsp;getMightContainStatistics();<br>
+}<br>
&lt;/ins&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunkbloomfiltermonitoringsrcmainjavaorgforgerockbloomfiltermonitoringBloomFilterMonitorjava&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/main/java/org/forgerock/bloomfilter/monitoring/BloomFilterMonitor.java&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/main/java/org/forgerock/bloomfilter/monitoring/BloomFilterMonitor.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/main/java/org/forgerock/bloomfilter/monitoring/BloomFilterMonitor.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,151&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+/*<br>
+&nbsp;*&nbsp;The&nbsp;contents&nbsp;of&nbsp;this&nbsp;file&nbsp;are&nbsp;subject&nbsp;to&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;Common&nbsp;Development&nbsp;and<br>
+&nbsp;*&nbsp;Distribution&nbsp;License&nbsp;(the&nbsp;License).&nbsp;You&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the<br>
+&nbsp;*&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;You&nbsp;can&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the<br>
+&nbsp;*&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permission&nbsp;and&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;When&nbsp;distributing&nbsp;Covered&nbsp;Software,&nbsp;include&nbsp;this&nbsp;CDDL&nbsp;Header&nbsp;Notice&nbsp;in&nbsp;each&nbsp;file&nbsp;and&nbsp;include<br>
+&nbsp;*&nbsp;the&nbsp;License&nbsp;file&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;If&nbsp;applicable,&nbsp;add&nbsp;the&nbsp;following&nbsp;below&nbsp;the&nbsp;CDDL<br>
+&nbsp;*&nbsp;Header,&nbsp;with&nbsp;the&nbsp;fields&nbsp;enclosed&nbsp;by&nbsp;brackets&nbsp;[]&nbsp;replaced&nbsp;by&nbsp;your&nbsp;own&nbsp;identifying<br>
+&nbsp;*&nbsp;information:&nbsp;&amp;quot;Portions&nbsp;copyright&nbsp;[year]&nbsp;[name&nbsp;of&nbsp;copyright&nbsp;owner]&amp;quot;.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;Copyright&nbsp;2015&nbsp;ForgeRock&nbsp;AS.<br>
+&nbsp;*/<br>
+<br>
+package&nbsp;org.forgerock.bloomfilter.monitoring;<br>
+<br>
+import&nbsp;org.HdrHistogram.AtomicHistogram;<br>
+import&nbsp;org.forgerock.bloomfilter.BloomFilter;<br>
+import&nbsp;org.forgerock.bloomfilter.BloomFilterStatistics;<br>
+<br>
+import&nbsp;javax.management.InstanceAlreadyExistsException;<br>
+import&nbsp;javax.management.MBeanRegistrationException;<br>
+import&nbsp;javax.management.MBeanServer;<br>
+import&nbsp;javax.management.MalformedObjectNameException;<br>
+import&nbsp;javax.management.NotCompliantMBeanException;<br>
+import&nbsp;javax.management.ObjectInstance;<br>
+import&nbsp;javax.management.ObjectName;<br>
+import&nbsp;java.io.ByteArrayOutputStream;<br>
+import&nbsp;java.io.PrintStream;<br>
+import&nbsp;java.io.UnsupportedEncodingException;<br>
+import&nbsp;java.lang.management.ManagementFactory;<br>
+import&nbsp;java.util.Collection;<br>
+<br>
+/**<br>
+&nbsp;*&nbsp;Generic&nbsp;Bloom&nbsp;Filter&nbsp;JMX&nbsp;monitoring.<br>
+&nbsp;*/<br>
+public&nbsp;final&nbsp;class&nbsp;BloomFilterMonitor&amp;lt;T&amp;gt;&nbsp;implements&nbsp;BloomFilterMXBean,&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;100,000&nbsp;microseconds&nbsp;largest&nbsp;expected&nbsp;timing&nbsp;(100ms)<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;final&nbsp;long&nbsp;LONGEST_EXPECTED_RESPONSE_TIME_MICROS&nbsp;=&nbsp;100000L;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;//&nbsp;3&nbsp;significant&nbsp;digits&nbsp;=&nbsp;approx.&nbsp;65kB&nbsp;storage&nbsp;per&nbsp;histogram<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;static&nbsp;final&nbsp;int&nbsp;SIGNIFICANT_DIGITS&nbsp;=&nbsp;3;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;delegate;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;AtomicHistogram&nbsp;addStats&nbsp;=&nbsp;new&nbsp;AtomicHistogram(LONGEST_EXPECTED_RESPONSE_TIME_MICROS,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SIGNIFICANT_DIGITS);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;AtomicHistogram&nbsp;addAllStats&nbsp;=&nbsp;new&nbsp;AtomicHistogram(LONGEST_EXPECTED_RESPONSE_TIME_MICROS,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SIGNIFICANT_DIGITS);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;AtomicHistogram&nbsp;mightContainStats&nbsp;=&nbsp;new&nbsp;AtomicHistogram(LONGEST_EXPECTED_RESPONSE_TIME_MICROS,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;SIGNIFICANT_DIGITS);<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;BloomFilterMonitor(final&nbsp;BloomFilter&amp;lt;T&amp;gt;&nbsp;delegate)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.delegate&nbsp;=&nbsp;delegate;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;ObjectInstance&nbsp;register(final&nbsp;MBeanServer&nbsp;mBeanServer,&nbsp;final&nbsp;String&nbsp;name)<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throws&nbsp;InstanceAlreadyExistsException,&nbsp;MBeanRegistrationException,&nbsp;MalformedObjectNameException&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;ObjectName&nbsp;objectName&nbsp;=&nbsp;new&nbsp;ObjectName(name);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;mBeanServer.registerMBean(this,&nbsp;objectName);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(NotCompliantMBeanException&nbsp;ex)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;IllegalStateException(ex);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;register(final&nbsp;MBeanServer&nbsp;mBeanServer)<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throws&nbsp;InstanceAlreadyExistsException,&nbsp;MBeanRegistrationException{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.register(mBeanServer,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;delegate.getClass().getPackage().getName()&nbsp;+&nbsp;&amp;quot;:type=&amp;quot;&nbsp;+&nbsp;delegate.getClass().getSimpleName());<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(MalformedObjectNameException&nbsp;ex)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;IllegalStateException(ex);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;register()&nbsp;throws&nbsp;InstanceAlreadyExistsException,&nbsp;MBeanRegistrationException&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.register(ManagementFactory.getPlatformMBeanServer());<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;boolean&nbsp;add(final&nbsp;T&nbsp;element)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;long&nbsp;startTime&nbsp;=&nbsp;System.nanoTime();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;delegate.add(element);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;finally&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addStats.recordValue((System.nanoTime()&nbsp;-&nbsp;startTime)&nbsp;/&nbsp;1000L);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;boolean&nbsp;addAll(final&nbsp;Collection&amp;lt;?&nbsp;extends&nbsp;T&amp;gt;&nbsp;elements)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;long&nbsp;startTime&nbsp;=&nbsp;System.nanoTime();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;delegate.addAll(elements);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;finally&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;addAllStats.recordValue((System.nanoTime()&nbsp;-&nbsp;startTime)&nbsp;/&nbsp;1000L);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;boolean&nbsp;mightContain(final&nbsp;T&nbsp;element)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;long&nbsp;startTime&nbsp;=&nbsp;System.nanoTime();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;delegate.mightContain(element);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;finally&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mightContainStats.recordValue((System.nanoTime()&nbsp;-&nbsp;startTime)&nbsp;/&nbsp;1000L);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;BloomFilterStatistics&nbsp;statistics()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;delegate.statistics();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;BloomFilterStatistics&nbsp;getBloomFilterStatistics()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;statistics();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;MethodCallStatistics&nbsp;getAddStatistics()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;summarize(addStats.copy());<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;MethodCallStatistics&nbsp;getAllAllStatistics()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;summarize(addAllStats.copy());<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;MethodCallStatistics&nbsp;getMightContainStatistics()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;summarize(mightContainStats.copy());<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;MethodCallStatistics&nbsp;summarize(final&nbsp;AtomicHistogram&nbsp;histogram)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;ByteArrayOutputStream&nbsp;log&nbsp;=&nbsp;new&nbsp;ByteArrayOutputStream();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;try&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;histogram.outputPercentileDistribution(new&nbsp;PrintStream(log,&nbsp;true,&nbsp;&amp;quot;UTF-8&amp;quot;),&nbsp;1.0d);<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;new&nbsp;MethodCallStatistics(histogram.getTotalCount(),<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;histogram.getMinValue(),&nbsp;histogram.getMaxValue(),<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;histogram.getValueAtPercentile(50.0d),&nbsp;histogram.getValueAtPercentile(95.0d),<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;histogram.getMean(),&nbsp;histogram.getStdDeviation(),<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;log.toString(&amp;quot;UTF-8&amp;quot;));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}&nbsp;catch&nbsp;(UnsupportedEncodingException&nbsp;ex)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;IllegalStateException(&amp;quot;Broken&nbsp;JVM:&nbsp;UTF-8&nbsp;unknown&nbsp;encoding!&amp;quot;);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+}<br>
&lt;/ins&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunkbloomfiltermonitoringsrcmainjavaorgforgerockbloomfiltermonitoringMethodCallStatisticsjava&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/main/java/org/forgerock/bloomfilter/monitoring/MethodCallStatistics.java&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/main/java/org/forgerock/bloomfilter/monitoring/MethodCallStatistics.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/main/java/org/forgerock/bloomfilter/monitoring/MethodCallStatistics.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,158&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+/*<br>
+&nbsp;*&nbsp;The&nbsp;contents&nbsp;of&nbsp;this&nbsp;file&nbsp;are&nbsp;subject&nbsp;to&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;Common&nbsp;Development&nbsp;and<br>
+&nbsp;*&nbsp;Distribution&nbsp;License&nbsp;(the&nbsp;License).&nbsp;You&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the<br>
+&nbsp;*&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;You&nbsp;can&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the<br>
+&nbsp;*&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permission&nbsp;and&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;When&nbsp;distributing&nbsp;Covered&nbsp;Software,&nbsp;include&nbsp;this&nbsp;CDDL&nbsp;Header&nbsp;Notice&nbsp;in&nbsp;each&nbsp;file&nbsp;and&nbsp;include<br>
+&nbsp;*&nbsp;the&nbsp;License&nbsp;file&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;If&nbsp;applicable,&nbsp;add&nbsp;the&nbsp;following&nbsp;below&nbsp;the&nbsp;CDDL<br>
+&nbsp;*&nbsp;Header,&nbsp;with&nbsp;the&nbsp;fields&nbsp;enclosed&nbsp;by&nbsp;brackets&nbsp;[]&nbsp;replaced&nbsp;by&nbsp;your&nbsp;own&nbsp;identifying<br>
+&nbsp;*&nbsp;information:&nbsp;&amp;quot;Portions&nbsp;copyright&nbsp;[year]&nbsp;[name&nbsp;of&nbsp;copyright&nbsp;owner]&amp;quot;.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;Copyright&nbsp;2015&nbsp;ForgeRock&nbsp;AS.<br>
+&nbsp;*/<br>
+<br>
+package&nbsp;org.forgerock.bloomfilter.monitoring;<br>
+<br>
+import&nbsp;java.beans.ConstructorProperties;<br>
+<br>
+/**<br>
+&nbsp;*&nbsp;Holds&nbsp;statistics&nbsp;on&nbsp;method&nbsp;call&nbsp;timings&nbsp;and&nbsp;counts&nbsp;for&nbsp;performance&nbsp;monitoring&nbsp;purposes.&nbsp;All&nbsp;timings&nbsp;are&nbsp;given&nbsp;in<br>
+&nbsp;*&nbsp;microseconds&nbsp;unless&nbsp;otherwise&nbsp;stated.<br>
+&nbsp;*/<br>
+public&nbsp;final&nbsp;class&nbsp;MethodCallStatistics&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;long&nbsp;callCount;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;long&nbsp;minimumTime;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;long&nbsp;maximumTime;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;long&nbsp;medianTime;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;long&nbsp;ninetyFifthPercentile;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;double&nbsp;meanTime;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;double&nbsp;stdDeviationTime;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;final&nbsp;String&nbsp;percentileLog;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@ConstructorProperties({&amp;quot;callCount&amp;quot;,&nbsp;&amp;quot;minimumTime&amp;quot;,&nbsp;&amp;quot;maximumTime&amp;quot;,&nbsp;&amp;quot;medianTime&amp;quot;,&nbsp;&amp;quot;ninetyFifthPercentile&amp;quot;,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;meanTime&amp;quot;,&nbsp;&amp;quot;stdDeviationTime&amp;quot;,&nbsp;&amp;quot;percentileLog&amp;quot;})<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;MethodCallStatistics(final&nbsp;long&nbsp;callCount,&nbsp;final&nbsp;long&nbsp;minimumTime,&nbsp;final&nbsp;long&nbsp;maximumTime,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;long&nbsp;medianTime,&nbsp;final&nbsp;long&nbsp;ninetyFifthPercentile,&nbsp;final&nbsp;double&nbsp;meanTime,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;double&nbsp;stdDeviationTime,&nbsp;final&nbsp;String&nbsp;percentileLog)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.callCount&nbsp;=&nbsp;callCount;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.minimumTime&nbsp;=&nbsp;minimumTime;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.maximumTime&nbsp;=&nbsp;maximumTime;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.medianTime&nbsp;=&nbsp;medianTime;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.ninetyFifthPercentile&nbsp;=&nbsp;ninetyFifthPercentile;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.meanTime&nbsp;=&nbsp;meanTime;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.stdDeviationTime&nbsp;=&nbsp;stdDeviationTime;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.percentileLog&nbsp;=&nbsp;percentileLog;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Total&nbsp;number&nbsp;of&nbsp;times&nbsp;that&nbsp;this&nbsp;method&nbsp;has&nbsp;been&nbsp;called.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;long&nbsp;getCallCount()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;callCount;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;minimum&nbsp;time&nbsp;taken&nbsp;to&nbsp;execute&nbsp;this&nbsp;method.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;long&nbsp;getMinimumTime()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;minimumTime;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;maximum&nbsp;time&nbsp;taken&nbsp;to&nbsp;execute&nbsp;this&nbsp;method.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;long&nbsp;getMaximumTime()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;maximumTime;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;median&nbsp;time&nbsp;taken&nbsp;to&nbsp;execute&nbsp;this&nbsp;method.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;long&nbsp;getMedianTime()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;medianTime;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;time&nbsp;taken&nbsp;to&nbsp;execute&nbsp;95%&nbsp;of&nbsp;all&nbsp;calls&nbsp;to&nbsp;this&nbsp;method.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;long&nbsp;getNinetyFifthPercentile()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;ninetyFifthPercentile;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;average&nbsp;(mean)&nbsp;time&nbsp;taken&nbsp;to&nbsp;execute&nbsp;this&nbsp;method.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;double&nbsp;getMeanTime()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;meanTime;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;The&nbsp;standard&nbsp;deviation&nbsp;of&nbsp;all&nbsp;call&nbsp;timings&nbsp;for&nbsp;this&nbsp;method.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;double&nbsp;getStdDeviationTime()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;stdDeviationTime;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;/**<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;A&nbsp;dump&nbsp;of&nbsp;the&nbsp;overall&nbsp;percentile&nbsp;distribution&nbsp;data&nbsp;in&nbsp;HdrHistogram&nbsp;log&nbsp;format.&nbsp;This&nbsp;can&nbsp;be&nbsp;fed&nbsp;into&nbsp;the<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;histogram&nbsp;analyzer&nbsp;service&nbsp;at&nbsp;&amp;lt;a&nbsp;href=&amp;quot;http://hdrhistogram.github.io/HdrHistogram/plotFiles.html&amp;quot;&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://hdrhistogram.github.io/HdrHistogram/plotFiles.html&amp;lt;/a&amp;gt;.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;*/<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;getPercentileLog()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;percentileLog;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;boolean&nbsp;equals(final&nbsp;Object&nbsp;o)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(this&nbsp;==&nbsp;o)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;true;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(o&nbsp;==&nbsp;null&nbsp;||&nbsp;getClass()&nbsp;!=&nbsp;o.getClass())&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;false;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;MethodCallStatistics&nbsp;that&nbsp;=&nbsp;(MethodCallStatistics)&nbsp;o;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;callCount&nbsp;==&nbsp;that.callCount<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;amp;&amp;amp;&nbsp;maximumTime&nbsp;==&nbsp;that.maximumTime<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;amp;&amp;amp;&nbsp;Double.compare(that.meanTime,&nbsp;meanTime)&nbsp;==&nbsp;0<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;amp;&amp;amp;&nbsp;medianTime&nbsp;==&nbsp;that.medianTime<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;amp;&amp;amp;&nbsp;minimumTime&nbsp;==&nbsp;that.minimumTime<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;amp;&amp;amp;&nbsp;ninetyFifthPercentile&nbsp;==&nbsp;that.ninetyFifthPercentile<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;amp;&amp;amp;&nbsp;Double.compare(that.stdDeviationTime,&nbsp;stdDeviationTime)&nbsp;==&nbsp;0<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;amp;&amp;amp;&nbsp;percentileLog.equals(that.percentileLog);<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;int&nbsp;hashCode()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;int&nbsp;result;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;long&nbsp;temp;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;(int)&nbsp;(callCount&nbsp;^&nbsp;(callCount&nbsp;&amp;gt;&amp;gt;&amp;gt;&nbsp;32));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;31&nbsp;*&nbsp;result&nbsp;+&nbsp;(int)&nbsp;(minimumTime&nbsp;^&nbsp;(minimumTime&nbsp;&amp;gt;&amp;gt;&amp;gt;&nbsp;32));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;31&nbsp;*&nbsp;result&nbsp;+&nbsp;(int)&nbsp;(maximumTime&nbsp;^&nbsp;(maximumTime&nbsp;&amp;gt;&amp;gt;&amp;gt;&nbsp;32));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;31&nbsp;*&nbsp;result&nbsp;+&nbsp;(int)&nbsp;(medianTime&nbsp;^&nbsp;(medianTime&nbsp;&amp;gt;&amp;gt;&amp;gt;&nbsp;32));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;31&nbsp;*&nbsp;result&nbsp;+&nbsp;(int)&nbsp;(ninetyFifthPercentile&nbsp;^&nbsp;(ninetyFifthPercentile&nbsp;&amp;gt;&amp;gt;&amp;gt;&nbsp;32));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;temp&nbsp;=&nbsp;Double.doubleToLongBits(meanTime);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;31&nbsp;*&nbsp;result&nbsp;+&nbsp;(int)&nbsp;(temp&nbsp;^&nbsp;(temp&nbsp;&amp;gt;&amp;gt;&amp;gt;&nbsp;32));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;temp&nbsp;=&nbsp;Double.doubleToLongBits(stdDeviationTime);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;31&nbsp;*&nbsp;result&nbsp;+&nbsp;(int)&nbsp;(temp&nbsp;^&nbsp;(temp&nbsp;&amp;gt;&amp;gt;&amp;gt;&nbsp;32));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;=&nbsp;31&nbsp;*&nbsp;result&nbsp;+&nbsp;percentileLog.hashCode();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;result;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;String&nbsp;toString()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;&amp;quot;{&nbsp;\&amp;quot;callCount\&amp;quot;:&nbsp;&amp;quot;&nbsp;+&nbsp;callCount&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;,&nbsp;\&amp;quot;minimumTime\&amp;quot;:&nbsp;&amp;quot;&nbsp;+&nbsp;minimumTime&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;,&nbsp;\&amp;quot;maximumTime\&amp;quot;:&nbsp;&amp;quot;&nbsp;+&nbsp;maximumTime&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;,&nbsp;\&amp;quot;medianTime\&amp;quot;:&nbsp;&amp;quot;&nbsp;+&nbsp;medianTime&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;,&nbsp;\&amp;quot;ninetyFifthPercentile\&amp;quot;:&nbsp;&amp;quot;&nbsp;+&nbsp;ninetyFifthPercentile&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;,&nbsp;\&amp;quot;meanTime\&amp;quot;:&nbsp;&amp;quot;&nbsp;+&nbsp;meanTime&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;,&nbsp;\&amp;quot;stdDeviationTime\&amp;quot;:&nbsp;&amp;quot;&nbsp;+&nbsp;stdDeviationTime&nbsp;+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;&nbsp;}&amp;quot;;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+}<br>
&lt;/ins&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunkbloomfiltermonitoringsrctestjavaorgforgerockbloomfiltermonitoringBloomFilterMonitorTestjava&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/test/java/org/forgerock/bloomfilter/monitoring/BloomFilterMonitorTest.java&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/test/java/org/forgerock/bloomfilter/monitoring/BloomFilterMonitorTest.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/bloomfilter-monitoring/src/test/java/org/forgerock/bloomfilter/monitoring/BloomFilterMonitorTest.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,86&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+/*<br>
+&nbsp;*&nbsp;The&nbsp;contents&nbsp;of&nbsp;this&nbsp;file&nbsp;are&nbsp;subject&nbsp;to&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;Common&nbsp;Development&nbsp;and<br>
+&nbsp;*&nbsp;Distribution&nbsp;License&nbsp;(the&nbsp;License).&nbsp;You&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the<br>
+&nbsp;*&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;You&nbsp;can&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the<br>
+&nbsp;*&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permission&nbsp;and&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;When&nbsp;distributing&nbsp;Covered&nbsp;Software,&nbsp;include&nbsp;this&nbsp;CDDL&nbsp;Header&nbsp;Notice&nbsp;in&nbsp;each&nbsp;file&nbsp;and&nbsp;include<br>
+&nbsp;*&nbsp;the&nbsp;License&nbsp;file&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;If&nbsp;applicable,&nbsp;add&nbsp;the&nbsp;following&nbsp;below&nbsp;the&nbsp;CDDL<br>
+&nbsp;*&nbsp;Header,&nbsp;with&nbsp;the&nbsp;fields&nbsp;enclosed&nbsp;by&nbsp;brackets&nbsp;[]&nbsp;replaced&nbsp;by&nbsp;your&nbsp;own&nbsp;identifying<br>
+&nbsp;*&nbsp;information:&nbsp;&amp;quot;Portions&nbsp;copyright&nbsp;[year]&nbsp;[name&nbsp;of&nbsp;copyright&nbsp;owner]&amp;quot;.<br>
+&nbsp;*<br>
+&nbsp;*&nbsp;Copyright&nbsp;2015&nbsp;ForgeRock&nbsp;AS.<br>
+&nbsp;*/<br>
+<br>
+package&nbsp;org.forgerock.bloomfilter.monitoring;<br>
+<br>
+import&nbsp;static&nbsp;junit.framework.Assert.assertTrue;<br>
+<br>
+import&nbsp;org.forgerock.bloomfilter.BloomFilter;<br>
+import&nbsp;org.forgerock.bloomfilter.BloomFilters;<br>
+import&nbsp;org.forgerock.bloomfilter.ConcurrencyStrategy;<br>
+import&nbsp;org.forgerock.guava.common.hash.Funnels;<br>
+import&nbsp;org.testng.annotations.AfterMethod;<br>
+import&nbsp;org.testng.annotations.BeforeMethod;<br>
+import&nbsp;org.testng.annotations.Test;<br>
+<br>
+import&nbsp;java.util.Random;<br>
+import&nbsp;java.util.concurrent.CountDownLatch;<br>
+import&nbsp;java.util.concurrent.ExecutorService;<br>
+import&nbsp;java.util.concurrent.Executors;<br>
+<br>
+public&nbsp;class&nbsp;BloomFilterMonitorTest&nbsp;{<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;BloomFilterMonitor&amp;lt;Integer&amp;gt;&nbsp;testMonitor;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;ExecutorService&nbsp;threadPool;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@BeforeMethod<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;createTestObject()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;BloomFilter&amp;lt;Integer&amp;gt;&nbsp;bf&nbsp;=&nbsp;BloomFilters.&amp;lt;Integer&amp;gt;create(Funnels.integerFunnel())<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.withConcurrencyStrategy(ConcurrencyStrategy.COPY_ON_WRITE)<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.withCapacityGrowthFactor(2.0D)<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.withWriteBatchSize(100)<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;.build();<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;testMonitor&nbsp;=&nbsp;new&nbsp;BloomFilterMonitor&amp;lt;Integer&amp;gt;(bf);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;threadPool&nbsp;=&nbsp;Executors.newFixedThreadPool(16);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@AfterMethod<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;printStats()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;threadPool.shutdownNow();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&amp;quot;Add&nbsp;Stats:&amp;quot;);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(testMonitor.getAddStatistics());<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&amp;quot;MightContain&nbsp;Stats:&amp;quot;);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(testMonitor.getMightContainStatistics());<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(&amp;quot;Bucket&nbsp;stats:&amp;quot;);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.println(testMonitor.getBloomFilterStatistics());<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;System.out.flush();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;@Test<br>
+&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;testConcurrency()&nbsp;throws&nbsp;Exception&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;CountDownLatch&nbsp;latch&nbsp;=&nbsp;new&nbsp;CountDownLatch(16);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&amp;lt;&nbsp;16;&nbsp;++i)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;threadPool.execute(new&nbsp;Runnable()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;@Override<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;void&nbsp;run()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;Random&nbsp;random&nbsp;=&nbsp;new&nbsp;Random();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;(int&nbsp;i&nbsp;=&nbsp;0;&nbsp;i&nbsp;&amp;lt;&nbsp;50000;&nbsp;++i)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;int&nbsp;r&nbsp;=&nbsp;random.nextInt();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(i&nbsp;%&nbsp;50&nbsp;==&nbsp;0)&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;testMonitor.add(r);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;assertTrue(testMonitor.mightContain(r));<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;testMonitor.mightContain(r);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;latch.countDown();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;});<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;latch.await();<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+}<br>
&lt;/ins&gt;&lt;span&nbsp;class=&quot;cx&quot;&gt;\&nbsp;No&nbsp;newline&nbsp;at&nbsp;end&nbsp;of&nbsp;file<br>
&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunklegalBSD3clausetxt&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/legal/BSD-3-clause.txt&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/legal/BSD-3-clause.txt&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/legal/BSD-3-clause.txt&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,22&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+<br>
+Redistribution&nbsp;and&nbsp;use&nbsp;in&nbsp;source&nbsp;and&nbsp;binary&nbsp;forms,&nbsp;with&nbsp;or&nbsp;without<br>
+modification,&nbsp;are&nbsp;permitted&nbsp;provided&nbsp;that&nbsp;the&nbsp;following&nbsp;conditions&nbsp;are&nbsp;met:<br>
+&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Redistributions&nbsp;of&nbsp;source&nbsp;code&nbsp;must&nbsp;retain&nbsp;the&nbsp;above&nbsp;copyright<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;notice,&nbsp;this&nbsp;list&nbsp;of&nbsp;conditions&nbsp;and&nbsp;the&nbsp;following&nbsp;disclaimer.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Redistributions&nbsp;in&nbsp;binary&nbsp;form&nbsp;must&nbsp;reproduce&nbsp;the&nbsp;above&nbsp;copyright<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;notice,&nbsp;this&nbsp;list&nbsp;of&nbsp;conditions&nbsp;and&nbsp;the&nbsp;following&nbsp;disclaimer&nbsp;in&nbsp;the<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;documentation&nbsp;and/or&nbsp;other&nbsp;materials&nbsp;provided&nbsp;with&nbsp;the&nbsp;distribution.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;*&nbsp;Neither&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;&amp;lt;organization&amp;gt;&nbsp;nor&nbsp;the<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;names&nbsp;of&nbsp;its&nbsp;contributors&nbsp;may&nbsp;be&nbsp;used&nbsp;to&nbsp;endorse&nbsp;or&nbsp;promote&nbsp;products<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;derived&nbsp;from&nbsp;this&nbsp;software&nbsp;without&nbsp;specific&nbsp;prior&nbsp;written&nbsp;permission.<br>
+<br>
+THIS&nbsp;SOFTWARE&nbsp;IS&nbsp;PROVIDED&nbsp;BY&nbsp;THE&nbsp;COPYRIGHT&nbsp;HOLDERS&nbsp;AND&nbsp;CONTRIBUTORS&nbsp;&amp;quot;AS&nbsp;IS&amp;quot;&nbsp;AND<br>
+ANY&nbsp;EXPRESS&nbsp;OR&nbsp;IMPLIED&nbsp;WARRANTIES,&nbsp;INCLUDING,&nbsp;BUT&nbsp;NOT&nbsp;LIMITED&nbsp;TO,&nbsp;THE&nbsp;IMPLIED<br>
+WARRANTIES&nbsp;OF&nbsp;MERCHANTABILITY&nbsp;AND&nbsp;FITNESS&nbsp;FOR&nbsp;A&nbsp;PARTICULAR&nbsp;PURPOSE&nbsp;ARE<br>
+DISCLAIMED.&nbsp;IN&nbsp;NO&nbsp;EVENT&nbsp;SHALL&nbsp;&amp;lt;COPYRIGHT&nbsp;HOLDER&amp;gt;&nbsp;BE&nbsp;LIABLE&nbsp;FOR&nbsp;ANY<br>
+DIRECT,&nbsp;INDIRECT,&nbsp;INCIDENTAL,&nbsp;SPECIAL,&nbsp;EXEMPLARY,&nbsp;OR&nbsp;CONSEQUENTIAL&nbsp;DAMAGES<br>
+(INCLUDING,&nbsp;BUT&nbsp;NOT&nbsp;LIMITED&nbsp;TO,&nbsp;PROCUREMENT&nbsp;OF&nbsp;SUBSTITUTE&nbsp;GOODS&nbsp;OR&nbsp;SERVICES;<br>
+LOSS&nbsp;OF&nbsp;USE,&nbsp;DATA,&nbsp;OR&nbsp;PROFITS;&nbsp;OR&nbsp;BUSINESS&nbsp;INTERRUPTION)&nbsp;HOWEVER&nbsp;CAUSED&nbsp;AND<br>
+ON&nbsp;ANY&nbsp;THEORY&nbsp;OF&nbsp;LIABILITY,&nbsp;WHETHER&nbsp;IN&nbsp;CONTRACT,&nbsp;STRICT&nbsp;LIABILITY,&nbsp;OR&nbsp;TORT<br>
+(INCLUDING&nbsp;NEGLIGENCE&nbsp;OR&nbsp;OTHERWISE)&nbsp;ARISING&nbsp;IN&nbsp;ANY&nbsp;WAY&nbsp;OUT&nbsp;OF&nbsp;THE&nbsp;USE&nbsp;OF&nbsp;THIS<br>
+SOFTWARE,&nbsp;EVEN&nbsp;IF&nbsp;ADVISED&nbsp;OF&nbsp;THE&nbsp;POSSIBILITY&nbsp;OF&nbsp;SUCH&nbsp;DAMAGE.<br>
&lt;/ins&gt;&lt;span&nbsp;class=&quot;cx&quot;&gt;\&nbsp;No&nbsp;newline&nbsp;at&nbsp;end&nbsp;of&nbsp;file<br>
&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunklegalCCPublicDomaintxt&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/legal/CC-Public-Domain.txt&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/legal/CC-Public-Domain.txt&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/legal/CC-Public-Domain.txt&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,22&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+The&nbsp;person&nbsp;or&nbsp;persons&nbsp;who&nbsp;have&nbsp;associated&nbsp;work&nbsp;with&nbsp;this&nbsp;document&nbsp;(the&nbsp;&amp;quot;Dedicator&amp;quot;&nbsp;or&nbsp;&amp;quot;Certifier&amp;quot;)<br>
+hereby&nbsp;either&nbsp;(a)&nbsp;certifies&nbsp;that,&nbsp;to&nbsp;the&nbsp;best&nbsp;of&nbsp;his&nbsp;knowledge,&nbsp;the&nbsp;work&nbsp;of&nbsp;authorship&nbsp;identified<br>
+is&nbsp;in&nbsp;the&nbsp;public&nbsp;domain&nbsp;of&nbsp;the&nbsp;country&nbsp;from&nbsp;which&nbsp;the&nbsp;work&nbsp;is&nbsp;published,&nbsp;or&nbsp;(b)&nbsp;hereby&nbsp;dedicates<br>
+whatever&nbsp;copyright&nbsp;the&nbsp;dedicators&nbsp;holds&nbsp;in&nbsp;the&nbsp;work&nbsp;of&nbsp;authorship&nbsp;identified&nbsp;below&nbsp;(the&nbsp;&amp;quot;Work&amp;quot;)<br>
+to&nbsp;the&nbsp;public&nbsp;domain.&nbsp;A&nbsp;certifier,&nbsp;moreover,&nbsp;dedicates&nbsp;any&nbsp;copyright&nbsp;interest&nbsp;he&nbsp;may&nbsp;have&nbsp;in&nbsp;the<br>
+associated&nbsp;work,&nbsp;and&nbsp;for&nbsp;these&nbsp;purposes,&nbsp;is&nbsp;described&nbsp;as&nbsp;a&nbsp;&amp;quot;dedicator&amp;quot;&nbsp;below.<br>
+<br>
+A&nbsp;certifier&nbsp;has&nbsp;taken&nbsp;reasonable&nbsp;steps&nbsp;to&nbsp;verify&nbsp;the&nbsp;copyright&nbsp;status&nbsp;of&nbsp;this&nbsp;work.&nbsp;Certifier<br>
+recognizes&nbsp;that&nbsp;his&nbsp;good&nbsp;faith&nbsp;efforts&nbsp;may&nbsp;not&nbsp;shield&nbsp;him&nbsp;from&nbsp;liability&nbsp;if&nbsp;in&nbsp;fact&nbsp;the&nbsp;work<br>
+certified&nbsp;is&nbsp;not&nbsp;in&nbsp;the&nbsp;public&nbsp;domain.<br>
+<br>
+Dedicator&nbsp;makes&nbsp;this&nbsp;dedication&nbsp;for&nbsp;the&nbsp;benefit&nbsp;of&nbsp;the&nbsp;public&nbsp;at&nbsp;large&nbsp;and&nbsp;to&nbsp;the&nbsp;detriment<br>
+of&nbsp;the&nbsp;Dedicator's&nbsp;heirs&nbsp;and&nbsp;successors.&nbsp;Dedicator&nbsp;intends&nbsp;this&nbsp;dedication&nbsp;to&nbsp;be&nbsp;an&nbsp;overt<br>
+act&nbsp;of&nbsp;relinquishment&nbsp;in&nbsp;perpetuity&nbsp;of&nbsp;all&nbsp;present&nbsp;and&nbsp;future&nbsp;rights&nbsp;under&nbsp;copyright&nbsp;law,<br>
+whether&nbsp;vested&nbsp;or&nbsp;contingent,&nbsp;in&nbsp;the&nbsp;Work.&nbsp;Dedicator&nbsp;understands&nbsp;that&nbsp;such&nbsp;relinquishment<br>
+of&nbsp;all&nbsp;rights&nbsp;includes&nbsp;the&nbsp;relinquishment&nbsp;of&nbsp;all&nbsp;rights&nbsp;to&nbsp;enforce&nbsp;(by&nbsp;lawsuit&nbsp;or&nbsp;otherwise)<br>
+those&nbsp;copyrights&nbsp;in&nbsp;the&nbsp;Work.<br>
+<br>
+Dedicator&nbsp;recognizes&nbsp;that,&nbsp;once&nbsp;placed&nbsp;in&nbsp;the&nbsp;public&nbsp;domain,&nbsp;the&nbsp;Work&nbsp;may&nbsp;be&nbsp;freely&nbsp;reproduced,<br>
+distributed,&nbsp;transmitted,&nbsp;used,&nbsp;modified,&nbsp;built&nbsp;upon,&nbsp;or&nbsp;otherwise&nbsp;exploited&nbsp;by&nbsp;anyone&nbsp;for&nbsp;any<br>
+purpose,&nbsp;commercial&nbsp;or&nbsp;non-commercial,&nbsp;and&nbsp;in&nbsp;any&nbsp;way,&nbsp;including&nbsp;by&nbsp;methods&nbsp;that&nbsp;have&nbsp;not&nbsp;yet<br>
+been&nbsp;invented&nbsp;or&nbsp;conceived.<br>
&lt;/ins&gt;&lt;span&nbsp;class=&quot;cx&quot;&gt;\&nbsp;No&nbsp;newline&nbsp;at&nbsp;end&nbsp;of&nbsp;file<br>
&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunklegalCDDLv10txt&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/legal/CDDLv1.0.txt&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/legal/CDDLv1.0.txt&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/legal/CDDLv1.0.txt&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,286&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+COMMON&nbsp;DEVELOPMENT&nbsp;AND&nbsp;DISTRIBUTION&nbsp;LICENSE&nbsp;(CDDL)&nbsp;Version&nbsp;1.0&nbsp;<br>
+<br>
+1.&nbsp;Definitions.&nbsp;<br>
+<br>
+1.1.&nbsp;Contributor&nbsp;means&nbsp;each&nbsp;individual&nbsp;or&nbsp;entity&nbsp;that&nbsp;creates&nbsp;or&nbsp;contributes&nbsp;to&nbsp;<br>
+the&nbsp;creation&nbsp;of&nbsp;Modifications.&nbsp;<br>
+<br>
+1.2.&nbsp;Contributor&nbsp;Version&nbsp;means&nbsp;the&nbsp;combination&nbsp;of&nbsp;the&nbsp;Original&nbsp;Software,&nbsp;prior&nbsp;<br>
+Modifications&nbsp;used&nbsp;by&nbsp;a&nbsp;Contributor&nbsp;(if&nbsp;any),&nbsp;and&nbsp;the&nbsp;Modifications&nbsp;made&nbsp;by&nbsp;<br>
+that&nbsp;particular&nbsp;Contributor.&nbsp;<br>
+<br>
+1.3.&nbsp;Covered&nbsp;Software&nbsp;means&nbsp;(a)&nbsp;the&nbsp;Original&nbsp;Software,&nbsp;or&nbsp;(b)&nbsp;Modifications,&nbsp;or&nbsp;<br>
+(c)&nbsp;the&nbsp;combination&nbsp;of&nbsp;files&nbsp;containing&nbsp;Original&nbsp;Software&nbsp;with&nbsp;files&nbsp;containing&nbsp;<br>
+Modifications,&nbsp;in&nbsp;each&nbsp;case&nbsp;including&nbsp;portions&nbsp;thereof.&nbsp;<br>
+<br>
+1.4.&nbsp;Executable&nbsp;means&nbsp;the&nbsp;Covered&nbsp;Software&nbsp;in&nbsp;any&nbsp;form&nbsp;other&nbsp;than&nbsp;Source&nbsp;Code.&nbsp;<br>
+<br>
+1.5.&nbsp;Initial&nbsp;Developer&nbsp;means&nbsp;the&nbsp;individual&nbsp;or&nbsp;entity&nbsp;that&nbsp;first&nbsp;makes&nbsp;Original&nbsp;<br>
+Software&nbsp;available&nbsp;under&nbsp;this&nbsp;License.&nbsp;<br>
+<br>
+1.6.&nbsp;Larger&nbsp;Work&nbsp;means&nbsp;a&nbsp;work&nbsp;which&nbsp;combines&nbsp;Covered&nbsp;Software&nbsp;or&nbsp;portions&nbsp;<br>
+thereof&nbsp;with&nbsp;code&nbsp;not&nbsp;governed&nbsp;by&nbsp;the&nbsp;terms&nbsp;of&nbsp;this&nbsp;License.&nbsp;<br>
+<br>
+1.7.&nbsp;License&nbsp;means&nbsp;this&nbsp;document.&nbsp;<br>
+<br>
+1.8.&nbsp;Licensable&nbsp;means&nbsp;having&nbsp;the&nbsp;right&nbsp;to&nbsp;grant,&nbsp;to&nbsp;the&nbsp;maximum&nbsp;extent&nbsp;<br>
+possible,&nbsp;whether&nbsp;at&nbsp;the&nbsp;time&nbsp;of&nbsp;the&nbsp;initial&nbsp;grant&nbsp;or&nbsp;subsequently&nbsp;acquired,&nbsp;<br>
+any&nbsp;and&nbsp;all&nbsp;of&nbsp;the&nbsp;rights&nbsp;conveyed&nbsp;herein.&nbsp;<br>
+<br>
+1.9.&nbsp;Modifications&nbsp;means&nbsp;the&nbsp;Source&nbsp;Code&nbsp;and&nbsp;Executable&nbsp;form&nbsp;of&nbsp;any&nbsp;of&nbsp;the&nbsp;<br>
+following:&nbsp;A.&nbsp;Any&nbsp;file&nbsp;that&nbsp;results&nbsp;from&nbsp;an&nbsp;addition&nbsp;to,&nbsp;deletion&nbsp;from&nbsp;or&nbsp;<br>
+modification&nbsp;of&nbsp;the&nbsp;contents&nbsp;of&nbsp;a&nbsp;file&nbsp;containing&nbsp;Original&nbsp;Software&nbsp;or&nbsp;previous&nbsp;<br>
+Modifications;&nbsp;B.&nbsp;Any&nbsp;new&nbsp;file&nbsp;that&nbsp;contains&nbsp;any&nbsp;part&nbsp;of&nbsp;the&nbsp;Original&nbsp;Software&nbsp;<br>
+or&nbsp;previous&nbsp;Modification;&nbsp;or&nbsp;C.&nbsp;Any&nbsp;new&nbsp;file&nbsp;that&nbsp;is&nbsp;contributed&nbsp;or&nbsp;otherwise&nbsp;<br>
+made&nbsp;available&nbsp;under&nbsp;the&nbsp;terms&nbsp;of&nbsp;this&nbsp;License.&nbsp;<br>
+<br>
+1.10.&nbsp;Original&nbsp;Software&nbsp;means&nbsp;the&nbsp;Source&nbsp;Code&nbsp;and&nbsp;Executable&nbsp;form&nbsp;of&nbsp;computer&nbsp;<br>
+software&nbsp;code&nbsp;that&nbsp;is&nbsp;originally&nbsp;released&nbsp;under&nbsp;this&nbsp;License.&nbsp;<br>
+<br>
+1.11.&nbsp;Patent&nbsp;Claims&nbsp;means&nbsp;any&nbsp;patent&nbsp;claim(s),&nbsp;now&nbsp;owned&nbsp;or&nbsp;hereafter&nbsp;acquired,&nbsp;<br>
+including&nbsp;without&nbsp;limitation,&nbsp;method,&nbsp;process,&nbsp;and&nbsp;apparatus&nbsp;claims,&nbsp;in&nbsp;any&nbsp;<br>
+patent&nbsp;Licensable&nbsp;by&nbsp;grantor.&nbsp;<br>
+<br>
+1.12.&nbsp;Source&nbsp;Code&nbsp;means&nbsp;(a)&nbsp;the&nbsp;common&nbsp;form&nbsp;of&nbsp;computer&nbsp;software&nbsp;code&nbsp;in&nbsp;which&nbsp;<br>
+modifications&nbsp;are&nbsp;made&nbsp;and&nbsp;(b)&nbsp;associated&nbsp;documentation&nbsp;included&nbsp;in&nbsp;or&nbsp;with&nbsp;<br>
+such&nbsp;code.&nbsp;<br>
+<br>
+1.13.&nbsp;You&nbsp;(or&nbsp;Your)&nbsp;means&nbsp;an&nbsp;individual&nbsp;or&nbsp;a&nbsp;legal&nbsp;entity&nbsp;exercising&nbsp;rights&nbsp;<br>
+under,&nbsp;and&nbsp;complying&nbsp;with&nbsp;all&nbsp;of&nbsp;the&nbsp;terms&nbsp;of,&nbsp;this&nbsp;License.&nbsp;For&nbsp;legal&nbsp;<br>
+entities,&nbsp;You&nbsp;includes&nbsp;any&nbsp;entity&nbsp;which&nbsp;controls,&nbsp;is&nbsp;controlled&nbsp;by,&nbsp;or&nbsp;is&nbsp;under&nbsp;<br>
+common&nbsp;control&nbsp;with&nbsp;You.&nbsp;For&nbsp;purposes&nbsp;of&nbsp;this&nbsp;definition,&nbsp;control&nbsp;means&nbsp;(a)&nbsp;the&nbsp;<br>
+power,&nbsp;direct&nbsp;or&nbsp;indirect,&nbsp;to&nbsp;cause&nbsp;the&nbsp;direction&nbsp;or&nbsp;management&nbsp;of&nbsp;such&nbsp;entity,&nbsp;<br>
+whether&nbsp;by&nbsp;contract&nbsp;or&nbsp;otherwise,&nbsp;or&nbsp;(b)&nbsp;ownership&nbsp;of&nbsp;more&nbsp;than&nbsp;fifty&nbsp;percent&nbsp;<br>
+(50%)&nbsp;of&nbsp;the&nbsp;outstanding&nbsp;shares&nbsp;or&nbsp;beneficial&nbsp;ownership&nbsp;of&nbsp;such&nbsp;entity.&nbsp;<br>
+<br>
+2.&nbsp;License&nbsp;Grants.<br>
+<br>
+2.1.&nbsp;The&nbsp;Initial&nbsp;Developer&nbsp;Grant.&nbsp;Conditioned&nbsp;upon&nbsp;Your&nbsp;compliance&nbsp;with&nbsp;Section&nbsp;<br>
+3.1&nbsp;below&nbsp;and&nbsp;subject&nbsp;to&nbsp;third&nbsp;party&nbsp;intellectual&nbsp;property&nbsp;claims,&nbsp;the&nbsp;Initial&nbsp;<br>
+Developer&nbsp;hereby&nbsp;grants&nbsp;You&nbsp;a&nbsp;world-wide,&nbsp;royalty-free,&nbsp;non-exclusive&nbsp;license:&nbsp;<br>
+<br>
+(a)&nbsp;under&nbsp;intellectual&nbsp;property&nbsp;rights&nbsp;(other&nbsp;than&nbsp;patent&nbsp;or&nbsp;trademark)&nbsp;<br>
+Licensable&nbsp;by&nbsp;Initial&nbsp;Developer,&nbsp;to&nbsp;use,&nbsp;reproduce,&nbsp;modify,&nbsp;display,&nbsp;perform,&nbsp;<br>
+sublicense&nbsp;and&nbsp;distribute&nbsp;the&nbsp;Original&nbsp;Software&nbsp;(or&nbsp;portions&nbsp;thereof),&nbsp;with&nbsp;or&nbsp;<br>
+without&nbsp;Modifications,&nbsp;and/or&nbsp;as&nbsp;part&nbsp;of&nbsp;a&nbsp;Larger&nbsp;Work;&nbsp;and&nbsp;<br>
+<br>
+(b)&nbsp;under&nbsp;Patent&nbsp;Claims&nbsp;infringed&nbsp;by&nbsp;the&nbsp;making,&nbsp;using&nbsp;or&nbsp;selling&nbsp;of&nbsp;Original&nbsp;<br>
+Software,&nbsp;to&nbsp;make,&nbsp;have&nbsp;made,&nbsp;use,&nbsp;practice,&nbsp;sell,&nbsp;and&nbsp;offer&nbsp;for&nbsp;sale,&nbsp;and/or&nbsp;<br>
+otherwise&nbsp;dispose&nbsp;of&nbsp;the&nbsp;Original&nbsp;Software&nbsp;(or&nbsp;portions&nbsp;thereof);<br>
+<br>
+(c)&nbsp;The&nbsp;licenses&nbsp;granted&nbsp;in&nbsp;Sections&nbsp;2.1(a)&nbsp;and&nbsp;(b)&nbsp;are&nbsp;effective&nbsp;on&nbsp;the&nbsp;date&nbsp;<br>
+Initial&nbsp;Developer&nbsp;first&nbsp;distributes&nbsp;or&nbsp;otherwise&nbsp;makes&nbsp;the&nbsp;Original&nbsp;Software&nbsp;<br>
+available&nbsp;to&nbsp;a&nbsp;third&nbsp;party&nbsp;under&nbsp;the&nbsp;terms&nbsp;of&nbsp;this&nbsp;License;<br>
+<br>
+(d)&nbsp;Notwithstanding&nbsp;Section&nbsp;2.1(b)&nbsp;above,&nbsp;no&nbsp;patent&nbsp;license&nbsp;is&nbsp;granted:&nbsp;(1)&nbsp;for&nbsp;<br>
+code&nbsp;that&nbsp;You&nbsp;delete&nbsp;from&nbsp;the&nbsp;Original&nbsp;Software,&nbsp;or&nbsp;(2)&nbsp;for&nbsp;infringements&nbsp;<br>
+caused&nbsp;by:&nbsp;(i)&nbsp;the&nbsp;modification&nbsp;of&nbsp;the&nbsp;Original&nbsp;Software,&nbsp;or&nbsp;(ii)&nbsp;the&nbsp;<br>
+combination&nbsp;of&nbsp;the&nbsp;Original&nbsp;Software&nbsp;with&nbsp;other&nbsp;software&nbsp;or&nbsp;devices.&nbsp;<br>
+<br>
+2.2.&nbsp;Contributor&nbsp;Grant.&nbsp;Conditioned&nbsp;upon&nbsp;Your&nbsp;compliance&nbsp;with&nbsp;Section&nbsp;3.1&nbsp;below&nbsp;<br>
+and&nbsp;subject&nbsp;to&nbsp;third&nbsp;party&nbsp;intellectual&nbsp;property&nbsp;claims,&nbsp;each&nbsp;Contributor&nbsp;<br>
+hereby&nbsp;grants&nbsp;You&nbsp;a&nbsp;world-wide,&nbsp;royalty-free,&nbsp;non-exclusive&nbsp;license:&nbsp;<br>
+<br>
+(a)&nbsp;under&nbsp;intellectual&nbsp;property&nbsp;rights&nbsp;(other&nbsp;than&nbsp;patent&nbsp;or&nbsp;trademark)&nbsp;<br>
+Licensable&nbsp;by&nbsp;Contributor&nbsp;to&nbsp;use,&nbsp;reproduce,&nbsp;modify,&nbsp;display,&nbsp;perform,&nbsp;<br>
+sublicense&nbsp;and&nbsp;distribute&nbsp;the&nbsp;Modifications&nbsp;created&nbsp;by&nbsp;such&nbsp;Contributor&nbsp;(or&nbsp;<br>
+portions&nbsp;thereof),&nbsp;either&nbsp;on&nbsp;an&nbsp;unmodified&nbsp;basis,&nbsp;with&nbsp;other&nbsp;Modifications,&nbsp;as&nbsp;<br>
+Covered&nbsp;Software&nbsp;and/or&nbsp;as&nbsp;part&nbsp;of&nbsp;a&nbsp;Larger&nbsp;Work;&nbsp;and&nbsp;<br>
+<br>
+(b)&nbsp;under&nbsp;Patent&nbsp;Claims&nbsp;infringed&nbsp;by&nbsp;the&nbsp;making,&nbsp;using,&nbsp;or&nbsp;selling&nbsp;of&nbsp;<br>
+Modifications&nbsp;made&nbsp;by&nbsp;that&nbsp;Contributor&nbsp;either&nbsp;alone&nbsp;and/or&nbsp;in&nbsp;combination&nbsp;with&nbsp;<br>
+its&nbsp;Contributor&nbsp;Version&nbsp;(or&nbsp;portions&nbsp;of&nbsp;such&nbsp;combination),&nbsp;to&nbsp;make,&nbsp;use,&nbsp;sell,&nbsp;<br>
+offer&nbsp;for&nbsp;sale,&nbsp;have&nbsp;made,&nbsp;and/or&nbsp;otherwise&nbsp;dispose&nbsp;of:&nbsp;(1)&nbsp;Modifications&nbsp;made&nbsp;<br>
+by&nbsp;that&nbsp;Contributor&nbsp;(or&nbsp;portions&nbsp;thereof);&nbsp;and&nbsp;(2)&nbsp;the&nbsp;combination&nbsp;of&nbsp;<br>
+Modifications&nbsp;made&nbsp;by&nbsp;that&nbsp;Contributor&nbsp;with&nbsp;its&nbsp;Contributor&nbsp;Version&nbsp;(or&nbsp;<br>
+portions&nbsp;of&nbsp;such&nbsp;combination).&nbsp;<br>
+<br>
+(c)&nbsp;The&nbsp;licenses&nbsp;granted&nbsp;in&nbsp;Sections&nbsp;2.2(a)&nbsp;and&nbsp;2.2(b)&nbsp;are&nbsp;effective&nbsp;on&nbsp;the&nbsp;<br>
+date&nbsp;Contributor&nbsp;first&nbsp;distributes&nbsp;or&nbsp;otherwise&nbsp;makes&nbsp;the&nbsp;Modifications&nbsp;<br>
+available&nbsp;to&nbsp;a&nbsp;third&nbsp;party.<br>
+<br>
+(d)&nbsp;Notwithstanding&nbsp;Section&nbsp;2.2(b)&nbsp;above,&nbsp;no&nbsp;patent&nbsp;license&nbsp;is&nbsp;granted:&nbsp;(1)&nbsp;for&nbsp;<br>
+any&nbsp;code&nbsp;that&nbsp;Contributor&nbsp;has&nbsp;deleted&nbsp;from&nbsp;the&nbsp;Contributor&nbsp;Version;&nbsp;(2)&nbsp;for&nbsp;<br>
+infringements&nbsp;caused&nbsp;by:&nbsp;(i)&nbsp;third&nbsp;party&nbsp;modifications&nbsp;of&nbsp;Contributor&nbsp;Version,&nbsp;<br>
+or&nbsp;(ii)&nbsp;the&nbsp;combination&nbsp;of&nbsp;Modifications&nbsp;made&nbsp;by&nbsp;that&nbsp;Contributor&nbsp;with&nbsp;other&nbsp;<br>
+software&nbsp;(except&nbsp;as&nbsp;part&nbsp;of&nbsp;the&nbsp;Contributor&nbsp;Version)&nbsp;or&nbsp;other&nbsp;devices;&nbsp;or&nbsp;(3)&nbsp;<br>
+under&nbsp;Patent&nbsp;Claims&nbsp;infringed&nbsp;by&nbsp;Covered&nbsp;Software&nbsp;in&nbsp;the&nbsp;absence&nbsp;of&nbsp;<br>
+Modifications&nbsp;made&nbsp;by&nbsp;that&nbsp;Contributor.&nbsp;<br>
+<br>
+3.&nbsp;Distribution&nbsp;Obligations.&nbsp;<br>
+<br>
+3.1.&nbsp;Availability&nbsp;of&nbsp;Source&nbsp;Code.&nbsp;Any&nbsp;Covered&nbsp;Software&nbsp;that&nbsp;You&nbsp;distribute&nbsp;or&nbsp;<br>
+otherwise&nbsp;make&nbsp;available&nbsp;in&nbsp;Executable&nbsp;form&nbsp;must&nbsp;also&nbsp;be&nbsp;made&nbsp;available&nbsp;in&nbsp;<br>
+Source&nbsp;Code&nbsp;form&nbsp;and&nbsp;that&nbsp;Source&nbsp;Code&nbsp;form&nbsp;must&nbsp;be&nbsp;distributed&nbsp;only&nbsp;under&nbsp;the&nbsp;<br>
+terms&nbsp;of&nbsp;this&nbsp;License.&nbsp;You&nbsp;must&nbsp;include&nbsp;a&nbsp;copy&nbsp;of&nbsp;this&nbsp;License&nbsp;with&nbsp;every&nbsp;copy&nbsp;<br>
+of&nbsp;the&nbsp;Source&nbsp;Code&nbsp;form&nbsp;of&nbsp;the&nbsp;Covered&nbsp;Software&nbsp;You&nbsp;distribute&nbsp;or&nbsp;otherwise&nbsp;<br>
+make&nbsp;available.&nbsp;You&nbsp;must&nbsp;inform&nbsp;recipients&nbsp;of&nbsp;any&nbsp;such&nbsp;Covered&nbsp;Software&nbsp;in&nbsp;<br>
+Executable&nbsp;form&nbsp;as&nbsp;to&nbsp;how&nbsp;they&nbsp;can&nbsp;obtain&nbsp;such&nbsp;Covered&nbsp;Software&nbsp;in&nbsp;Source&nbsp;Code&nbsp;<br>
+form&nbsp;in&nbsp;a&nbsp;reasonable&nbsp;manner&nbsp;on&nbsp;or&nbsp;through&nbsp;a&nbsp;medium&nbsp;customarily&nbsp;used&nbsp;for&nbsp;<br>
+software&nbsp;exchange.&nbsp;<br>
+<br>
+3.2.&nbsp;Modifications.&nbsp;The&nbsp;Modifications&nbsp;that&nbsp;You&nbsp;create&nbsp;or&nbsp;to&nbsp;which&nbsp;You&nbsp;<br>
+contribute&nbsp;are&nbsp;governed&nbsp;by&nbsp;the&nbsp;terms&nbsp;of&nbsp;this&nbsp;License.&nbsp;You&nbsp;represent&nbsp;that&nbsp;You&nbsp;<br>
+believe&nbsp;Your&nbsp;Modifications&nbsp;are&nbsp;Your&nbsp;original&nbsp;creation(s)&nbsp;and/or&nbsp;You&nbsp;have&nbsp;<br>
+sufficient&nbsp;rights&nbsp;to&nbsp;grant&nbsp;the&nbsp;rights&nbsp;conveyed&nbsp;by&nbsp;this&nbsp;License.&nbsp;<br>
+<br>
+3.3.&nbsp;Required&nbsp;Notices.&nbsp;You&nbsp;must&nbsp;include&nbsp;a&nbsp;notice&nbsp;in&nbsp;each&nbsp;of&nbsp;Your&nbsp;Modifications&nbsp;<br>
+that&nbsp;identifies&nbsp;You&nbsp;as&nbsp;the&nbsp;Contributor&nbsp;of&nbsp;the&nbsp;Modification.&nbsp;You&nbsp;may&nbsp;not&nbsp;remove&nbsp;<br>
+or&nbsp;alter&nbsp;any&nbsp;copyright,&nbsp;patent&nbsp;or&nbsp;trademark&nbsp;notices&nbsp;contained&nbsp;within&nbsp;the&nbsp;<br>
+Covered&nbsp;Software,&nbsp;or&nbsp;any&nbsp;notices&nbsp;of&nbsp;licensing&nbsp;or&nbsp;any&nbsp;descriptive&nbsp;text&nbsp;giving&nbsp;<br>
+attribution&nbsp;to&nbsp;any&nbsp;Contributor&nbsp;or&nbsp;the&nbsp;Initial&nbsp;Developer.&nbsp;<br>
+<br>
+3.4.&nbsp;Application&nbsp;of&nbsp;Additional&nbsp;Terms.&nbsp;You&nbsp;may&nbsp;not&nbsp;offer&nbsp;or&nbsp;impose&nbsp;any&nbsp;terms&nbsp;on&nbsp;<br>
+any&nbsp;Covered&nbsp;Software&nbsp;in&nbsp;Source&nbsp;Code&nbsp;form&nbsp;that&nbsp;alters&nbsp;or&nbsp;restricts&nbsp;the&nbsp;<br>
+applicable&nbsp;version&nbsp;of&nbsp;this&nbsp;License&nbsp;or&nbsp;the&nbsp;recipients&nbsp;rights&nbsp;hereunder.&nbsp;You&nbsp;may&nbsp;<br>
+choose&nbsp;to&nbsp;offer,&nbsp;and&nbsp;to&nbsp;charge&nbsp;a&nbsp;fee&nbsp;for,&nbsp;warranty,&nbsp;support,&nbsp;indemnity&nbsp;or&nbsp;<br>
+liability&nbsp;obligations&nbsp;to&nbsp;one&nbsp;or&nbsp;more&nbsp;recipients&nbsp;of&nbsp;Covered&nbsp;Software.&nbsp;However,&nbsp;<br>
+you&nbsp;may&nbsp;do&nbsp;so&nbsp;only&nbsp;on&nbsp;Your&nbsp;own&nbsp;behalf,&nbsp;and&nbsp;not&nbsp;on&nbsp;behalf&nbsp;of&nbsp;the&nbsp;Initial&nbsp;<br>
+Developer&nbsp;or&nbsp;any&nbsp;Contributor.&nbsp;You&nbsp;must&nbsp;make&nbsp;it&nbsp;absolutely&nbsp;clear&nbsp;that&nbsp;any&nbsp;such&nbsp;<br>
+warranty,&nbsp;support,&nbsp;indemnity&nbsp;or&nbsp;liability&nbsp;obligation&nbsp;is&nbsp;offered&nbsp;by&nbsp;You&nbsp;alone,&nbsp;<br>
+and&nbsp;You&nbsp;hereby&nbsp;agree&nbsp;to&nbsp;indemnify&nbsp;the&nbsp;Initial&nbsp;Developer&nbsp;and&nbsp;every&nbsp;Contributor&nbsp;<br>
+for&nbsp;any&nbsp;liability&nbsp;incurred&nbsp;by&nbsp;the&nbsp;Initial&nbsp;Developer&nbsp;or&nbsp;such&nbsp;Contributor&nbsp;as&nbsp;a&nbsp;<br>
+result&nbsp;of&nbsp;warranty,&nbsp;support,&nbsp;indemnity&nbsp;or&nbsp;liability&nbsp;terms&nbsp;You&nbsp;offer.<br>
+<br>
+3.5.&nbsp;Distribution&nbsp;of&nbsp;Executable&nbsp;Versions.&nbsp;You&nbsp;may&nbsp;distribute&nbsp;the&nbsp;Executable&nbsp;<br>
+form&nbsp;of&nbsp;the&nbsp;Covered&nbsp;Software&nbsp;under&nbsp;the&nbsp;terms&nbsp;of&nbsp;this&nbsp;License&nbsp;or&nbsp;under&nbsp;the&nbsp;terms&nbsp;<br>
+of&nbsp;a&nbsp;license&nbsp;of&nbsp;Your&nbsp;choice,&nbsp;which&nbsp;may&nbsp;contain&nbsp;terms&nbsp;different&nbsp;from&nbsp;this&nbsp;<br>
+License,&nbsp;provided&nbsp;that&nbsp;You&nbsp;are&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the&nbsp;terms&nbsp;of&nbsp;this&nbsp;License&nbsp;and&nbsp;<br>
+that&nbsp;the&nbsp;license&nbsp;for&nbsp;the&nbsp;Executable&nbsp;form&nbsp;does&nbsp;not&nbsp;attempt&nbsp;to&nbsp;limit&nbsp;or&nbsp;alter&nbsp;the&nbsp;<br>
+recipients&nbsp;rights&nbsp;in&nbsp;the&nbsp;Source&nbsp;Code&nbsp;form&nbsp;from&nbsp;the&nbsp;rights&nbsp;set&nbsp;forth&nbsp;in&nbsp;this&nbsp;<br>
+License.&nbsp;If&nbsp;You&nbsp;distribute&nbsp;the&nbsp;Covered&nbsp;Software&nbsp;in&nbsp;Executable&nbsp;form&nbsp;under&nbsp;a&nbsp;<br>
+different&nbsp;license,&nbsp;You&nbsp;must&nbsp;make&nbsp;it&nbsp;absolutely&nbsp;clear&nbsp;that&nbsp;any&nbsp;terms&nbsp;which&nbsp;<br>
+differ&nbsp;from&nbsp;this&nbsp;License&nbsp;are&nbsp;offered&nbsp;by&nbsp;You&nbsp;alone,&nbsp;not&nbsp;by&nbsp;the&nbsp;Initial&nbsp;Developer&nbsp;<br>
+or&nbsp;Contributor.&nbsp;You&nbsp;hereby&nbsp;agree&nbsp;to&nbsp;indemnify&nbsp;the&nbsp;Initial&nbsp;Developer&nbsp;and&nbsp;every&nbsp;<br>
+Contributor&nbsp;for&nbsp;any&nbsp;liability&nbsp;incurred&nbsp;by&nbsp;the&nbsp;Initial&nbsp;Developer&nbsp;or&nbsp;such&nbsp;<br>
+Contributor&nbsp;as&nbsp;a&nbsp;result&nbsp;of&nbsp;any&nbsp;such&nbsp;terms&nbsp;You&nbsp;offer.&nbsp;<br>
+<br>
+3.6.&nbsp;Larger&nbsp;Works.&nbsp;You&nbsp;may&nbsp;create&nbsp;a&nbsp;Larger&nbsp;Work&nbsp;by&nbsp;combining&nbsp;Covered&nbsp;Software&nbsp;<br>
+with&nbsp;other&nbsp;code&nbsp;not&nbsp;governed&nbsp;by&nbsp;the&nbsp;terms&nbsp;of&nbsp;this&nbsp;License&nbsp;and&nbsp;distribute&nbsp;the&nbsp;<br>
+Larger&nbsp;Work&nbsp;as&nbsp;a&nbsp;single&nbsp;product.&nbsp;In&nbsp;such&nbsp;a&nbsp;case,&nbsp;You&nbsp;must&nbsp;make&nbsp;sure&nbsp;the&nbsp;<br>
+requirements&nbsp;of&nbsp;this&nbsp;License&nbsp;are&nbsp;fulfilled&nbsp;for&nbsp;the&nbsp;Covered&nbsp;Software.&nbsp;<br>
+<br>
+4.&nbsp;Versions&nbsp;of&nbsp;the&nbsp;License.&nbsp;<br>
+<br>
+4.1.&nbsp;New&nbsp;Versions.&nbsp;Sun&nbsp;Microsystems,&nbsp;Inc.&nbsp;is&nbsp;the&nbsp;initial&nbsp;license&nbsp;steward&nbsp;and&nbsp;<br>
+may&nbsp;publish&nbsp;revised&nbsp;and/or&nbsp;new&nbsp;versions&nbsp;of&nbsp;this&nbsp;License&nbsp;from&nbsp;time&nbsp;to&nbsp;time.&nbsp;Each&nbsp;<br>
+version&nbsp;will&nbsp;be&nbsp;given&nbsp;a&nbsp;distinguishing&nbsp;version&nbsp;number.&nbsp;Except&nbsp;as&nbsp;provided&nbsp;in&nbsp;<br>
+Section&nbsp;4.3,&nbsp;no&nbsp;one&nbsp;other&nbsp;than&nbsp;the&nbsp;license&nbsp;steward&nbsp;has&nbsp;the&nbsp;right&nbsp;to&nbsp;modify&nbsp;this&nbsp;<br>
+License.&nbsp;<br>
+<br>
+4.2.&nbsp;Effect&nbsp;of&nbsp;New&nbsp;Versions.&nbsp;You&nbsp;may&nbsp;always&nbsp;continue&nbsp;to&nbsp;use,&nbsp;distribute&nbsp;or&nbsp;<br>
+otherwise&nbsp;make&nbsp;the&nbsp;Covered&nbsp;Software&nbsp;available&nbsp;under&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;version&nbsp;of&nbsp;<br>
+the&nbsp;License&nbsp;under&nbsp;which&nbsp;You&nbsp;originally&nbsp;received&nbsp;the&nbsp;Covered&nbsp;Software.&nbsp;If&nbsp;the&nbsp;<br>
+Initial&nbsp;Developer&nbsp;includes&nbsp;a&nbsp;notice&nbsp;in&nbsp;the&nbsp;Original&nbsp;Software&nbsp;prohibiting&nbsp;it&nbsp;<br>
+from&nbsp;being&nbsp;distributed&nbsp;or&nbsp;otherwise&nbsp;made&nbsp;available&nbsp;under&nbsp;any&nbsp;subsequent&nbsp;version&nbsp;<br>
+of&nbsp;the&nbsp;License,&nbsp;You&nbsp;must&nbsp;distribute&nbsp;and&nbsp;make&nbsp;the&nbsp;Covered&nbsp;Software&nbsp;available&nbsp;<br>
+under&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;version&nbsp;of&nbsp;the&nbsp;License&nbsp;under&nbsp;which&nbsp;You&nbsp;originally&nbsp;<br>
+received&nbsp;the&nbsp;Covered&nbsp;Software.&nbsp;Otherwise,&nbsp;You&nbsp;may&nbsp;also&nbsp;choose&nbsp;to&nbsp;use,&nbsp;<br>
+distribute&nbsp;or&nbsp;otherwise&nbsp;make&nbsp;the&nbsp;Covered&nbsp;Software&nbsp;available&nbsp;under&nbsp;the&nbsp;terms&nbsp;of&nbsp;<br>
+any&nbsp;subsequent&nbsp;version&nbsp;of&nbsp;the&nbsp;License&nbsp;published&nbsp;by&nbsp;the&nbsp;license&nbsp;steward.&nbsp;<br>
+<br>
+4.3.&nbsp;Modified&nbsp;Versions.&nbsp;When&nbsp;You&nbsp;are&nbsp;an&nbsp;Initial&nbsp;Developer&nbsp;and&nbsp;You&nbsp;want&nbsp;to&nbsp;<br>
+create&nbsp;a&nbsp;new&nbsp;license&nbsp;for&nbsp;Your&nbsp;Original&nbsp;Software,&nbsp;You&nbsp;may&nbsp;create&nbsp;and&nbsp;use&nbsp;a&nbsp;<br>
+modified&nbsp;version&nbsp;of&nbsp;this&nbsp;License&nbsp;if&nbsp;You:&nbsp;(a)&nbsp;rename&nbsp;the&nbsp;license&nbsp;and&nbsp;remove&nbsp;any&nbsp;<br>
+references&nbsp;to&nbsp;the&nbsp;name&nbsp;of&nbsp;the&nbsp;license&nbsp;steward&nbsp;(except&nbsp;to&nbsp;note&nbsp;that&nbsp;the&nbsp;license&nbsp;<br>
+differs&nbsp;from&nbsp;this&nbsp;License);&nbsp;and&nbsp;(b)&nbsp;otherwise&nbsp;make&nbsp;it&nbsp;clear&nbsp;that&nbsp;the&nbsp;license&nbsp;<br>
+contains&nbsp;terms&nbsp;which&nbsp;differ&nbsp;from&nbsp;this&nbsp;License.&nbsp;<br>
+<br>
+5.&nbsp;DISCLAIMER&nbsp;OF&nbsp;WARRANTY.&nbsp;COVERED&nbsp;SOFTWARE&nbsp;IS&nbsp;PROVIDED&nbsp;UNDER&nbsp;THIS&nbsp;LICENSE&nbsp;ON&nbsp;<br>
+AN&nbsp;AS&nbsp;IS&nbsp;BASIS,&nbsp;WITHOUT&nbsp;WARRANTY&nbsp;OF&nbsp;ANY&nbsp;KIND,&nbsp;EITHER&nbsp;EXPRESSED&nbsp;OR&nbsp;IMPLIED,&nbsp;<br>
+INCLUDING,&nbsp;WITHOUT&nbsp;LIMITATION,&nbsp;WARRANTIES&nbsp;THAT&nbsp;THE&nbsp;COVERED&nbsp;SOFTWARE&nbsp;IS&nbsp;FREE&nbsp;OF&nbsp;<br>
+DEFECTS,&nbsp;MERCHANTABLE,&nbsp;FIT&nbsp;FOR&nbsp;A&nbsp;PARTICULAR&nbsp;PURPOSE&nbsp;OR&nbsp;NON-INFRINGING.&nbsp;THE&nbsp;<br>
+ENTIRE&nbsp;RISK&nbsp;AS&nbsp;TO&nbsp;THE&nbsp;QUALITY&nbsp;AND&nbsp;PERFORMANCE&nbsp;OF&nbsp;THE&nbsp;COVERED&nbsp;SOFTWARE&nbsp;IS&nbsp;WITH&nbsp;<br>
+YOU.&nbsp;SHOULD&nbsp;ANY&nbsp;COVERED&nbsp;SOFTWARE&nbsp;PROVE&nbsp;DEFECTIVE&nbsp;IN&nbsp;ANY&nbsp;RESPECT,&nbsp;YOU&nbsp;(NOT&nbsp;THE&nbsp;<br>
+INITIAL&nbsp;DEVELOPER&nbsp;OR&nbsp;ANY&nbsp;OTHER&nbsp;CONTRIBUTOR)&nbsp;ASSUME&nbsp;THE&nbsp;COST&nbsp;OF&nbsp;ANY&nbsp;NECESSARY&nbsp;<br>
+SERVICING,&nbsp;REPAIR&nbsp;OR&nbsp;CORRECTION.&nbsp;THIS&nbsp;DISCLAIMER&nbsp;OF&nbsp;WARRANTY&nbsp;CONSTITUTES&nbsp;AN&nbsp;<br>
+ESSENTIAL&nbsp;PART&nbsp;OF&nbsp;THIS&nbsp;LICENSE.&nbsp;NO&nbsp;USE&nbsp;OF&nbsp;ANY&nbsp;COVERED&nbsp;SOFTWARE&nbsp;IS&nbsp;AUTHORIZED&nbsp;<br>
+HEREUNDER&nbsp;EXCEPT&nbsp;UNDER&nbsp;THIS&nbsp;DISCLAIMER.&nbsp;<br>
+<br>
+6.&nbsp;TERMINATION.&nbsp;<br>
+<br>
+6.1.&nbsp;This&nbsp;License&nbsp;and&nbsp;the&nbsp;rights&nbsp;granted&nbsp;hereunder&nbsp;will&nbsp;terminate&nbsp;automatically&nbsp;<br>
+if&nbsp;You&nbsp;fail&nbsp;to&nbsp;comply&nbsp;with&nbsp;terms&nbsp;herein&nbsp;and&nbsp;fail&nbsp;to&nbsp;cure&nbsp;such&nbsp;breach&nbsp;within&nbsp;30&nbsp;<br>
+days&nbsp;of&nbsp;becoming&nbsp;aware&nbsp;of&nbsp;the&nbsp;breach.&nbsp;Provisions&nbsp;which,&nbsp;by&nbsp;their&nbsp;nature,&nbsp;must&nbsp;<br>
+remain&nbsp;in&nbsp;effect&nbsp;beyond&nbsp;the&nbsp;termination&nbsp;of&nbsp;this&nbsp;License&nbsp;shall&nbsp;survive.&nbsp;<br>
+<br>
+6.2.&nbsp;If&nbsp;You&nbsp;assert&nbsp;a&nbsp;patent&nbsp;infringement&nbsp;claim&nbsp;(excluding&nbsp;declaratory&nbsp;judgment&nbsp;<br>
+actions)&nbsp;against&nbsp;Initial&nbsp;Developer&nbsp;or&nbsp;a&nbsp;Contributor&nbsp;(the&nbsp;Initial&nbsp;Developer&nbsp;or&nbsp;<br>
+Contributor&nbsp;against&nbsp;whom&nbsp;You&nbsp;assert&nbsp;such&nbsp;claim&nbsp;is&nbsp;referred&nbsp;to&nbsp;as&nbsp;Participant)&nbsp;<br>
+alleging&nbsp;that&nbsp;the&nbsp;Participant&nbsp;Software&nbsp;(meaning&nbsp;the&nbsp;Contributor&nbsp;Version&nbsp;where&nbsp;<br>
+the&nbsp;Participant&nbsp;is&nbsp;a&nbsp;Contributor&nbsp;or&nbsp;the&nbsp;Original&nbsp;Software&nbsp;where&nbsp;the&nbsp;Participant&nbsp;<br>
+is&nbsp;the&nbsp;Initial&nbsp;Developer)&nbsp;directly&nbsp;or&nbsp;indirectly&nbsp;infringes&nbsp;any&nbsp;patent,&nbsp;then&nbsp;any&nbsp;<br>
+and&nbsp;all&nbsp;rights&nbsp;granted&nbsp;directly&nbsp;or&nbsp;indirectly&nbsp;to&nbsp;You&nbsp;by&nbsp;such&nbsp;Participant,&nbsp;the&nbsp;<br>
+Initial&nbsp;Developer&nbsp;(if&nbsp;the&nbsp;Initial&nbsp;Developer&nbsp;is&nbsp;not&nbsp;the&nbsp;Participant)&nbsp;and&nbsp;all&nbsp;<br>
+Contributors&nbsp;under&nbsp;Sections&nbsp;2.1&nbsp;and/or&nbsp;2.2&nbsp;of&nbsp;this&nbsp;License&nbsp;shall,&nbsp;upon&nbsp;60&nbsp;days&nbsp;<br>
+notice&nbsp;from&nbsp;Participant&nbsp;terminate&nbsp;prospectively&nbsp;and&nbsp;automatically&nbsp;at&nbsp;the&nbsp;<br>
+expiration&nbsp;of&nbsp;such&nbsp;60&nbsp;day&nbsp;notice&nbsp;period,&nbsp;unless&nbsp;if&nbsp;within&nbsp;such&nbsp;60&nbsp;day&nbsp;period&nbsp;<br>
+You&nbsp;withdraw&nbsp;Your&nbsp;claim&nbsp;with&nbsp;respect&nbsp;to&nbsp;the&nbsp;Participant&nbsp;Software&nbsp;against&nbsp;such&nbsp;<br>
+Participant&nbsp;either&nbsp;unilaterally&nbsp;or&nbsp;pursuant&nbsp;to&nbsp;a&nbsp;written&nbsp;agreement&nbsp;with&nbsp;<br>
+Participant.&nbsp;<br>
+<br>
+6.3.&nbsp;In&nbsp;the&nbsp;event&nbsp;of&nbsp;termination&nbsp;under&nbsp;Sections&nbsp;6.1&nbsp;or&nbsp;6.2&nbsp;above,&nbsp;all&nbsp;end&nbsp;user&nbsp;<br>
+licenses&nbsp;that&nbsp;have&nbsp;been&nbsp;validly&nbsp;granted&nbsp;by&nbsp;You&nbsp;or&nbsp;any&nbsp;distributor&nbsp;hereunder&nbsp;<br>
+prior&nbsp;to&nbsp;termination&nbsp;(excluding&nbsp;licenses&nbsp;granted&nbsp;to&nbsp;You&nbsp;by&nbsp;any&nbsp;distributor)&nbsp;<br>
+shall&nbsp;survive&nbsp;termination.&nbsp;<br>
+<br>
+7.&nbsp;LIMITATION&nbsp;OF&nbsp;LIABILITY.&nbsp;UNDER&nbsp;NO&nbsp;CIRCUMSTANCES&nbsp;AND&nbsp;UNDER&nbsp;NO&nbsp;LEGAL&nbsp;THEORY,&nbsp;<br>
+WHETHER&nbsp;TORT&nbsp;(INCLUDING&nbsp;NEGLIGENCE),&nbsp;CONTRACT,&nbsp;OR&nbsp;OTHERWISE,&nbsp;SHALL&nbsp;YOU,&nbsp;THE&nbsp;<br>
+INITIAL&nbsp;DEVELOPER,&nbsp;ANY&nbsp;OTHER&nbsp;CONTRIBUTOR,&nbsp;OR&nbsp;ANY&nbsp;DISTRIBUTOR&nbsp;OF&nbsp;COVERED&nbsp;<br>
+SOFTWARE,&nbsp;OR&nbsp;ANY&nbsp;SUPPLIER&nbsp;OF&nbsp;ANY&nbsp;OF&nbsp;SUCH&nbsp;PARTIES,&nbsp;BE&nbsp;LIABLE&nbsp;TO&nbsp;ANY&nbsp;PERSON&nbsp;FOR&nbsp;<br>
+ANY&nbsp;INDIRECT,&nbsp;SPECIAL,&nbsp;INCIDENTAL,&nbsp;OR&nbsp;CONSEQUENTIAL&nbsp;DAMAGES&nbsp;OF&nbsp;ANY&nbsp;CHARACTER&nbsp;<br>
+INCLUDING,&nbsp;WITHOUT&nbsp;LIMITATION,&nbsp;DAMAGES&nbsp;FOR&nbsp;LOST&nbsp;PROFITS,&nbsp;LOSS&nbsp;OF&nbsp;GOODWILL,&nbsp;WORK&nbsp;<br>
+STOPPAGE,&nbsp;COMPUTER&nbsp;FAILURE&nbsp;OR&nbsp;MALFUNCTION,&nbsp;OR&nbsp;ANY&nbsp;AND&nbsp;ALL&nbsp;OTHER&nbsp;COMMERCIAL&nbsp;<br>
+DAMAGES&nbsp;OR&nbsp;LOSSES,&nbsp;EVEN&nbsp;IF&nbsp;SUCH&nbsp;PARTY&nbsp;SHALL&nbsp;HAVE&nbsp;BEEN&nbsp;INFORMED&nbsp;OF&nbsp;THE&nbsp;<br>
+POSSIBILITY&nbsp;OF&nbsp;SUCH&nbsp;DAMAGES.&nbsp;THIS&nbsp;LIMITATION&nbsp;OF&nbsp;LIABILITY&nbsp;SHALL&nbsp;NOT&nbsp;APPLY&nbsp;TO&nbsp;<br>
+LIABILITY&nbsp;FOR&nbsp;DEATH&nbsp;OR&nbsp;PERSONAL&nbsp;INJURY&nbsp;RESULTING&nbsp;FROM&nbsp;SUCH&nbsp;PARTYS&nbsp;NEGLIGENCE&nbsp;TO&nbsp;<br>
+THE&nbsp;EXTENT&nbsp;APPLICABLE&nbsp;LAW&nbsp;PROHIBITS&nbsp;SUCH&nbsp;LIMITATION.&nbsp;SOME&nbsp;JURISDICTIONS&nbsp;DO&nbsp;NOT&nbsp;<br>
+ALLOW&nbsp;THE&nbsp;EXCLUSION&nbsp;OR&nbsp;LIMITATION&nbsp;OF&nbsp;INCIDENTAL&nbsp;OR&nbsp;CONSEQUENTIAL&nbsp;DAMAGES,&nbsp;SO&nbsp;<br>
+THIS&nbsp;EXCLUSION&nbsp;AND&nbsp;LIMITATION&nbsp;MAY&nbsp;NOT&nbsp;APPLY&nbsp;TO&nbsp;YOU.&nbsp;<br>
+<br>
+8.&nbsp;U.S.&nbsp;GOVERNMENT&nbsp;END&nbsp;USERS.&nbsp;The&nbsp;Covered&nbsp;Software&nbsp;is&nbsp;a&nbsp;commercial&nbsp;item,&nbsp;as&nbsp;<br>
+that&nbsp;term&nbsp;is&nbsp;defined&nbsp;in&nbsp;48&nbsp;C.F.R.&nbsp;2.101&nbsp;(Oct.&nbsp;1995),&nbsp;consisting&nbsp;of&nbsp;commercial&nbsp;<br>
+computer&nbsp;software&nbsp;(as&nbsp;that&nbsp;term&nbsp;is&nbsp;defined&nbsp;at&nbsp;48&nbsp;C.F.R.&nbsp;252.227-7014(a)(1))&nbsp;and&nbsp;<br>
+commercial&nbsp;computer&nbsp;software&nbsp;documentation&nbsp;as&nbsp;such&nbsp;terms&nbsp;are&nbsp;used&nbsp;in&nbsp;48&nbsp;C.F.R.&nbsp;<br>
+12.212&nbsp;(Sept.&nbsp;1995).&nbsp;Consistent&nbsp;with&nbsp;48&nbsp;C.F.R.&nbsp;12.212&nbsp;and&nbsp;48&nbsp;C.F.R.&nbsp;227.7202-1&nbsp;<br>
+through&nbsp;227.7202-4&nbsp;(June&nbsp;1995),&nbsp;all&nbsp;U.S.&nbsp;Government&nbsp;End&nbsp;Users&nbsp;acquire&nbsp;Covered&nbsp;<br>
+Software&nbsp;with&nbsp;only&nbsp;those&nbsp;rights&nbsp;set&nbsp;forth&nbsp;herein.&nbsp;This&nbsp;U.S.&nbsp;Government&nbsp;Rights&nbsp;<br>
+clause&nbsp;is&nbsp;in&nbsp;lieu&nbsp;of,&nbsp;and&nbsp;supersedes,&nbsp;any&nbsp;other&nbsp;FAR,&nbsp;DFAR,&nbsp;or&nbsp;other&nbsp;clause&nbsp;or&nbsp;<br>
+provision&nbsp;that&nbsp;addresses&nbsp;Government&nbsp;rights&nbsp;in&nbsp;computer&nbsp;software&nbsp;under&nbsp;this&nbsp;<br>
+License.&nbsp;<br>
+<br>
+9.&nbsp;MISCELLANEOUS.&nbsp;This&nbsp;License&nbsp;represents&nbsp;the&nbsp;complete&nbsp;agreement&nbsp;concerning&nbsp;<br>
+subject&nbsp;matter&nbsp;hereof.&nbsp;If&nbsp;any&nbsp;provision&nbsp;of&nbsp;this&nbsp;License&nbsp;is&nbsp;held&nbsp;to&nbsp;be&nbsp;<br>
+unenforceable,&nbsp;such&nbsp;provision&nbsp;shall&nbsp;be&nbsp;reformed&nbsp;only&nbsp;to&nbsp;the&nbsp;extent&nbsp;necessary&nbsp;to&nbsp;<br>
+make&nbsp;it&nbsp;enforceable.&nbsp;This&nbsp;License&nbsp;shall&nbsp;be&nbsp;governed&nbsp;by&nbsp;the&nbsp;law&nbsp;of&nbsp;the&nbsp;<br>
+jurisdiction&nbsp;specified&nbsp;in&nbsp;a&nbsp;notice&nbsp;contained&nbsp;within&nbsp;the&nbsp;Original&nbsp;Software&nbsp;<br>
+(except&nbsp;to&nbsp;the&nbsp;extent&nbsp;applicable&nbsp;law,&nbsp;if&nbsp;any,&nbsp;provides&nbsp;otherwise),&nbsp;excluding&nbsp;<br>
+such&nbsp;jurisdictions&nbsp;conflict-of-law&nbsp;provisions.&nbsp;Any&nbsp;litigation&nbsp;relating&nbsp;to&nbsp;this&nbsp;<br>
+License&nbsp;shall&nbsp;be&nbsp;subject&nbsp;to&nbsp;the&nbsp;jurisdiction&nbsp;of&nbsp;the&nbsp;courts&nbsp;located&nbsp;in&nbsp;the&nbsp;<br>
+jurisdiction&nbsp;and&nbsp;venue&nbsp;specified&nbsp;in&nbsp;a&nbsp;notice&nbsp;contained&nbsp;within&nbsp;the&nbsp;Original&nbsp;<br>
+Software,&nbsp;with&nbsp;the&nbsp;losing&nbsp;party&nbsp;responsible&nbsp;for&nbsp;costs,&nbsp;including,&nbsp;without&nbsp;<br>
+limitation,&nbsp;court&nbsp;costs&nbsp;and&nbsp;reasonable&nbsp;attorneys&nbsp;fees&nbsp;and&nbsp;expenses.&nbsp;The&nbsp;<br>
+application&nbsp;of&nbsp;the&nbsp;United&nbsp;Nations&nbsp;Convention&nbsp;on&nbsp;Contracts&nbsp;for&nbsp;the&nbsp;International&nbsp;<br>
+Sale&nbsp;of&nbsp;Goods&nbsp;is&nbsp;expressly&nbsp;excluded.&nbsp;Any&nbsp;law&nbsp;or&nbsp;regulation&nbsp;which&nbsp;provides&nbsp;that&nbsp;<br>
+the&nbsp;language&nbsp;of&nbsp;a&nbsp;contract&nbsp;shall&nbsp;be&nbsp;construed&nbsp;against&nbsp;the&nbsp;drafter&nbsp;shall&nbsp;not&nbsp;<br>
+apply&nbsp;to&nbsp;this&nbsp;License.&nbsp;You&nbsp;agree&nbsp;that&nbsp;You&nbsp;alone&nbsp;are&nbsp;responsible&nbsp;for&nbsp;compliance&nbsp;<br>
+with&nbsp;the&nbsp;United&nbsp;States&nbsp;export&nbsp;administration&nbsp;regulations&nbsp;(and&nbsp;the&nbsp;export&nbsp;<br>
+control&nbsp;laws&nbsp;and&nbsp;regulation&nbsp;of&nbsp;any&nbsp;other&nbsp;countries)&nbsp;when&nbsp;You&nbsp;use,&nbsp;distribute&nbsp;or&nbsp;<br>
+otherwise&nbsp;make&nbsp;available&nbsp;any&nbsp;Covered&nbsp;Software.<br>
+<br>
+10.&nbsp;RESPONSIBILITY&nbsp;FOR&nbsp;CLAIMS.&nbsp;As&nbsp;between&nbsp;Initial&nbsp;Developer&nbsp;and&nbsp;the&nbsp;<br>
+Contributors,&nbsp;each&nbsp;party&nbsp;is&nbsp;responsible&nbsp;for&nbsp;claims&nbsp;and&nbsp;damages&nbsp;arising,&nbsp;<br>
+directly&nbsp;or&nbsp;indirectly,&nbsp;out&nbsp;of&nbsp;its&nbsp;utilization&nbsp;of&nbsp;rights&nbsp;under&nbsp;this&nbsp;License&nbsp;and&nbsp;<br>
+You&nbsp;agree&nbsp;to&nbsp;work&nbsp;with&nbsp;Initial&nbsp;Developer&nbsp;and&nbsp;Contributors&nbsp;to&nbsp;distribute&nbsp;such&nbsp;<br>
+responsibility&nbsp;on&nbsp;an&nbsp;equitable&nbsp;basis.&nbsp;Nothing&nbsp;herein&nbsp;is&nbsp;intended&nbsp;or&nbsp;shall&nbsp;be&nbsp;<br>
+deemed&nbsp;to&nbsp;constitute&nbsp;any&nbsp;admission&nbsp;of&nbsp;liability.&nbsp;<br>
+<br>
+NOTICE&nbsp;PURSUANT&nbsp;TO&nbsp;SECTION&nbsp;9&nbsp;OF&nbsp;THE&nbsp;COMMON&nbsp;DEVELOPMENT&nbsp;AND&nbsp;DISTRIBUTION&nbsp;LICENSE&nbsp;<br>
+(CDDL)<br>
+<br>
+For&nbsp;Covered&nbsp;Software&nbsp;in&nbsp;this&nbsp;distribution,&nbsp;this&nbsp;License&nbsp;shall&nbsp;be&nbsp;governed&nbsp;by&nbsp;<br>
+the&nbsp;laws&nbsp;of&nbsp;the&nbsp;State&nbsp;of&nbsp;California&nbsp;(excluding&nbsp;conflict-of-law&nbsp;provisions).<br>
+<br>
+Any&nbsp;litigation&nbsp;relating&nbsp;to&nbsp;this&nbsp;License&nbsp;shall&nbsp;be&nbsp;subject&nbsp;to&nbsp;the&nbsp;jurisdiction&nbsp;of&nbsp;<br>
+the&nbsp;Federal&nbsp;Courts&nbsp;of&nbsp;the&nbsp;Northern&nbsp;District&nbsp;of&nbsp;California&nbsp;and&nbsp;the&nbsp;state&nbsp;courts&nbsp;<br>
+of&nbsp;the&nbsp;State&nbsp;of&nbsp;California,&nbsp;with&nbsp;venue&nbsp;lying&nbsp;in&nbsp;Santa&nbsp;Clara&nbsp;County,&nbsp;California.<br>
&lt;/ins&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunklegalapachev20txt&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/legal/apache-v2.0.txt&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/legal/apache-v2.0.txt&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/legal/apache-v2.0.txt&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,204&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Apache&nbsp;License<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Version&nbsp;2.0,&nbsp;January&nbsp;2004<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.apache.org/licenses/<br>
+<br>
+&nbsp;&nbsp;&nbsp;TERMS&nbsp;AND&nbsp;CONDITIONS&nbsp;FOR&nbsp;USE,&nbsp;REPRODUCTION,&nbsp;AND&nbsp;DISTRIBUTION<br>
+<br>
+&nbsp;&nbsp;&nbsp;1.&nbsp;Definitions.<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;License&amp;quot;&nbsp;shall&nbsp;mean&nbsp;the&nbsp;terms&nbsp;and&nbsp;conditions&nbsp;for&nbsp;use,&nbsp;reproduction,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;distribution&nbsp;as&nbsp;defined&nbsp;by&nbsp;Sections&nbsp;1&nbsp;through&nbsp;9&nbsp;of&nbsp;this&nbsp;document.<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;Licensor&amp;quot;&nbsp;shall&nbsp;mean&nbsp;the&nbsp;copyright&nbsp;owner&nbsp;or&nbsp;entity&nbsp;authorized&nbsp;by<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;copyright&nbsp;owner&nbsp;that&nbsp;is&nbsp;granting&nbsp;the&nbsp;License.<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;Legal&nbsp;Entity&amp;quot;&nbsp;shall&nbsp;mean&nbsp;the&nbsp;union&nbsp;of&nbsp;the&nbsp;acting&nbsp;entity&nbsp;and&nbsp;all<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;other&nbsp;entities&nbsp;that&nbsp;control,&nbsp;are&nbsp;controlled&nbsp;by,&nbsp;or&nbsp;are&nbsp;under&nbsp;common<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;control&nbsp;with&nbsp;that&nbsp;entity.&nbsp;For&nbsp;the&nbsp;purposes&nbsp;of&nbsp;this&nbsp;definition,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;control&amp;quot;&nbsp;means&nbsp;(i)&nbsp;the&nbsp;power,&nbsp;direct&nbsp;or&nbsp;indirect,&nbsp;to&nbsp;cause&nbsp;the<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;direction&nbsp;or&nbsp;management&nbsp;of&nbsp;such&nbsp;entity,&nbsp;whether&nbsp;by&nbsp;contract&nbsp;or<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;otherwise,&nbsp;or&nbsp;(ii)&nbsp;ownership&nbsp;of&nbsp;fifty&nbsp;percent&nbsp;(50%)&nbsp;or&nbsp;more&nbsp;of&nbsp;the<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;outstanding&nbsp;shares,&nbsp;or&nbsp;(iii)&nbsp;beneficial&nbsp;ownership&nbsp;of&nbsp;such&nbsp;entity.<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;You&amp;quot;&nbsp;(or&nbsp;&amp;quot;Your&amp;quot;)&nbsp;shall&nbsp;mean&nbsp;an&nbsp;individual&nbsp;or&nbsp;Legal&nbsp;Entity<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;exercising&nbsp;permissions&nbsp;granted&nbsp;by&nbsp;this&nbsp;License.<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;Source&amp;quot;&nbsp;form&nbsp;shall&nbsp;mean&nbsp;the&nbsp;preferred&nbsp;form&nbsp;for&nbsp;making&nbsp;modifications,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;including&nbsp;but&nbsp;not&nbsp;limited&nbsp;to&nbsp;software&nbsp;source&nbsp;code,&nbsp;documentation<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;source,&nbsp;and&nbsp;configuration&nbsp;files.<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;Object&amp;quot;&nbsp;form&nbsp;shall&nbsp;mean&nbsp;any&nbsp;form&nbsp;resulting&nbsp;from&nbsp;mechanical<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;transformation&nbsp;or&nbsp;translation&nbsp;of&nbsp;a&nbsp;Source&nbsp;form,&nbsp;including&nbsp;but<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;not&nbsp;limited&nbsp;to&nbsp;compiled&nbsp;object&nbsp;code,&nbsp;generated&nbsp;documentation,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;conversions&nbsp;to&nbsp;other&nbsp;media&nbsp;types.<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;Work&amp;quot;&nbsp;shall&nbsp;mean&nbsp;the&nbsp;work&nbsp;of&nbsp;authorship,&nbsp;whether&nbsp;in&nbsp;Source&nbsp;or<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Object&nbsp;form,&nbsp;made&nbsp;available&nbsp;under&nbsp;the&nbsp;License,&nbsp;as&nbsp;indicated&nbsp;by&nbsp;a<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;copyright&nbsp;notice&nbsp;that&nbsp;is&nbsp;included&nbsp;in&nbsp;or&nbsp;attached&nbsp;to&nbsp;the&nbsp;work<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(an&nbsp;example&nbsp;is&nbsp;provided&nbsp;in&nbsp;the&nbsp;Appendix&nbsp;below).<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;Derivative&nbsp;Works&amp;quot;&nbsp;shall&nbsp;mean&nbsp;any&nbsp;work,&nbsp;whether&nbsp;in&nbsp;Source&nbsp;or&nbsp;Object<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;form,&nbsp;that&nbsp;is&nbsp;based&nbsp;on&nbsp;(or&nbsp;derived&nbsp;from)&nbsp;the&nbsp;Work&nbsp;and&nbsp;for&nbsp;which&nbsp;the<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;editorial&nbsp;revisions,&nbsp;annotations,&nbsp;elaborations,&nbsp;or&nbsp;other&nbsp;modifications<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;represent,&nbsp;as&nbsp;a&nbsp;whole,&nbsp;an&nbsp;original&nbsp;work&nbsp;of&nbsp;authorship.&nbsp;For&nbsp;the&nbsp;purposes<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;this&nbsp;License,&nbsp;Derivative&nbsp;Works&nbsp;shall&nbsp;not&nbsp;include&nbsp;works&nbsp;that&nbsp;remain<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;separable&nbsp;from,&nbsp;or&nbsp;merely&nbsp;link&nbsp;(or&nbsp;bind&nbsp;by&nbsp;name)&nbsp;to&nbsp;the&nbsp;interfaces&nbsp;of,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;Work&nbsp;and&nbsp;Derivative&nbsp;Works&nbsp;thereof.<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;Contribution&amp;quot;&nbsp;shall&nbsp;mean&nbsp;any&nbsp;work&nbsp;of&nbsp;authorship,&nbsp;including<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;original&nbsp;version&nbsp;of&nbsp;the&nbsp;Work&nbsp;and&nbsp;any&nbsp;modifications&nbsp;or&nbsp;additions<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;that&nbsp;Work&nbsp;or&nbsp;Derivative&nbsp;Works&nbsp;thereof,&nbsp;that&nbsp;is&nbsp;intentionally<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;submitted&nbsp;to&nbsp;Licensor&nbsp;for&nbsp;inclusion&nbsp;in&nbsp;the&nbsp;Work&nbsp;by&nbsp;the&nbsp;copyright&nbsp;owner<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;by&nbsp;an&nbsp;individual&nbsp;or&nbsp;Legal&nbsp;Entity&nbsp;authorized&nbsp;to&nbsp;submit&nbsp;on&nbsp;behalf&nbsp;of<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;copyright&nbsp;owner.&nbsp;For&nbsp;the&nbsp;purposes&nbsp;of&nbsp;this&nbsp;definition,&nbsp;&amp;quot;submitted&amp;quot;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;means&nbsp;any&nbsp;form&nbsp;of&nbsp;electronic,&nbsp;verbal,&nbsp;or&nbsp;written&nbsp;communication&nbsp;sent<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;to&nbsp;the&nbsp;Licensor&nbsp;or&nbsp;its&nbsp;representatives,&nbsp;including&nbsp;but&nbsp;not&nbsp;limited&nbsp;to<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;communication&nbsp;on&nbsp;electronic&nbsp;mailing&nbsp;lists,&nbsp;source&nbsp;code&nbsp;control&nbsp;systems,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;issue&nbsp;tracking&nbsp;systems&nbsp;that&nbsp;are&nbsp;managed&nbsp;by,&nbsp;or&nbsp;on&nbsp;behalf&nbsp;of,&nbsp;the<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Licensor&nbsp;for&nbsp;the&nbsp;purpose&nbsp;of&nbsp;discussing&nbsp;and&nbsp;improving&nbsp;the&nbsp;Work,&nbsp;but<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;excluding&nbsp;communication&nbsp;that&nbsp;is&nbsp;conspicuously&nbsp;marked&nbsp;or&nbsp;otherwise<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;designated&nbsp;in&nbsp;writing&nbsp;by&nbsp;the&nbsp;copyright&nbsp;owner&nbsp;as&nbsp;&amp;quot;Not&nbsp;a&nbsp;Contribution.&amp;quot;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;quot;Contributor&amp;quot;&nbsp;shall&nbsp;mean&nbsp;Licensor&nbsp;and&nbsp;any&nbsp;individual&nbsp;or&nbsp;Legal&nbsp;Entity<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;on&nbsp;behalf&nbsp;of&nbsp;whom&nbsp;a&nbsp;Contribution&nbsp;has&nbsp;been&nbsp;received&nbsp;by&nbsp;Licensor&nbsp;and<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;subsequently&nbsp;incorporated&nbsp;within&nbsp;the&nbsp;Work.<br>
+<br>
+&nbsp;&nbsp;&nbsp;2.&nbsp;Grant&nbsp;of&nbsp;Copyright&nbsp;License.&nbsp;Subject&nbsp;to&nbsp;the&nbsp;terms&nbsp;and&nbsp;conditions&nbsp;of<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;License,&nbsp;each&nbsp;Contributor&nbsp;hereby&nbsp;grants&nbsp;to&nbsp;You&nbsp;a&nbsp;perpetual,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;worldwide,&nbsp;non-exclusive,&nbsp;no-charge,&nbsp;royalty-free,&nbsp;irrevocable<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;copyright&nbsp;license&nbsp;to&nbsp;reproduce,&nbsp;prepare&nbsp;Derivative&nbsp;Works&nbsp;of,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;publicly&nbsp;display,&nbsp;publicly&nbsp;perform,&nbsp;sublicense,&nbsp;and&nbsp;distribute&nbsp;the<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Work&nbsp;and&nbsp;such&nbsp;Derivative&nbsp;Works&nbsp;in&nbsp;Source&nbsp;or&nbsp;Object&nbsp;form.<br>
+<br>
+&nbsp;&nbsp;&nbsp;3.&nbsp;Grant&nbsp;of&nbsp;Patent&nbsp;License.&nbsp;Subject&nbsp;to&nbsp;the&nbsp;terms&nbsp;and&nbsp;conditions&nbsp;of<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;License,&nbsp;each&nbsp;Contributor&nbsp;hereby&nbsp;grants&nbsp;to&nbsp;You&nbsp;a&nbsp;perpetual,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;worldwide,&nbsp;non-exclusive,&nbsp;no-charge,&nbsp;royalty-free,&nbsp;irrevocable<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(except&nbsp;as&nbsp;stated&nbsp;in&nbsp;this&nbsp;section)&nbsp;patent&nbsp;license&nbsp;to&nbsp;make,&nbsp;have&nbsp;made,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;use,&nbsp;offer&nbsp;to&nbsp;sell,&nbsp;sell,&nbsp;import,&nbsp;and&nbsp;otherwise&nbsp;transfer&nbsp;the&nbsp;Work,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;where&nbsp;such&nbsp;license&nbsp;applies&nbsp;only&nbsp;to&nbsp;those&nbsp;patent&nbsp;claims&nbsp;licensable<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;such&nbsp;Contributor&nbsp;that&nbsp;are&nbsp;necessarily&nbsp;infringed&nbsp;by&nbsp;their<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Contribution(s)&nbsp;alone&nbsp;or&nbsp;by&nbsp;combination&nbsp;of&nbsp;their&nbsp;Contribution(s)<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;the&nbsp;Work&nbsp;to&nbsp;which&nbsp;such&nbsp;Contribution(s)&nbsp;was&nbsp;submitted.&nbsp;If&nbsp;You<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;institute&nbsp;patent&nbsp;litigation&nbsp;against&nbsp;any&nbsp;entity&nbsp;(including&nbsp;a<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;cross-claim&nbsp;or&nbsp;counterclaim&nbsp;in&nbsp;a&nbsp;lawsuit)&nbsp;alleging&nbsp;that&nbsp;the&nbsp;Work<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;a&nbsp;Contribution&nbsp;incorporated&nbsp;within&nbsp;the&nbsp;Work&nbsp;constitutes&nbsp;direct<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;contributory&nbsp;patent&nbsp;infringement,&nbsp;then&nbsp;any&nbsp;patent&nbsp;licenses<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;granted&nbsp;to&nbsp;You&nbsp;under&nbsp;this&nbsp;License&nbsp;for&nbsp;that&nbsp;Work&nbsp;shall&nbsp;terminate<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;as&nbsp;of&nbsp;the&nbsp;date&nbsp;such&nbsp;litigation&nbsp;is&nbsp;filed.<br>
+<br>
+&nbsp;&nbsp;&nbsp;4.&nbsp;Redistribution.&nbsp;You&nbsp;may&nbsp;reproduce&nbsp;and&nbsp;distribute&nbsp;copies&nbsp;of&nbsp;the<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Work&nbsp;or&nbsp;Derivative&nbsp;Works&nbsp;thereof&nbsp;in&nbsp;any&nbsp;medium,&nbsp;with&nbsp;or&nbsp;without<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;modifications,&nbsp;and&nbsp;in&nbsp;Source&nbsp;or&nbsp;Object&nbsp;form,&nbsp;provided&nbsp;that&nbsp;You<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;meet&nbsp;the&nbsp;following&nbsp;conditions:<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(a)&nbsp;You&nbsp;must&nbsp;give&nbsp;any&nbsp;other&nbsp;recipients&nbsp;of&nbsp;the&nbsp;Work&nbsp;or<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Derivative&nbsp;Works&nbsp;a&nbsp;copy&nbsp;of&nbsp;this&nbsp;License;&nbsp;and<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(b)&nbsp;You&nbsp;must&nbsp;cause&nbsp;any&nbsp;modified&nbsp;files&nbsp;to&nbsp;carry&nbsp;prominent&nbsp;notices<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;stating&nbsp;that&nbsp;You&nbsp;changed&nbsp;the&nbsp;files;&nbsp;and<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(c)&nbsp;You&nbsp;must&nbsp;retain,&nbsp;in&nbsp;the&nbsp;Source&nbsp;form&nbsp;of&nbsp;any&nbsp;Derivative&nbsp;Works<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;You&nbsp;distribute,&nbsp;all&nbsp;copyright,&nbsp;patent,&nbsp;trademark,&nbsp;and<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;attribution&nbsp;notices&nbsp;from&nbsp;the&nbsp;Source&nbsp;form&nbsp;of&nbsp;the&nbsp;Work,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;excluding&nbsp;those&nbsp;notices&nbsp;that&nbsp;do&nbsp;not&nbsp;pertain&nbsp;to&nbsp;any&nbsp;part&nbsp;of<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;Derivative&nbsp;Works;&nbsp;and<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(d)&nbsp;If&nbsp;the&nbsp;Work&nbsp;includes&nbsp;a&nbsp;&amp;quot;NOTICE&amp;quot;&nbsp;text&nbsp;file&nbsp;as&nbsp;part&nbsp;of&nbsp;its<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;distribution,&nbsp;then&nbsp;any&nbsp;Derivative&nbsp;Works&nbsp;that&nbsp;You&nbsp;distribute&nbsp;must<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;include&nbsp;a&nbsp;readable&nbsp;copy&nbsp;of&nbsp;the&nbsp;attribution&nbsp;notices&nbsp;contained<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;within&nbsp;such&nbsp;NOTICE&nbsp;file,&nbsp;excluding&nbsp;those&nbsp;notices&nbsp;that&nbsp;do&nbsp;not<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pertain&nbsp;to&nbsp;any&nbsp;part&nbsp;of&nbsp;the&nbsp;Derivative&nbsp;Works,&nbsp;in&nbsp;at&nbsp;least&nbsp;one<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;following&nbsp;places:&nbsp;within&nbsp;a&nbsp;NOTICE&nbsp;text&nbsp;file&nbsp;distributed<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;as&nbsp;part&nbsp;of&nbsp;the&nbsp;Derivative&nbsp;Works;&nbsp;within&nbsp;the&nbsp;Source&nbsp;form&nbsp;or<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;documentation,&nbsp;if&nbsp;provided&nbsp;along&nbsp;with&nbsp;the&nbsp;Derivative&nbsp;Works;&nbsp;or,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;within&nbsp;a&nbsp;display&nbsp;generated&nbsp;by&nbsp;the&nbsp;Derivative&nbsp;Works,&nbsp;if&nbsp;and<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;wherever&nbsp;such&nbsp;third-party&nbsp;notices&nbsp;normally&nbsp;appear.&nbsp;The&nbsp;contents<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;the&nbsp;NOTICE&nbsp;file&nbsp;are&nbsp;for&nbsp;informational&nbsp;purposes&nbsp;only&nbsp;and<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;do&nbsp;not&nbsp;modify&nbsp;the&nbsp;License.&nbsp;You&nbsp;may&nbsp;add&nbsp;Your&nbsp;own&nbsp;attribution<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;notices&nbsp;within&nbsp;Derivative&nbsp;Works&nbsp;that&nbsp;You&nbsp;distribute,&nbsp;alongside<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;as&nbsp;an&nbsp;addendum&nbsp;to&nbsp;the&nbsp;NOTICE&nbsp;text&nbsp;from&nbsp;the&nbsp;Work,&nbsp;provided<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;that&nbsp;such&nbsp;additional&nbsp;attribution&nbsp;notices&nbsp;cannot&nbsp;be&nbsp;construed<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;as&nbsp;modifying&nbsp;the&nbsp;License.<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;You&nbsp;may&nbsp;add&nbsp;Your&nbsp;own&nbsp;copyright&nbsp;statement&nbsp;to&nbsp;Your&nbsp;modifications&nbsp;and<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;may&nbsp;provide&nbsp;additional&nbsp;or&nbsp;different&nbsp;license&nbsp;terms&nbsp;and&nbsp;conditions<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;use,&nbsp;reproduction,&nbsp;or&nbsp;distribution&nbsp;of&nbsp;Your&nbsp;modifications,&nbsp;or<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for&nbsp;any&nbsp;such&nbsp;Derivative&nbsp;Works&nbsp;as&nbsp;a&nbsp;whole,&nbsp;provided&nbsp;Your&nbsp;use,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;reproduction,&nbsp;and&nbsp;distribution&nbsp;of&nbsp;the&nbsp;Work&nbsp;otherwise&nbsp;complies&nbsp;with<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;conditions&nbsp;stated&nbsp;in&nbsp;this&nbsp;License.<br>
+<br>
+&nbsp;&nbsp;&nbsp;5.&nbsp;Submission&nbsp;of&nbsp;Contributions.&nbsp;Unless&nbsp;You&nbsp;explicitly&nbsp;state&nbsp;otherwise,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;any&nbsp;Contribution&nbsp;intentionally&nbsp;submitted&nbsp;for&nbsp;inclusion&nbsp;in&nbsp;the&nbsp;Work<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;by&nbsp;You&nbsp;to&nbsp;the&nbsp;Licensor&nbsp;shall&nbsp;be&nbsp;under&nbsp;the&nbsp;terms&nbsp;and&nbsp;conditions&nbsp;of<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this&nbsp;License,&nbsp;without&nbsp;any&nbsp;additional&nbsp;terms&nbsp;or&nbsp;conditions.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Notwithstanding&nbsp;the&nbsp;above,&nbsp;nothing&nbsp;herein&nbsp;shall&nbsp;supersede&nbsp;or&nbsp;modify<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;terms&nbsp;of&nbsp;any&nbsp;separate&nbsp;license&nbsp;agreement&nbsp;you&nbsp;may&nbsp;have&nbsp;executed<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;with&nbsp;Licensor&nbsp;regarding&nbsp;such&nbsp;Contributions.<br>
+<br>
+&nbsp;&nbsp;&nbsp;6.&nbsp;Trademarks.&nbsp;This&nbsp;License&nbsp;does&nbsp;not&nbsp;grant&nbsp;permission&nbsp;to&nbsp;use&nbsp;the&nbsp;trade<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;names,&nbsp;trademarks,&nbsp;service&nbsp;marks,&nbsp;or&nbsp;product&nbsp;names&nbsp;of&nbsp;the&nbsp;Licensor,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;except&nbsp;as&nbsp;required&nbsp;for&nbsp;reasonable&nbsp;and&nbsp;customary&nbsp;use&nbsp;in&nbsp;describing&nbsp;the<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;origin&nbsp;of&nbsp;the&nbsp;Work&nbsp;and&nbsp;reproducing&nbsp;the&nbsp;content&nbsp;of&nbsp;the&nbsp;NOTICE&nbsp;file.<br>
+<br>
+&nbsp;&nbsp;&nbsp;7.&nbsp;Disclaimer&nbsp;of&nbsp;Warranty.&nbsp;Unless&nbsp;required&nbsp;by&nbsp;applicable&nbsp;law&nbsp;or<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;agreed&nbsp;to&nbsp;in&nbsp;writing,&nbsp;Licensor&nbsp;provides&nbsp;the&nbsp;Work&nbsp;(and&nbsp;each<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Contributor&nbsp;provides&nbsp;its&nbsp;Contributions)&nbsp;on&nbsp;an&nbsp;&amp;quot;AS&nbsp;IS&amp;quot;&nbsp;BASIS,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;WITHOUT&nbsp;WARRANTIES&nbsp;OR&nbsp;CONDITIONS&nbsp;OF&nbsp;ANY&nbsp;KIND,&nbsp;either&nbsp;express&nbsp;or<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;implied,&nbsp;including,&nbsp;without&nbsp;limitation,&nbsp;any&nbsp;warranties&nbsp;or&nbsp;conditions<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;TITLE,&nbsp;NON-INFRINGEMENT,&nbsp;MERCHANTABILITY,&nbsp;or&nbsp;FITNESS&nbsp;FOR&nbsp;A<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;PARTICULAR&nbsp;PURPOSE.&nbsp;You&nbsp;are&nbsp;solely&nbsp;responsible&nbsp;for&nbsp;determining&nbsp;the<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;appropriateness&nbsp;of&nbsp;using&nbsp;or&nbsp;redistributing&nbsp;the&nbsp;Work&nbsp;and&nbsp;assume&nbsp;any<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;risks&nbsp;associated&nbsp;with&nbsp;Your&nbsp;exercise&nbsp;of&nbsp;permissions&nbsp;under&nbsp;this&nbsp;License.<br>
+<br>
+&nbsp;&nbsp;&nbsp;8.&nbsp;Limitation&nbsp;of&nbsp;Liability.&nbsp;In&nbsp;no&nbsp;event&nbsp;and&nbsp;under&nbsp;no&nbsp;legal&nbsp;theory,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;whether&nbsp;in&nbsp;tort&nbsp;(including&nbsp;negligence),&nbsp;contract,&nbsp;or&nbsp;otherwise,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;unless&nbsp;required&nbsp;by&nbsp;applicable&nbsp;law&nbsp;(such&nbsp;as&nbsp;deliberate&nbsp;and&nbsp;grossly<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;negligent&nbsp;acts)&nbsp;or&nbsp;agreed&nbsp;to&nbsp;in&nbsp;writing,&nbsp;shall&nbsp;any&nbsp;Contributor&nbsp;be<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;liable&nbsp;to&nbsp;You&nbsp;for&nbsp;damages,&nbsp;including&nbsp;any&nbsp;direct,&nbsp;indirect,&nbsp;special,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;incidental,&nbsp;or&nbsp;consequential&nbsp;damages&nbsp;of&nbsp;any&nbsp;character&nbsp;arising&nbsp;as&nbsp;a<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;result&nbsp;of&nbsp;this&nbsp;License&nbsp;or&nbsp;out&nbsp;of&nbsp;the&nbsp;use&nbsp;or&nbsp;inability&nbsp;to&nbsp;use&nbsp;the<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Work&nbsp;(including&nbsp;but&nbsp;not&nbsp;limited&nbsp;to&nbsp;damages&nbsp;for&nbsp;loss&nbsp;of&nbsp;goodwill,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;work&nbsp;stoppage,&nbsp;computer&nbsp;failure&nbsp;or&nbsp;malfunction,&nbsp;or&nbsp;any&nbsp;and&nbsp;all<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;other&nbsp;commercial&nbsp;damages&nbsp;or&nbsp;losses),&nbsp;even&nbsp;if&nbsp;such&nbsp;Contributor<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;has&nbsp;been&nbsp;advised&nbsp;of&nbsp;the&nbsp;possibility&nbsp;of&nbsp;such&nbsp;damages.<br>
+<br>
+&nbsp;&nbsp;&nbsp;9.&nbsp;Accepting&nbsp;Warranty&nbsp;or&nbsp;Additional&nbsp;Liability.&nbsp;While&nbsp;redistributing<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;Work&nbsp;or&nbsp;Derivative&nbsp;Works&nbsp;thereof,&nbsp;You&nbsp;may&nbsp;choose&nbsp;to&nbsp;offer,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;and&nbsp;charge&nbsp;a&nbsp;fee&nbsp;for,&nbsp;acceptance&nbsp;of&nbsp;support,&nbsp;warranty,&nbsp;indemnity,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;or&nbsp;other&nbsp;liability&nbsp;obligations&nbsp;and/or&nbsp;rights&nbsp;consistent&nbsp;with&nbsp;this<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;License.&nbsp;However,&nbsp;in&nbsp;accepting&nbsp;such&nbsp;obligations,&nbsp;You&nbsp;may&nbsp;act&nbsp;only<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;on&nbsp;Your&nbsp;own&nbsp;behalf&nbsp;and&nbsp;on&nbsp;Your&nbsp;sole&nbsp;responsibility,&nbsp;not&nbsp;on&nbsp;behalf<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;any&nbsp;other&nbsp;Contributor,&nbsp;and&nbsp;only&nbsp;if&nbsp;You&nbsp;agree&nbsp;to&nbsp;indemnify,<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;defend,&nbsp;and&nbsp;hold&nbsp;each&nbsp;Contributor&nbsp;harmless&nbsp;for&nbsp;any&nbsp;liability<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;incurred&nbsp;by,&nbsp;or&nbsp;claims&nbsp;asserted&nbsp;against,&nbsp;such&nbsp;Contributor&nbsp;by&nbsp;reason<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;of&nbsp;your&nbsp;accepting&nbsp;any&nbsp;such&nbsp;warranty&nbsp;or&nbsp;additional&nbsp;liability.<br>
+<br>
+&nbsp;&nbsp;&nbsp;END&nbsp;OF&nbsp;TERMS&nbsp;AND&nbsp;CONDITIONS<br>
+<br>
+&nbsp;&nbsp;&nbsp;APPENDIX:&nbsp;How&nbsp;to&nbsp;apply&nbsp;the&nbsp;Apache&nbsp;License&nbsp;to&nbsp;your&nbsp;work.<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;To&nbsp;apply&nbsp;the&nbsp;Apache&nbsp;License&nbsp;to&nbsp;your&nbsp;work,&nbsp;attach&nbsp;the&nbsp;following<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;boilerplate&nbsp;notice,&nbsp;with&nbsp;the&nbsp;fields&nbsp;enclosed&nbsp;by&nbsp;brackets&nbsp;&amp;quot;[]&amp;quot;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;replaced&nbsp;with&nbsp;your&nbsp;own&nbsp;identifying&nbsp;information.&nbsp;(Don't&nbsp;include<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;the&nbsp;brackets!)&nbsp;&nbsp;The&nbsp;text&nbsp;should&nbsp;be&nbsp;enclosed&nbsp;in&nbsp;the&nbsp;appropriate<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;comment&nbsp;syntax&nbsp;for&nbsp;the&nbsp;file&nbsp;format.&nbsp;We&nbsp;also&nbsp;recommend&nbsp;that&nbsp;a<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;file&nbsp;or&nbsp;class&nbsp;name&nbsp;and&nbsp;description&nbsp;of&nbsp;purpose&nbsp;be&nbsp;included&nbsp;on&nbsp;the<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;same&nbsp;&amp;quot;printed&nbsp;page&amp;quot;&nbsp;as&nbsp;the&nbsp;copyright&nbsp;notice&nbsp;for&nbsp;easier<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;identification&nbsp;within&nbsp;third-party&nbsp;archives.<br>
+<br>
+&nbsp;&nbsp;&nbsp;Copyright&nbsp;[yyyy]&nbsp;[name&nbsp;of&nbsp;copyright&nbsp;owner]<br>
+<br>
+&nbsp;&nbsp;&nbsp;Licensed&nbsp;under&nbsp;the&nbsp;Apache&nbsp;License,&nbsp;Version&nbsp;2.0&nbsp;(the&nbsp;&amp;quot;License&amp;quot;);<br>
+&nbsp;&nbsp;&nbsp;you&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the&nbsp;License.<br>
+&nbsp;&nbsp;&nbsp;You&nbsp;may&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;http://www.apache.org/licenses/LICENSE-2.0<br>
+<br>
+&nbsp;&nbsp;&nbsp;Unless&nbsp;required&nbsp;by&nbsp;applicable&nbsp;law&nbsp;or&nbsp;agreed&nbsp;to&nbsp;in&nbsp;writing,&nbsp;software<br>
+&nbsp;&nbsp;&nbsp;distributed&nbsp;under&nbsp;the&nbsp;License&nbsp;is&nbsp;distributed&nbsp;on&nbsp;an&nbsp;&amp;quot;AS&nbsp;IS&amp;quot;&nbsp;BASIS,<br>
+&nbsp;&nbsp;&nbsp;WITHOUT&nbsp;WARRANTIES&nbsp;OR&nbsp;CONDITIONS&nbsp;OF&nbsp;ANY&nbsp;KIND,&nbsp;either&nbsp;express&nbsp;or&nbsp;implied.<br>
+&nbsp;&nbsp;&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permissions&nbsp;and<br>
+&nbsp;&nbsp;&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.<br>
+<br>
&lt;/ins&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunklegalmittxt&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/legal/mit.txt&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/legal/mit.txt&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/legal/mit.txt&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,18&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+The&nbsp;MIT&nbsp;License&nbsp;(MIT)<br>
+Copyright&nbsp;©&nbsp;2012&nbsp;&amp;lt;copyright&nbsp;holders&amp;gt;<br>
+<br>
+Permission&nbsp;is&nbsp;hereby&nbsp;granted,&nbsp;free&nbsp;of&nbsp;charge,&nbsp;to&nbsp;any&nbsp;person&nbsp;obtaining&nbsp;a&nbsp;copy&nbsp;of&nbsp;this&nbsp;software<br>
+and&nbsp;associated&nbsp;documentation&nbsp;files&nbsp;(the&nbsp;“Software”),&nbsp;to&nbsp;deal&nbsp;in&nbsp;the&nbsp;Software&nbsp;without&nbsp;restriction,<br>
+including&nbsp;without&nbsp;limitation&nbsp;the&nbsp;rights&nbsp;to&nbsp;use,&nbsp;copy,&nbsp;modify,&nbsp;merge,&nbsp;publish,&nbsp;distribute,&nbsp;sublicense,<br>
+and/or&nbsp;sell&nbsp;copies&nbsp;of&nbsp;the&nbsp;Software,&nbsp;and&nbsp;to&nbsp;permit&nbsp;persons&nbsp;to&nbsp;whom&nbsp;the&nbsp;Software&nbsp;is&nbsp;furnished&nbsp;to&nbsp;do&nbsp;so,<br>
+subject&nbsp;to&nbsp;the&nbsp;following&nbsp;conditions:<br>
+<br>
+The&nbsp;above&nbsp;copyright&nbsp;notice&nbsp;and&nbsp;this&nbsp;permission&nbsp;notice&nbsp;shall&nbsp;be&nbsp;included&nbsp;in&nbsp;all&nbsp;copies&nbsp;or&nbsp;substantial<br>
+portions&nbsp;of&nbsp;the&nbsp;Software.<br>
+<br>
+THE&nbsp;SOFTWARE&nbsp;IS&nbsp;PROVIDED&nbsp;“AS&nbsp;IS”,&nbsp;WITHOUT&nbsp;WARRANTY&nbsp;OF&nbsp;ANY&nbsp;KIND,&nbsp;EXPRESS&nbsp;OR&nbsp;IMPLIED,<br>
+INCLUDING&nbsp;BUT&nbsp;NOT&nbsp;LIMITED&nbsp;TO&nbsp;THE&nbsp;WARRANTIES&nbsp;OF&nbsp;MERCHANTABILITY,<br>
+FITNESS&nbsp;FOR&nbsp;A&nbsp;PARTICULAR&nbsp;PURPOSE&nbsp;AND&nbsp;NONINFRINGEMENT.<br>
+IN&nbsp;NO&nbsp;EVENT&nbsp;SHALL&nbsp;THE&nbsp;AUTHORS&nbsp;OR&nbsp;COPYRIGHT&nbsp;HOLDERS&nbsp;BE&nbsp;LIABLE&nbsp;FOR&nbsp;ANY&nbsp;CLAIM,<br>
+DAMAGES&nbsp;OR&nbsp;OTHER&nbsp;LIABILITY,&nbsp;WHETHER&nbsp;IN&nbsp;AN&nbsp;ACTION&nbsp;OF&nbsp;CONTRACT,&nbsp;TORT&nbsp;OR&nbsp;OTHERWISE,<br>
+ARISING&nbsp;FROM,&nbsp;OUT&nbsp;OF&nbsp;OR&nbsp;IN&nbsp;CONNECTION&nbsp;WITH&nbsp;THE&nbsp;SOFTWARE&nbsp;OR&nbsp;THE&nbsp;USE&nbsp;OR&nbsp;OTHER&nbsp;DEALINGS&nbsp;IN&nbsp;THE&nbsp;SOFTWARE.<br>
&lt;/ins&gt;&lt;span&nbsp;class=&quot;cx&quot;&gt;\&nbsp;No&nbsp;newline&nbsp;at&nbsp;end&nbsp;of&nbsp;file<br>
&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;&lt;/div&gt;<br>
&lt;a&nbsp;id=&quot;forgerockbloomfiltertrunkpomxml&quot;&gt;&lt;/a&gt;<br>
&lt;div&nbsp;class=&quot;addfile&quot;&gt;&lt;h4&gt;Added:&nbsp;forgerock-bloomfilter/trunk/pom.xml&nbsp;(0&nbsp;=&gt;&nbsp;2965)&lt;/h4&gt;<br>
&lt;pre&nbsp;class=&quot;diff&quot;&gt;&lt;span&gt;<br>
&lt;span&nbsp;class=&quot;info&quot;&gt;---&nbsp;forgerock-bloomfilter/trunk/pom.xml&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rev&nbsp;0)<br>
+++&nbsp;forgerock-bloomfilter/trunk/pom.xml&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2015-02-25&nbsp;13:51:47&nbsp;UTC&nbsp;(rev&nbsp;2965)<br>
&lt;/span&gt;&lt;span&nbsp;class=&quot;lines&quot;&gt;@@&nbsp;-0,0&nbsp;+1,153&nbsp;@@<br>
&lt;/span&gt;&lt;ins&gt;+&amp;lt;?xml&nbsp;version=&amp;quot;1.0&amp;quot;&nbsp;encoding=&amp;quot;UTF-8&amp;quot;?&amp;gt;<br>
+&amp;lt;!--<br>
+&nbsp;&nbsp;~&nbsp;The&nbsp;contents&nbsp;of&nbsp;this&nbsp;file&nbsp;are&nbsp;subject&nbsp;to&nbsp;the&nbsp;terms&nbsp;of&nbsp;the&nbsp;Common&nbsp;Development&nbsp;and<br>
+&nbsp;&nbsp;~&nbsp;Distribution&nbsp;License&nbsp;(the&nbsp;License).&nbsp;You&nbsp;may&nbsp;not&nbsp;use&nbsp;this&nbsp;file&nbsp;except&nbsp;in&nbsp;compliance&nbsp;with&nbsp;the<br>
+&nbsp;&nbsp;~&nbsp;License.<br>
+&nbsp;&nbsp;~<br>
+&nbsp;&nbsp;~&nbsp;You&nbsp;can&nbsp;obtain&nbsp;a&nbsp;copy&nbsp;of&nbsp;the&nbsp;License&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;See&nbsp;the&nbsp;License&nbsp;for&nbsp;the<br>
+&nbsp;&nbsp;~&nbsp;specific&nbsp;language&nbsp;governing&nbsp;permission&nbsp;and&nbsp;limitations&nbsp;under&nbsp;the&nbsp;License.<br>
+&nbsp;&nbsp;~<br>
+&nbsp;&nbsp;~&nbsp;When&nbsp;distributing&nbsp;Covered&nbsp;Software,&nbsp;include&nbsp;this&nbsp;CDDL&nbsp;Header&nbsp;Notice&nbsp;in&nbsp;each&nbsp;file&nbsp;and&nbsp;include<br>
+&nbsp;&nbsp;~&nbsp;the&nbsp;License&nbsp;file&nbsp;at&nbsp;legal/CDDLv1.0.txt.&nbsp;If&nbsp;applicable,&nbsp;add&nbsp;the&nbsp;following&nbsp;below&nbsp;the&nbsp;CDDL<br>
+&nbsp;&nbsp;~&nbsp;Header,&nbsp;with&nbsp;the&nbsp;fields&nbsp;enclosed&nbsp;by&nbsp;brackets&nbsp;[]&nbsp;replaced&nbsp;by&nbsp;your&nbsp;own&nbsp;identifying<br>
+&nbsp;&nbsp;~&nbsp;information:&nbsp;&amp;quot;Portions&nbsp;copyright&nbsp;[year]&nbsp;[name&nbsp;of&nbsp;copyright&nbsp;owner]&amp;quot;.<br>
+&nbsp;&nbsp;~<br>
+&nbsp;&nbsp;~&nbsp;Copyright&nbsp;2015&nbsp;ForgeRock&nbsp;AS.<br>
+&nbsp;&nbsp;--&amp;gt;<br>
+<br>
+&amp;lt;project&nbsp;xmlns=&amp;quot;http://maven.apache.org/POM/4.0.0&amp;quot;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xmlns:xsi=&amp;quot;http://www.w3.org/2001/XMLSchema-instance&amp;quot;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;xsi:schemaLocation=&amp;quot;http://maven.apache.org/POM/4.0.0&nbsp;http://maven.apache.org/xsd/maven-4.0.0.xsd&amp;quot;&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;modelVersion&amp;gt;4.0.0&amp;lt;/modelVersion&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;parent&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;groupId&amp;gt;org.forgerock&amp;lt;/groupId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;artifactId&amp;gt;forgerock-parent&amp;lt;/artifactId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;version&amp;gt;1.2.1&amp;lt;/version&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/parent&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;groupId&amp;gt;org.forgerock.commons&amp;lt;/groupId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;artifactId&amp;gt;forgerock-bloomfilter&amp;lt;/artifactId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;version&amp;gt;1.0-SNAPSHOT&amp;lt;/version&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;name&amp;gt;ForgeRock&nbsp;Bloom&nbsp;Filters&amp;lt;/name&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;description&amp;gt;Thread-safe&nbsp;implementations&nbsp;of&nbsp;scalable&nbsp;and&nbsp;rolling&nbsp;Bloom&nbsp;Filters.&amp;lt;/description&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;packaging&amp;gt;pom&amp;lt;/packaging&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;licenses&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;license&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;name&amp;gt;CDDL-1.0&amp;lt;/name&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;url&amp;gt;http://www.opensource.org/licenses/CDDL-1.0&amp;lt;/url&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;comments&amp;gt;Common&nbsp;Development&nbsp;and&nbsp;Distribution&nbsp;License&nbsp;(CDDL)&nbsp;1.0.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This&nbsp;license&nbsp;applies&nbsp;to&nbsp;OpenAM&nbsp;source&nbsp;code&nbsp;as&nbsp;indicated&nbsp;in&nbsp;the<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sources&nbsp;themselves.<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/comments&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;distribution&amp;gt;repo&amp;lt;/distribution&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/license&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/licenses&amp;gt;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;properties&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;maven.compiler.target&amp;gt;1.6&amp;lt;/maven.compiler.target&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;maven.compiler.source&amp;gt;1.6&amp;lt;/maven.compiler.source&amp;gt;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;forgerock.guava.version&amp;gt;18.0.1&amp;lt;/forgerock.guava.version&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;forgerock.util.version&amp;gt;1.3.5&amp;lt;/forgerock.util.version&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;hdrhistogram.version&amp;gt;2.0.3&amp;lt;/hdrhistogram.version&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;jsr.305.version&amp;gt;3.0.0&amp;lt;/jsr.305.version&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;slf4j.version&amp;gt;1.7.5&amp;lt;/slf4j.version&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;assertj.version&amp;gt;1.6.1&amp;lt;/assertj.version&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;mockito.version&amp;gt;1.9.5&amp;lt;/mockito.version&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;testng.version&amp;gt;6.0.1&amp;lt;/testng.version&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/properties&amp;gt;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;modules&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;module&amp;gt;bloomfilter-core&amp;lt;/module&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;module&amp;gt;bloomfilter-monitoring&amp;lt;/module&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/modules&amp;gt;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;dependencyManagement&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;dependencies&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;groupId&amp;gt;org.forgerock.commons&amp;lt;/groupId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;artifactId&amp;gt;forgerock-util&amp;lt;/artifactId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;version&amp;gt;${forgerock.util.version}&amp;lt;/version&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/dependency&amp;gt;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;!--&nbsp;License:&nbsp;legal/apache-v2.0.txt&nbsp;--&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;groupId&amp;gt;org.forgerock.commons.guava&amp;lt;/groupId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;artifactId&amp;gt;forgerock-guava-hash&amp;lt;/artifactId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;version&amp;gt;${forgerock.guava.version}&amp;lt;/version&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;!--&nbsp;License:&nbsp;legal/BSD-3-clause.txt&nbsp;--&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;groupId&amp;gt;com.google.code.findbugs&amp;lt;/groupId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;artifactId&amp;gt;jsr305&amp;lt;/artifactId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;version&amp;gt;${jsr.305.version}&amp;lt;/version&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;optional&amp;gt;true&amp;lt;/optional&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;!--&nbsp;License:&nbsp;legal/mit.txt&nbsp;--&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;groupId&amp;gt;org.slf4j&amp;lt;/groupId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;artifactId&amp;gt;slf4j-api&amp;lt;/artifactId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;version&amp;gt;${slf4j.version}&amp;lt;/version&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;!--&nbsp;License:&nbsp;legal/CC-Public-Domain.txt&nbsp;--&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;groupId&amp;gt;org.hdrhistogram&amp;lt;/groupId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;artifactId&amp;gt;HdrHistogram&amp;lt;/artifactId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;version&amp;gt;${hdrhistogram.version}&amp;lt;/version&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/dependency&amp;gt;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;!--&nbsp;Test&nbsp;dependencies&nbsp;--&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;groupId&amp;gt;org.assertj&amp;lt;/groupId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;artifactId&amp;gt;assertj-core&amp;lt;/artifactId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;version&amp;gt;${assertj.version}&amp;lt;/version&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;groupId&amp;gt;org.mockito&amp;lt;/groupId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;artifactId&amp;gt;mockito-all&amp;lt;/artifactId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;version&amp;gt;${mockito.version}&amp;lt;/version&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;groupId&amp;gt;org.testng&amp;lt;/groupId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;artifactId&amp;gt;testng&amp;lt;/artifactId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;version&amp;gt;${testng.version}&amp;lt;/version&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/dependencies&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/dependencyManagement&amp;gt;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;dependencies&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;!--&nbsp;Test&nbsp;dependencies&nbsp;--&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;groupId&amp;gt;org.assertj&amp;lt;/groupId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;artifactId&amp;gt;assertj-core&amp;lt;/artifactId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;version&amp;gt;${assertj.version}&amp;lt;/version&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;groupId&amp;gt;org.mockito&amp;lt;/groupId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;artifactId&amp;gt;mockito-all&amp;lt;/artifactId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;version&amp;gt;${mockito.version}&amp;lt;/version&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;groupId&amp;gt;org.testng&amp;lt;/groupId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;artifactId&amp;gt;testng&amp;lt;/artifactId&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;version&amp;gt;${testng.version}&amp;lt;/version&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;scope&amp;gt;test&amp;lt;/scope&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/dependency&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/dependencies&amp;gt;<br>
+<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;repositories&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;repository&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;id&amp;gt;forgerock-staging-repository&amp;lt;/id&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;name&amp;gt;ForgeRock&nbsp;Release&nbsp;Repository&amp;lt;/name&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;url&amp;gt;http://maven.forgerock.org/repo/releases&amp;lt;/url&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;snapshots&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;enabled&amp;gt;false&amp;lt;/enabled&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/snapshots&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/repository&amp;gt;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&amp;lt;/repositories&amp;gt;<br>
+<br>
+&amp;lt;/project&amp;gt;<br>
&lt;/ins&gt;&lt;span&nbsp;class=&quot;cx&quot;&gt;\&nbsp;No&nbsp;newline&nbsp;at&nbsp;end&nbsp;of&nbsp;file<br>
&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;div&nbsp;id=&quot;footer&quot;&gt;Copyright&nbsp;(c)&nbsp;by&nbsp;ForgeRock.&nbsp;All&nbsp;rights&nbsp;reserved.&lt;/div&gt;<br>
<br>
&lt;/body&gt;<br>
&lt;/html&gt;<br>

</tt>
