<tt>
&lt;div&nbsp;dir=&quot;ltr&quot;&gt;Hi&nbsp;Chad,&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Originally&nbsp;when&nbsp;I&nbsp;wrote&nbsp;the&nbsp;PatchOperation&nbsp;class&nbsp;I&nbsp;was&nbsp;unsure&nbsp;whether&nbsp;the&nbsp;operation&nbsp;types&nbsp;&amp;quot;add&amp;quot;,&nbsp;&amp;quot;remove&amp;quot;,&nbsp;&amp;quot;replace&amp;quot;,&nbsp;and&nbsp;&amp;quot;increment&amp;quot;&nbsp;would&nbsp;be&nbsp;sufficient&nbsp;for&nbsp;all&nbsp;applications.&nbsp;They&nbsp;are&nbsp;sufficient&nbsp;for&nbsp;Rest2LDAP,&nbsp;but&nbsp;I&nbsp;noticed&nbsp;that&nbsp;Paul&nbsp;B&amp;#39;s&nbsp;patch&nbsp;internet&nbsp;draft&nbsp;included&nbsp;some&nbsp;additional&nbsp;operations,&nbsp;such&nbsp;as&nbsp;&amp;quot;move&amp;quot;&nbsp;and&nbsp;&amp;quot;copy&amp;quot;.&nbsp;Therefore,&nbsp;to&nbsp;make&nbsp;this&nbsp;class&nbsp;extensible,&nbsp;I&nbsp;opted&nbsp;to&nbsp;&lt;i&gt;not&lt;/i&gt;&nbsp;use&nbsp;an&nbsp;enum&nbsp;and&nbsp;instead&nbsp;go&nbsp;for&nbsp;the&nbsp;weaker&nbsp;string&nbsp;based&nbsp;design&nbsp;that&nbsp;we&nbsp;have&nbsp;at&nbsp;the&nbsp;moment.&lt;div&gt;<br>
&lt;br&gt;&lt;/div&gt;&lt;div&gt;This&nbsp;change&nbsp;suggests&nbsp;that&nbsp;perhaps&nbsp;the&nbsp;current&nbsp;four&nbsp;operation&nbsp;types&nbsp;(&amp;quot;add&amp;quot;,&nbsp;&amp;quot;remove&amp;quot;,&nbsp;&amp;quot;replace&amp;quot;,&nbsp;and&nbsp;&amp;quot;increment&amp;quot;)&nbsp;are&nbsp;sufficient&nbsp;after&nbsp;all.&nbsp;Do&nbsp;you&nbsp;agree?&nbsp;If&nbsp;so&nbsp;then&nbsp;I&nbsp;think&nbsp;it&nbsp;would&nbsp;be&nbsp;reasonable&nbsp;to&nbsp;convert&nbsp;this&nbsp;class&nbsp;to&nbsp;an&nbsp;enum&nbsp;based&nbsp;implementation.&lt;/div&gt;<br>
&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Let&nbsp;me&nbsp;know&nbsp;what&nbsp;you&nbsp;think.&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;div&gt;Matt&lt;/div&gt;&lt;div&gt;&lt;br&gt;&lt;/div&gt;&lt;/div&gt;&lt;/div&gt;&lt;div&nbsp;class=&quot;gmail_extra&quot;&gt;&lt;br&gt;&lt;br&gt;&lt;div&nbsp;class=&quot;gmail_quote&quot;&gt;On&nbsp;Fri,&nbsp;Nov&nbsp;22,&nbsp;2013&nbsp;at&nbsp;7:57&nbsp;PM,&nbsp;&nbsp;&lt;span&nbsp;dir=&quot;ltr&quot;&gt;&amp;lt;&lt;a&nbsp;href=&quot;mailto:noreply@forgerock.org&quot;&nbsp;target=&quot;_blank&quot;&gt;noreply@forgerock.org&lt;/a&gt;&amp;gt;&lt;/span&gt;&nbsp;wrote:&lt;br&gt;<br>
&lt;blockquote&nbsp;class=&quot;gmail_quote&quot;&nbsp;style=&quot;margin:0&nbsp;0&nbsp;0&nbsp;.8ex;border-left:1px&nbsp;#ccc&nbsp;solid;padding-left:1ex&quot;&gt;&lt;u&gt;&lt;/u&gt;<br>
<br>
<br>
<br>
<br>
&lt;div&gt;<br>
<br>
<br>
&lt;div&gt;<br>
&lt;dl&gt;<br>
&lt;dt&gt;Revision&lt;/dt&gt;&nbsp;&lt;dd&gt;&lt;a&nbsp;href=&quot;http://sources.forgerock.org/changelog/commons/?cs=1308&quot;&nbsp;target=&quot;_blank&quot;&gt;1308&lt;/a&gt;&lt;/dd&gt;<br>
&lt;dt&gt;Author&lt;/dt&gt;&nbsp;&lt;dd&gt;chad.kienle&lt;/dd&gt;<br>
&lt;dt&gt;Date&lt;/dt&gt;&nbsp;&lt;dd&gt;2013-11-22&nbsp;18:57:05&nbsp;+0000&nbsp;(Fri,&nbsp;22&nbsp;Nov&nbsp;2013)&lt;/dd&gt;<br>
&lt;/dl&gt;<br>
<br>
&lt;h3&gt;Log&nbsp;Message&lt;/h3&gt;<br>
&lt;pre&gt;[CR-2569]&nbsp;Added&nbsp;type&nbsp;checking&nbsp;in&nbsp;PatchOperation&nbsp;constructor&nbsp;and&nbsp;fixed&nbsp;the&nbsp;toJsonValue&nbsp;to&nbsp;set&nbsp;the&nbsp;field&nbsp;value&nbsp;to&nbsp;a&nbsp;string&lt;/pre&gt;<br>
<br>
&lt;h3&gt;Modified&nbsp;Paths&lt;/h3&gt;<br>
&lt;ul&gt;<br>
&lt;li&gt;&lt;a&nbsp;href=&quot;#142812c4e4f1483f_forgerockresttrunkjsonresourcesrcmainjavaorgforgerockjsonresourcePatchOperationjava&quot;&gt;forgerock-rest/trunk/json-resource/src/main/java/org/forgerock/json/resource/PatchOperation.java&lt;/a&gt;&lt;/li&gt;<br>
<br>
&lt;/ul&gt;<br>
<br>
&lt;/div&gt;<br>
&lt;div&gt;<br>
&lt;h3&gt;Diff&lt;/h3&gt;<br>
&lt;a&gt;&lt;/a&gt;<br>
&lt;div&gt;&lt;h4&gt;Modified:&nbsp;forgerock-rest/trunk/json-resource/src/main/java/org/forgerock/json/resource/PatchOperation.java&nbsp;(1307&nbsp;=&amp;gt;&nbsp;1308)&lt;/h4&gt;<br>
&lt;pre&gt;&lt;span&gt;<br>
&lt;span&gt;---&nbsp;forgerock-rest/trunk/json-resource/src/main/java/org/forgerock/json/resource/PatchOperation.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2013-11-22&nbsp;09:37:34&nbsp;UTC&nbsp;(rev&nbsp;1307)<br>
+++&nbsp;forgerock-rest/trunk/json-resource/src/main/java/org/forgerock/json/resource/PatchOperation.java&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp&nbsp2013-11-22&nbsp;18:57:05&nbsp;UTC&nbsp;(rev&nbsp;1308)<br>
&lt;/span&gt;&lt;span&gt;@@&nbsp;-434,6&nbsp;+434,7&nbsp;@@<br>
&lt;/span&gt;&lt;span&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.operation&nbsp;=&nbsp;checkNotNull(operation,&nbsp;&amp;quot;Cannot&nbsp;instantiate&nbsp;PatchOperation&nbsp;with&nbsp;null&nbsp;operation&nbsp;value&amp;quot;);<br>
&lt;/span&gt;&lt;span&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.field&nbsp;=&nbsp;checkNotNull(field,&nbsp;&amp;quot;Cannot&nbsp;instantiate&nbsp;PatchOperation&nbsp;with&nbsp;null&nbsp;field&nbsp;value&amp;quot;);<br>
&lt;/span&gt;&lt;span&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;this.value&nbsp;=&nbsp;value&nbsp;!=&nbsp;null&nbsp;?&nbsp;value&nbsp;:&nbsp;new&nbsp;JsonValue(null);<br>
&lt;/span&gt;&lt;ins&gt;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;checkOperationType();<br>
&lt;/ins&gt;&lt;span&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;checkOperationValue();<br>
&lt;/span&gt;&lt;span&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&lt;/span&gt;&lt;span&gt;&nbsp;<br>
&lt;/span&gt;&lt;span&gt;@@&nbsp;-509,7&nbsp;+510,7&nbsp;@@<br>
&lt;/span&gt;&lt;span&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;public&nbsp;JsonValue&nbsp;toJsonValue()&nbsp;{<br>
&lt;/span&gt;&lt;span&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;final&nbsp;JsonValue&nbsp;json&nbsp;=&nbsp;new&nbsp;JsonValue(new&nbsp;LinkedHashMap&amp;lt;String,&nbsp;Object&amp;gt;(3));<br>
&lt;/span&gt;&lt;span&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;json.put(FIELD_OPERATION,&nbsp;operation);<br>
&lt;/span&gt;&lt;del&gt;-&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;json.put(FIELD_FIELD,&nbsp;field);<br>
&lt;/del&gt;&lt;ins&gt;+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;json.put(FIELD_FIELD,&nbsp;field.toString());<br>
&lt;/ins&gt;&lt;span&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!value.isNull())&nbsp;{<br>
&lt;/span&gt;&lt;span&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;json.put(FIELD_VALUE,&nbsp;value.getObject());<br>
&lt;/span&gt;&lt;span&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&lt;/span&gt;&lt;span&gt;@@&nbsp;-533,6&nbsp;+534,12&nbsp;@@<br>
&lt;/span&gt;&lt;span&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&lt;/span&gt;&lt;span&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&lt;/span&gt;&lt;span&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&lt;/span&gt;&lt;ins&gt;+&nbsp;&nbsp;&nbsp;&nbsp;<br>
+&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;void&nbsp;checkOperationType()&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if&nbsp;(!isAdd()&nbsp;&amp;amp;&amp;amp;&nbsp;!isRemove()&nbsp;&amp;amp;&amp;amp;&nbsp;!isIncrement()&nbsp;&amp;amp;&amp;amp;&nbsp;!isReplace())&nbsp;{<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;throw&nbsp;new&nbsp;IllegalArgumentException(&amp;quot;Invalid&nbsp;patch&nbsp;operation&nbsp;type&nbsp;&amp;quot;&nbsp;+&nbsp;operation);<br>
+&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;}<br>
+&nbsp;&nbsp;&nbsp;&nbsp;}<br>
&lt;/ins&gt;&lt;span&gt;&nbsp;<br>
&lt;/span&gt;&lt;span&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;private&nbsp;boolean&nbsp;is(final&nbsp;String&nbsp;type)&nbsp;{<br>
&lt;/span&gt;&lt;span&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;return&nbsp;operation&nbsp;==&nbsp;type&nbsp;||&nbsp;operation.equalsIgnoreCase(type);<br>
&lt;/span&gt;&lt;/span&gt;&lt;/pre&gt;<br>
&lt;/div&gt;<br>
&lt;/div&gt;<br>
&lt;div&gt;Copyright&nbsp;(c)&nbsp;by&nbsp;ForgeRock.&nbsp;All&nbsp;rights&nbsp;reserved.&lt;/div&gt;<br>
<br>
&lt;/div&gt;<br>
<br>
&lt;br&gt;_______________________________________________&lt;br&gt;<br>
Commons&nbsp;mailing&nbsp;list&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;mailto:Commons@forgerock.org&quot;&gt;Commons@forgerock.org&lt;/a&gt;&lt;br&gt;<br>
&lt;a&nbsp;href=&quot;https://lists.forgerock.org/mailman/listinfo/commons&quot;&nbsp;target=&quot;_blank&quot;&gt;https://lists.forgerock.org/mailman/listinfo/commons&lt;/a&gt;&lt;br&gt;<br>
&lt;br&gt;&lt;/blockquote&gt;&lt;/div&gt;&lt;br&gt;&lt;/div&gt;<br>

</tt>
